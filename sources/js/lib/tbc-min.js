(function(window,$){var tbc,methods,ua=window.navigator.userAgent,rwebkit=/(webkit)[ \/]([\w.]+)/,ropera=/(opera)(?:.*version)?[ \/]([\w.]+)/,rmsie=/(msie) ([\w.]+)/,rmozilla=/(mozilla)(?:.*? rv:([\w.]+))?/,browserMatch;function canInherit(attr,noInherit){var i;if(typeof attr!=="string"){return}for(i=0;i<noInherit.length;i+=1){if(attr===noInherit[i]){return false}}return true}function uaMatch(ua){ua=ua.toLowerCase();var match=rwebkit.exec(ua)||ropera.exec(ua)||rmsie.exec(ua)||ua.indexOf("compatible")<0&&rmozilla.exec(ua)||[];return{browser:match[1]||"",version:match[2]||"0"}}(function(){if(!
/*@cc_on!@*/
0){return}var t="abbr,article,aside,audio,canvas,datalist,details,dialog,eventsource,figure,footer,header,hgroup,mark,menu,meter,nav,output,progress,time,video,section,summary",e=t.split(","),i=e.length;while(i--){document.createElement(e[i])}}());window.console=window.console||{log:function(msg){}};window.tbc=tbc=window.tbc||{nspath:"tbc"};tbc.namespace=tbc.ns=function(ns,obj){ns=ns.split(/[.\/\\>]/);var namespace=obj||tbc,nspath=namespace.nspath||"window",i,len;for(i=0,len=ns.length;i<len;i+=1){if(i!==0||ns[i]!=="tbc"){nspath+="."+ns[i];namespace[ns[i]]=namespace[ns[i]]||{superClass:namespace};namespace[ns[i]].nspath=namespace[ns[i]].nspath||nspath;namespace=namespace[ns[i]]}}try{return namespace}finally{namespace=nspath=null}};tbc.version="1.0";tbc.self=function(algateThis,algateArguments){var args=algateArguments||[],subc=args[args.length-1],self=(subc&&typeof(subc)==="object"&&subc.subclass)?subc.subclass:algateThis,i,k,l,exist;if(self){self.extend=function(){var arg=[this];this.parentClass=this.parentClass||[];for(i=0;i<arguments.length;i+=1){exist=null;for(k=0,l=this.parentClass.length;k<l;k+=1){if(this.parentClass[k]===arguments[i]){exist=true;break}}if(!exist){this.parentClass.push(arguments[i]);arg.push(arguments[i])}}tbc.extend.apply(this,arg);arg=null;return this};self.extend(tbc.ClassManager,tbc.Event)}try{return self}finally{args=subc=self=null}};tbc.extend=function(){var args=arguments,len=args.length,noInherit="nspath,superClass,extend,iid,guid,packageName",obj,i,p;noInherit=noInherit.split(",");if(len>1){for(i=1;i<len;i+=1){switch(typeof(args[i])){case"object":if(args[i]&&args[i].constructor===Array&&typeof(args[i][0])==="function"){obj=new args[i][0](args[i][1],{subclass:args[0]})}else{obj=args[i]}break;case"function":obj=new args[i]({subclass:args[0]});break;default:obj={}}for(p in obj){if(obj.hasOwnProperty(p)&&canInherit(p,noInherit)!==false){if(typeof obj[p]!=="undefined"){args[0][p]=obj[p]}}}}}try{return args[0]}finally{args=obj=null}};browserMatch=uaMatch(ua);if(browserMatch.browser){tbc[browserMatch.browser]=true;tbc.browserVersion=browserMatch.version}tbc.touchable="ontouchstart" in document.documentElement;methods={getCoordinate:function(elem,offsetParent){elem=$(typeof(elem)==="string"?document.getElementById(elem):elem);var offset_1=elem.size()?elem.offset():{left:0,top:0},offset={left:offset_1.left,top:offset_1.top,bottom:0,right:0,width:elem.outerWidth(),height:elem.outerHeight()};offset.right=offset.left+offset.width;offset.bottom=offset.top+offset.height;try{return offset}finally{offset=elem=offsetParent=offset_1=null}},getScroll:function(elem,scrollParent){var scroll={top:0,left:0},elem_2=elem.parentNode;if(elem_2||(elem_2&&elem_2.nodeName==="body")){return scroll}while(elem_2&&elem_2!==(scrollParent||document.body)){scroll.left+=elem_2.scrollLeft||0;scroll.top+=elem_2.scrollTop||0;elem_2=elem_2.parentNode}try{return scroll}finally{elem=elem_2=scrollParent=scroll=null}},lock:function(elem,zIndex){elem=$(elem||document.body);var css=typeof(zIndex)==="number"?{zIndex:zIndex}:zIndex,pos=elem.css("position"),zin=($.isNumeric(zIndex))?zIndex:this.getMaxZIndex(elem),wid=elem.innerWidth(),hei=elem.innerHeight(),mask=$('<div class="elem_mask"></div>').appendTo(elem);css=$.extend({position:"absolute",top:0,left:0,width:wid,cursor:"wait",height:hei,backgroundColor:"#000",opacity:0.2,zIndex:zin+1},css);mask.css(css);if(!pos||pos==="static"||pos===""){elem.css({position:"relative"})}try{return mask}finally{elem=pos=mask=zin=css=null}},unlock:function(elem){elem=$(elem||document.body);elem.children(".elem_mask").fadeOut(200,function(){$(this).remove();elem=null})},percentToInt:function(value,base){return(typeof(value)==="string"&&value.match(/%$/))?window.parseInt(value)/100*base:value},percentToFloat:function(value,base){return(typeof(value)==="string"&&value.match(/%$/))?window.parseFloat(value)/100*base:value},substr:function(str,len){if(!str||!len){return str||""}var a=0,i=0,temp="";for(i=0;i<str.length;i+=1){a+=(str.charCodeAt(i)>255)?2:1;if(a>len){return temp}temp+=str.charAt(i)}return str},formatString:function(str){if(arguments.length===0){return null}var i,re;for(i=1;i<arguments.length;i+=1){re=new RegExp("\\{"+(i-1)+"\\}","gm");str=str.replace(re,arguments[i])}return str},stringTemplate:function(templete,values,transform){if(values&&typeof values!=="object"){return templete}transform=transform||{};var k,re;for(k in values){if(values.hasOwnProperty(k)){re=new RegExp("\\{"+k+"\\}","gm");templete=templete.replace(re,transform[values[k]]||values[k]||"")}}templete=templete.replace(/\{\w+\}/g,"");return templete},getMaxZIndex:function(offsetParent){var zindex=0,child;offsetParent=$(offsetParent||"body");child=offsetParent.children();child.each(function(i,o){var z=$(this).css("zIndex");z=(z&&!isNaN(z))?z:0;zindex=Math.max(zindex,z)});try{return zindex}finally{child=offsetParent=null}},getElementByMaxZIndex:function(n1,n2){n1=$(n1);n2=$(n2);var p1=n1[0],p2=n2[0],_1,_2,z1,z2;while(p1&&p1!==document.body){_1=p1.offsetParent;while(_1&&p2&&p2!==document.body){_2=p2.offsetParent;if(_2&&_1===_2){z1=$(p1).css("zIndex");z2=$(p2).css("zIndex");z1=z1==="auto"?0:z1;z2=z2==="auto"?0:z2;var isNext=$(_1).nextAll().index(_2)===-1;p1=p2=_1=_2=null;return z1>z2?n1:((z1===z2&&isNext)?n1:n2)}p2=_2}p2=n2[0];p1=_1}},getCursorPosition:function(textarea){var rangeData={text:"",start:0,end:0};textarea.focus();if(textarea.setSelectionRange){rangeData.start=textarea.selectionStart;rangeData.end=textarea.selectionEnd;rangeData.text=(rangeData.start!==rangeData.end)?textarea.value.substring(rangeData.start,rangeData.end):""}else{if(document.selection){var i,oS=document.selection.createRange(),oR=document.body.createTextRange();oR.moveToElementText(textarea);rangeData.text=oS.text;rangeData.bookmark=oS.getBookmark();for(i=0;oR.compareEndPoints("StartToStart",oS)<0&&oS.moveStart("character",-1)!==0;i++){if(textarea.value.charAt(i)==="\n"){i++}}rangeData.start=i;rangeData.end=rangeData.text.length+rangeData.start}}return rangeData},setCursorPosition:function(textarea,rangeData){if(!rangeData){alert("You must get cursor position first.")}if(textarea.setSelectionRange){textarea.focus();textarea.setSelectionRange(rangeData.start,rangeData.end)}else{if(textarea.createTextRange){var oR=textarea.createTextRange();if(textarea.value.length===rangeData.start){oR.collapse(false);oR.select()}else{oR.moveToBookmark(rangeData.bookmark);oR.select()}}}},setCursors:function(el,st,end){if(el.setSelectionRange){el.focus();el.setSelectionRange(st,end)}else{if(el.createTextRange){range=el.createTextRange();range.collapse(true);range.moveEnd("character",end);range.moveStart("character",st);range.select()}}},setCursor:function(el){var range=this.getCursorPosition(el);this.setCursorPosition(el,range)},batch:function(queue,size,current,timeout,method,callback,_nextPort){if(!$.isArray(queue)){return false}current=current||0;size=size||1000;timeout=timeout||20;var start=current*size,length=queue.length,end=Math.min((current+1)*size,length),portion=queue.slice(start,end);$.isFunction(method)?method(portion,end===length,current):(window.console&&console.log("Error: tbc.batch(...). arguments[4] must be a function;"));setTimeout(function(){current+=1;if(size*(current)<length){tbc.batch(queue,size,current,timeout,method,callback)}},timeout);if(end===length&&$.isFunction(callback)){callback.call(this)}},seriesForm:function(obj){var field=$("input,textarea,select",obj),serialize=[],checkbox={},selected=[],radio={},k;field.each(function(){var tag=this.tagName.toLowerCase();if(this.disabled){return true}switch(tag){case"input":switch(this.type){case"checkbox":checkbox[this.name]=checkbox[this.name]||[];if(this.checked){checkbox[this.name].push(this.value)}break;case"radio":radio[this.name]=radio[this.name]||[];if(this.checked){radio[this.name].push(this.value)}break;case"button":case"reset":break;case"submit":if(!$(this).hasClass("trigger_aspnet_event")){break}default:serialize.push([this.name||this.id,encodeURIComponent(this.value)].join("="));break}break;case"textarea":serialize.push([this.name||this.id,encodeURIComponent(this.value)].join("="));break;case"select":$("option",this).each(function(){if(this.selected){selected.push(encodeURIComponent(this.value))}});serialize.push([this.name||this.id,selected.join(",")].join("="));break;case"button":serialize.push([this.name||this.id,encodeURIComponent(this.value)].join("="));break}});field=null;for(k in checkbox){serialize.push([k,checkbox[k].join(",")].join("="))}for(k in radio){serialize.push([k,radio[k].join(",")].join("="))}try{return serialize.join("&")}finally{serialize=radio=checkbox=selected=null}},replaceUrlParam:function(key,value,url){var keys=this.isObject(key)?key:(function(){var o={};o[key]=value;return o})();var s=url||document.location.search;s=s.substring(s.indexOf("?")+1).split("&");var search={};$.each(s,function(i){var ks=this.split("=");search[ks[0]]=ks[1]||""});$.extend(search,keys);return search},mergerPath:function(base,url){var base=(base||document.location.href);if(url.match(/^https?:\/\//)){if($.browser.msie&&$.browser.version<6&&false){var lct=document.location;var fullHost=lct.protocol+"//"+lct.host+"/";var exps=new RegExp("^"+fullHost);url=url.replace(exps,"");url=url.substring(url.indexOf("/")+1,url.length)}else{return url}}var dt=base.split("?")[0].split("/");dt.length--;if(!url.match(/^\/{1}/)){while(url.indexOf("../")===0){url=url.slice(3);dt.length--}url=unescape(dt.join("/")+"/"+url)}return url},randomString:function(num){num=num?num-1:15;var chars="0123456789abcdefghijklmnoprstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ!@#$%^&*()_+|=-`";return(function(m,s,c){return(c?arguments.callee(m,s,c-1):"")+s[m.floor(m.random()*s.length)]})(Math,chars,num)},random:function(start,end){switch(arguments.length){case 1:return Math.floor(Math.random()*start+1);case 2:return Math.floor(Math.random()*(end-start+1)+start);default:return 0}},randColor:function(_c){return(function(m,s,c){return(c>0?arguments.callee(m,s,c-1):"#")+s[m.floor(m.random()*16)]})(Math,_c||["1","2","3","4","5","6","7","8","9","0","a","b","c","d","e","f"],5)},isSight:function(elem){var _el=$(elem)[0]?$(elem)[0].parentNode:elem;var parent=this.getCoordinate($(elem)[0]);var offset=this.getCoordinate($(elem)[0]);if(parent.top<offset.top||parent.top>offset.bottom||parent.left<offset.left){return false}try{return true}finally{_el=elem=parent=offset=null}},inArea:function(area,elem){var a1=this.getCoordinate(area);var a2=this.getCoordinate(elem);a2.centerX=a2.left+(a2.width/2);a2.centerY=a2.top+(a2.height/2);if(a2.left>a1.left&&a2.right<a1.right&&a2.top>a1.top&&a2.bottom<a1.bottom){return true}try{return false}finally{area=elem=a1=a2=null}},isIncline:function(area,elem){var a1=this.getCoordinate(area);var a2=this.getCoordinate(elem);a2.centerX=a2.left+(a2.width/2);a2.centerY=a2.top+(a2.height/2);if(a2.centerX>a1.left&&a2.centerX<a1.right&&a2.centerY>a1.top&&a2.centerY<a1.bottom){return true}try{return false}finally{area=elem=a1=a2=null}},isOverlap:function(area,elem){var a1=$.isPlainObject(area)?area:this.getCoordinate(area);var a2=$.isPlainObject(elem)?elem:this.getCoordinate(elem);var left=Math.max(a1.left,a2.left),top=Math.max(a1.top,a2.top),right=Math.min(a1.right,a2.right),bottom=Math.min(a1.bottom,a2.bottom);try{return left<right&&top<bottom}finally{area=elem=a1=a2=null}},center:function(elem,container,callback){elem=$(elem);container=$(container);var _wid=elem.width(),_hei=elem.height(),_left=elem.css("left"),_top=elem.css("top"),pageW,pageH,scrlT,scrlL;if(container.size()){pageW=container.innerWidth();pageH=container.innerHeight();scrlT=container.scrollTop();scrlL=container.scrollLeft()}else{pageW=document.documentElement.clientWidth||document.documentElement.offsetWidth;pageH=document.documentElement.clientHeight||document.documentElement.offsetHeight;scrlT=Math.max(document.documentElement.scrollTop,document.body.scrollTop);scrlL=Math.max(document.documentElement.scrollLeft,document.body.scrollLeft)}_left=pageW<_wid?scrlL:(pageW/2)+scrlL-(_wid/2);_top=pageH<_hei?scrlT:(pageH/2)+scrlT-(_hei/2);elem.css({top:_top,left:_left,width:_wid,height:_hei});callback=callback||container;if($.isFunction(callback)){callback.call(elem)}},array:{unique:function(array){var arr=[],exist,i,len,k;for(i=0,len=array.length;i<len;i+=1){exist=false;for(k=0;k<arr.length;k+=1){if(array[i]===arr[k]){exist=true}}if(exist!==true){arr.push(array[i])}}try{return arr}finally{arr=null}},merge:function(){var args=arguments,len=args.length,arr=[],i;for(i=0;i<len;i+=1){if(typeof args[i]==="object"&&args[i].constructor===Array){arr=arr.concat(args[i])}}try{return this.unique(arr)}finally{args=arr=null}},clear:function(arr){var newArr=[],i,len;for(i=0,len=arr.length;i<len;i+=1){if(typeof arr[i]!=="undefined"){newArr.push(arr[i])}}try{return newArr}finally{newArr=null}},remove:function(array){var arr=[],args=arguments;args=tbc.isArray(args[1])?[1].concat(args[1]):args;$.each(array,function(k,a){var d=false,i,len;for(i=1,len=args.length;i<len;i+=1){if(!d&&args[i]===a){d=true;break}}if(!d){arr.push(a)}});return arr},indexOf:function(item_1,arr){var i,len;arr=(arr&&typeof(arr)==="object"&&arr.constructor===Array)?arr:[];for(i=0,len=arr.length;i<len;i+=1){if(item_1===arr[i]){return i}}return -1},sort:function(array,type){var arr;if(type&&type.toLowerCase()==="desc"){arr=array.sort(this.sortASC)}else{arr=array.sort(this.sortDESC)}try{return arr}finally{arr=null}},sortASC:function(a,b){return a-b},sortDESC:function(a,b){return b-a}},isNumber:function(n){return typeof(n)==="number"},isString:function(s){return typeof(s)==="string"},isFunction:function(f){return typeof(f)==="function"},isNull:function(n){return n===null},isBool:function(b){return typeof(b)==="boolean"},isArray:function(a){return !!a&&a.constructor===Array},isObject:function(o){return !!o&&o.constructor===Object},debug:{printObj:function(o,v){var s=["{\n"],k;for(k in o){if(o.hasOwnProperty(k)){s.push(v?("    "+k+":"+o[k]+",\n"):("    "+k+"; "))}}s.push("}");return s.join("")}},log:function(t){if(window.console){window.console.log(t)}},st:function(){this.st.time=new Date().getTime();return this.st.time},et:function(){var et=new Date().getTime(),lg="tbc.et: "+(et-this.st.time);tbc.log(lg);return et-this.st.time}};tbc.extend(tbc,methods)}(window,jQuery));tbc.Event=function(){var c=tbc.self(this,arguments);c.extend(tbc.ClassManager);c.packageName="tbc.Event";c.extend({eventStorage:{},addEvent:function(h,k){var g,e,j,f,d;if(typeof h==="object"){for(g in h){if(h.hasOwnProperty(g)){c.addEvent(g,h[g])}}return c}if(typeof k==="function"){c.eventStorage[h]=c.eventStorage[h]||[];e=c.eventStorage[h];j=false;for(f=0,d=e.length;f<d;f+=1){if(e[f].toString()===k.toString()){j=true}}if(!j){c.eventStorage[h].push(k)}}return c},removeEvent:function(f,g){var d=c.eventStorage,h;for(h in d){if(d.hasOwnProperty(h)&&(h===f||h.match(new RegExp("(^|\\.)"+f.substring(f.indexOf(".")+1,f.length)+"($|\\.)")))){a(h,g)}}d=null;return c},triggerEvent:function(k,g){var l=[];for(var j=1;j<arguments.length;j++){l.push(arguments[j])}var d,f=c.eventStorage;for(var m in f){if(m===k||m.match(new RegExp("(^|\\.)"+k.substring(k.indexOf(".")+1,k.length)+"($|\\.)"))){var h=b(m,l);d=h===false?false:d;if(h===true){return false}}}f=null;return d===false?false:c}});function a(g,h){if(typeof h==="function"){var e=c.eventStorage[g];if(typeof e==="object"&&e.constructor===Array){var j=[];for(var f=0,d=e.length;f<d;f++){if(e[f].toString()!==h.toString()){j.push(stroe[f])}}c.eventStorage[g]=j}}else{c.eventStorage[g]=[]}}function b(j,k){var d,f=c.eventStorage[j];if(typeof f==="object"&&f.constructor===Array){for(var h=f.length-1;h>-1;h--){if(typeof(f[h])==="function"){try{var g=f[h].apply(c,k);d=g===false?false:d;if(g===true){return true}}catch(l){}}}}return d===false?false:d}};tbc.TASK_DEPOT=tbc.TASK_DEPOT||{};tbc.TASK_DEPOT_COUNT=tbc.TASK_DEPOT_COUNT||0;tbc.guid=tbc.guid||0;tbc.TASKS=function(b,a){if(!b){return null}if(a&&!tbc.TASK_DEPOT[b]){tbc.TASK_DEPOT[b]=a;tbc.TASK_DEPOT_COUNT+=1}else{return tbc.TASK_DEPOT[b]||null}};tbc.getTaskByElement=function(b){var a=$(b).attr("tbc");a=a||$(b).parents("[tbc]:first").attr("tbc");return tbc.TASKS(a)};tbc.TASKS.set=function(b,a){this(b,a)};tbc.TASKS.get=function(a){return this(a)};tbc.TASKS.del=function(g,b){var c=tbc.TASK_DEPOT[g];if(g&&c){try{c.container&&tbc.TASK_DEPOT[g]["container"].empty().remove();c.ui&&tbc.TASK_DEPOT[g]["ui"].empty().remove()}catch(f){}var d=c.DEPENDS||[];tbc.TASKS.killAll(d);for(var a in c){delete tbc.TASK_DEPOT[g][a]}c=null;delete tbc.TASK_DEPOT[g]}};tbc.TASKS.killAll=function(b){for(var a in tbc.TASK_DEPOT){if(tbc.TASK_DEPOT[a].DEPENDS){$.each(b||[],function(d,c){if(c===a){tbc.TASK_DEPOT[a].DESTROY()}})}}};tbc.ClassManager=function(b){var a=tbc.self(this,arguments);a.packageName="tbc.ClassManager";a.extend({DEPENDS:[],depend:function(c){if(tbc.isArray(c.DEPENDS)){c.DEPENDS.push(this.guid)}},dependSelf:function(c){c=c.guid||c;this.DEPENDS.push(c)},undepend:function(c){if(c&&tbc.isArray(c.DEPENDS)){c.DEPENDS=tbc.array.remove(c.DEPENDS,this.guid)}},undependSelf:function(d){var c=d.guid||d;this.DEPENDS=tbc.array.remove(this.DEPENDS,c)},INIT:function(){this.constructor.maxid=this.constructor.maxid?this.constructor.maxid:0;this.constructor.maxid=this.constructor.maxid+1;this.iid=this.constructor.maxid;this.constructor.count=this.constructor.count&&!isNaN(this.constructor.count)?this.constructor.count+1:1;this.guid=++tbc.guid;this.constructor.instance=this.constructor.instance||{};this.CREATE_TIME=new Date().getTime();this.INSTANCE(this.iid,this);tbc.TASKS(this.guid,this)},INSTANCE:function(d,c){if(!d){return null}if(c&&!this.constructor.instance[d]){this.constructor.instance[d]=c}else{return this.constructor.instance[d]||null}},DESTROY:function(){var c=this.guid,f=this.iid;this.triggerEvent("destroy");this.INSTANCE.del(f);tbc.TASKS.del(c,false);try{a=c=f=null}catch(d){}}});a.INSTANCE.get=function(c){return this(c)};a.INSTANCE.set=function(d,c){this(d,c)};a.INSTANCE.del=function(c){if(a.constructor.instance[c]){delete a.constructor.instance[c];a.constructor.count=a.constructor.count-1}};a.INIT()};
