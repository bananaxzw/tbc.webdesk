<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>TBC JS tests</title>
<meta name="description" content="">
<meta name="keywords" content="">
<link href="" rel="stylesheet">

<!-- Bootstrap.start -->
<link rel="stylesheet" href="/tests/css/bootstrap.min.css">
<link rel="stylesheet" href="/tests/css/bootstrap-theme.min.css">
<script src="/tests/js/jquery-2.1.1.min.js"></script>
<script src="/tests/js/bootstrap.min.js"></script>
<!-- Bootstrap.end -->

<link rel="stylesheet" href="/tests/css/highlight/monokai_sublime.css">
<script src="/tests/js/highlight-min.js"></script>

<script src="/webdesk/js/tbc-extend-min.js"></script>
<script src="/webdesk/js/jQuery/jQuery.organizationSelector.js"></script>
<link rel="stylesheet" href="/swebdesk/css/default/tbc.webdesk.css">
<link rel="stylesheet" href="/webdesk/css/classic/skin.css">

<link rel="stylesheet" href="/tests/css/init.css">
<script src="/tests/js/init.js"></script>
</head>
<body>


  <div class="panel panel-default">
    <!-- Default panel contents -->

    <div class="panel-heading">jQuery.organizationSelector.js</div>
    <div class="panel-body">
      <h4>选组织、部门、群组组件，功能说明：</h4>
      <ol>
        <li>支持即时保存（选择后立即保存到服务器端）；</li>
        <li>支持延迟保存，选好所有部门、岗位群组后，点击确认或保存按钮；</li>
        <li>支持确认事件和取消事件；</li>
        <li>确认按钮和取消按钮可自定义文字；</li>
      </ol>
      <h4>详细配置：</h4>
    </div>
    <!-- Table -->
    <table class="table">
      <thead>
        <tr>
          <td>属性名</td>
          <td>默认值</td>
          <td>类型</td>
          <td>说明</td>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>max</td>
          <td>0</td>
          <td>number</td>
          <td>限制最多能选多少项</td>
        </tr>
        <tr>
          <td>verifyButton</td>
          <td>true</td>
          <td>Boolean</td>
          <td>是否显示确认按钮</td>
        </tr>
        <tr>
          <td>cancelButton</td>
          <td>true</td>
          <td>Boolean</td>
          <td>是否显示取消按钮</td>
        </tr>
        <tr>
          <td>deletable</td>
          <td>true</td>
          <td>Boolean</td>
          <td>是否可以移除已选择的项目</td>
        </tr>
        <tr>
          <td>verifyText</td>
          <td>i18n('v4.js.confirm')</td>
          <td>String</td>
          <td>确认按钮的文字，默认为国际化值</td>
        </tr>
        <tr>
          <td>cancelText</td>
          <td>i18n('v4.js.cancel')</td>
          <td>String</td>
          <td>取消按钮的文字，默认为国际化值</td>
        </tr>
        <tr>
          <td>autoSave</td>
          <td>true</td>
          <td>Boolean</td>
          <td>是否启用自动保存，启用后选择到已选栏的选项将即时保存到数据库。</td>
        </tr>
        <tr>
          <td>lazy</td>
          <td>false</td>
          <td>Boolean</td>
          <td>是否延迟保存，仅对autoSave==true时有效，在选好想要的选项之后，点击确定按钮时，自动保存选择结果到服务器。</td>
        </tr>
        <tr>
          <td>orgItem</td>
          <td>null</td>
          <td>Array[Object, ...]</td>
          <td>左侧的手风琴选择器配置选项</td>
        </tr>
        <tr>
          <td>orgItem[].nodeType</td>
          <td>"ORGANIZATION", "POSITION", "GROUP"</td>
          <td>String (constant)</td>
          <td>手风琴选项卡的类型</td>
        </tr>
        <tr>
          <td>orgItem[].includeChild</td>
          <td>flase</td>
          <td>Boolean</td>
          <td>是否包含子类</td>
        </tr>
        <tr>
          <td>selectedData</td>
          <td>''</td>
          <td>String - ids split with ','</td>
          <td>已选栏的默认数据, 一般为用逗号分隔的id串</td>
        </tr>
        <tr>
          <td>post</td>
          <td>null</td>
          <td>Object</td>
          <td>需要传送给服务器接口的数据，这是数据是指在你实现UC提供的选择组件接口时需要用到的参数，例如：
              <script class="democode">
              , post: {
                  userId  : "uid-xxxxxx",
                  appCode : "uid"
              }
              ,
              </script>
          </td>
        </tr>
        <tr>
          <td>events</td>
          <td>null</td>
          <td>Object</td>
          <td>事件</td>
        </tr>
        <tr>
          <td>events.verify</td>
          <td>null</td>
          <td>Function</td>
          <td>确认事件的方法</td>
        </tr>
        <tr>
          <td>events.cancel</td>
          <td>null</td>
          <td>Function</td>
          <td>取消事件的方法</td>
        </tr>
      </tbody>
    </table>

    <div class="panel-body">
      <h4>Demo：</h4>
      <div class="demo1">
        <button class="openSelector btn btn-primary">猛戳我以打开选择组件...</button>
      </div>
      <script class="democode">

          $(".openSelector").click(function() {

            $().organizationSelector ({
                //max         : 1,
                ucUrl         : "orgSelectorInner.html", // 不用配置，默认即可
                verifyButton  : true,
                cancelButton  : true,
                deletable     : true,
                verifyText    : "Verify",
                cancelText    : "Cancel",//
                //autoSave    : false, // 自动保存
                lazy          : true, // 延迟保存
                //max         : 3,
                accountStatus : "ENABLE",
                orgItem     : [
                    // 启用部门选择
                    {
                        nodeType     :"ORGANIZATION",
                        includeChild :true,
                        autoSelectChild: true, // 在启用包含子类的选项后，自动选中子节点
                        treeOptions: {
                            cascadeSelect: true // 仅在includeChild==true时生效
                        }

                    }

                    // 启用岗位选择
                    ,{
                        nodeType     :"POSITION",
                        includeChild :true,
                        treeOptions: {
                            cascadeSelect: false // 仅在includeChild==true时生效
                        }
                    }

                    // 启用群组选择
                    ,{
                        nodeType: "GROUP",
                        includeChild: true,
                        autoSelectChild: true, // 在启用包含子类的选项后，自动选中子节点
                        treeOptions: {
                            cascadeSelect: true // 仅在includeChild==true时生效
                        }
                    }
                ],
                selectedData  : "id1, id2, id3",
                post          : {
                    id    : "XXXXXXXXXXXXXXXXXX",
                    aaaa  : "wwwwwwwwwww"
                },
                events : {
                    verify : function( selected_array ){

                        // 分批处理
                        $.batch( selected_array, 1000, 0, 1, function( list ){

                            // 在这里处理返回的已选项:list是已经分批后的单批次;
                            for( var i=0,len=list.length; i<len; i++ ) {

                            }
                        }, function(){} );

                        return false; // return false 会阻止选人组件关闭;返回其他值不做任何处理;
                    },

                    cancel : function ( selected_array ) {

                        //return false;
                    }
                }
            });

          });
      </script>
    </div>
  </div>



  <script type="text/javascript">
      $('.democode').each(function() {
          code.view(this);
      });
  </script>
</body>
</html>