/** 
 * -------------------------------------------------------------
 * Copyright (c) 2013 时代光华, All rights reserved. 
 * http://www.21tb.com/ 
 *  
 * @version: 0.0.1 
 * @author: Colin <mail@luozhihua.com> 
 * @description: TBC Javascript Project 
 * ------------------------------------------------------------- 
 */ 

function t(a){$("#tips").append("<div>"+a+"; </div>")}!function(a,b){function c(a){var b,c,d=L[a]={};for(a=a.split(/\s+/),b=0,c=a.length;c>b;b++)d[a[b]]=!0;return d}function d(a,c,d){if(d===b&&1===a.nodeType){var e="data-"+c.replace(O,"-$1").toLowerCase();if(d=a.getAttribute(e),"string"==typeof d){try{d="true"===d?!0:"false"===d?!1:"null"===d?null:K.isNumeric(d)?parseFloat(d):N.test(d)?K.parseJSON(d):d}catch(f){}K.data(a,c,d)}else d=b}return d}function e(a){for(var b in a)if(("data"!==b||!K.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function f(a,b,c){var d=b+"defer",e=b+"queue",f=b+"mark",g=K._data(a,d);!g||"queue"!==c&&K._data(a,e)||"mark"!==c&&K._data(a,f)||setTimeout(function(){K._data(a,e)||K._data(a,f)||(K.removeData(a,d,!0),g.fire())},0)}function g(){return!1}function h(){return!0}function i(a){return!a||!a.parentNode||11===a.parentNode.nodeType}function j(a,b,c){if(b=b||0,K.isFunction(b))return K.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c});if(b.nodeType)return K.grep(a,function(a){return a===b===c});if("string"==typeof b){var d=K.grep(a,function(a){return 1===a.nodeType});if(mb.test(b))return K.filter(b,d,!c);b=K.filter(b,d)}return K.grep(a,function(a){return K.inArray(a,b)>=0===c})}function k(a){var b=qb.split("|"),c=a.createDocumentFragment();if(c.createElement)for(;b.length;)c.createElement(b.pop());return c}function l(a){return K.nodeName(a,"table")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function m(a,b){if(1===b.nodeType&&K.hasData(a)){var c,d,e,f=K._data(a),g=K._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;e>d;d++)K.event.add(b,c+(h[c][d].namespace?".":"")+h[c][d].namespace,h[c][d],h[c][d].data)}g.data&&(g.data=K.extend({},g.data))}}function n(a,b){var c;1===b.nodeType&&(b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase(),"object"===c?b.outerHTML=a.outerHTML:"input"!==c||"checkbox"!==a.type&&"radio"!==a.type?"option"===c?b.selected=a.defaultSelected:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue):(a.checked&&(b.defaultChecked=b.checked=a.checked),b.value!==a.value&&(b.value=a.value)),b.removeAttribute(K.expando))}function o(a){return"undefined"!=typeof a.getElementsByTagName?a.getElementsByTagName("*"):"undefined"!=typeof a.querySelectorAll?a.querySelectorAll("*"):[]}function p(a){("checkbox"===a.type||"radio"===a.type)&&(a.defaultChecked=a.checked)}function q(a){var b=(a.nodeName||"").toLowerCase();"input"===b?p(a):"script"!==b&&"undefined"!=typeof a.getElementsByTagName&&K.grep(a.getElementsByTagName("input"),p)}function r(a){var b=H.createElement("div");return Eb.appendChild(b),b.innerHTML=a.outerHTML,b.firstChild}function s(a,b){b.src?K.ajax({url:b.src,async:!1,dataType:"script"}):K.globalEval((b.text||b.textContent||b.innerHTML||"").replace(Cb,"/*$0*/")),b.parentNode&&b.parentNode.removeChild(b)}function t(a,b,c){var d="width"===b?a.offsetWidth:a.offsetHeight,e="width"===b?Pb:Qb,f=0,g=e.length;if(d>0){if("border"!==c)for(;g>f;f++)c||(d-=parseFloat(K.css(a,"padding"+e[f]))||0),"margin"===c?d+=parseFloat(K.css(a,c+e[f]))||0:d-=parseFloat(K.css(a,"border"+e[f]+"Width"))||0;return d+"px"}if(d=Fb(a,b,b),(0>d||null==d)&&(d=a.style[b]||0),d=parseFloat(d)||0,c)for(;g>f;f++)d+=parseFloat(K.css(a,"padding"+e[f]))||0,"padding"!==c&&(d+=parseFloat(K.css(a,"border"+e[f]+"Width"))||0),"margin"===c&&(d+=parseFloat(K.css(a,c+e[f]))||0);return d+"px"}function u(a){return function(b,c){if("string"!=typeof b&&(c=b,b="*"),K.isFunction(c))for(var d,e,f,g=b.toLowerCase().split(dc),h=0,i=g.length;i>h;h++)d=g[h],f=/^\+/.test(d),f&&(d=d.substr(1)||"*"),e=a[d]=a[d]||[],e[f?"unshift":"push"](c)}}function v(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;for(var h,i=a[f],j=0,k=i?i.length:0,l=a===hc;k>j&&(l||!h);j++)h=i[j](c,d,e),"string"==typeof h&&(!l||g[h]?h=b:(c.dataTypes.unshift(h),h=v(a,c,d,e,h,g)));return!l&&h||g["*"]||(h=v(a,c,d,e,"*",g)),h}function w(a,c){var d,e,f=K.ajaxSettings.flatOptions||{};for(d in c)c[d]!==b&&((f[d]?a:e||(e={}))[d]=c[d]);e&&K.extend(!0,a,e)}function x(a,b,c,d){if(K.isArray(b))K.each(b,function(b,e){c||Ub.test(a)?d(a,e):x(a+"["+("object"==typeof e||K.isArray(e)?b:"")+"]",e,c,d)});else if(c||null==b||"object"!=typeof b)d(a,b);else for(var e in b)x(a+"["+e+"]",b[e],c,d)}function y(a,c,d){var e,f,g,h,i=a.contents,j=a.dataTypes,k=a.responseFields;for(f in k)f in d&&(c[k[f]]=d[f]);for(;"*"===j[0];)j.shift(),e===b&&(e=a.mimeType||c.getResponseHeader("content-type"));if(e)for(f in i)if(i[f]&&i[f].test(e)){j.unshift(f);break}if(j[0]in d)g=j[0];else{for(f in d){if(!j[0]||a.converters[f+" "+j[0]]){g=f;break}h||(h=f)}g=g||h}return g?(g!==j[0]&&j.unshift(g),d[g]):void 0}function z(a,c){a.dataFilter&&(c=a.dataFilter(c,a.dataType));var d,e,f,g,h,i,j,k,l=a.dataTypes,m={},n=l.length,o=l[0];for(d=1;n>d;d++){if(1===d)for(e in a.converters)"string"==typeof e&&(m[e.toLowerCase()]=a.converters[e]);if(g=o,o=l[d],"*"===o)o=g;else if("*"!==g&&g!==o){if(h=g+" "+o,i=m[h]||m["* "+o],!i){k=b;for(j in m)if(f=j.split(" "),(f[0]===g||"*"===f[0])&&(k=m[f[1]+" "+o])){j=m[j],j===!0?i=k:k===!0&&(i=j);break}}i||k||K.error("No conversion from "+h.replace(" "," to ")),i!==!0&&(c=i?i(c):k(j(c)))}}return c}function A(){try{return new a.XMLHttpRequest}catch(b){}}function B(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function C(){return setTimeout(D,0),tc=K.now()}function D(){tc=b}function E(a,b){var c={};return K.each(xc.concat.apply([],xc.slice(0,b)),function(){c[this]=a}),c}function F(a){if(!uc[a]){var b=H.body,c=K("<"+a+">").appendTo(b),d=c.css("display");c.remove(),("none"===d||""===d)&&(qc||(qc=H.createElement("iframe"),qc.frameBorder=qc.width=qc.height=0),b.appendChild(qc),rc&&qc.createElement||(rc=(qc.contentWindow||qc.contentDocument).document,rc.write(("CSS1Compat"===H.compatMode?"<!doctype html>":"")+"<html><body>"),rc.close()),c=rc.createElement(a),rc.body.appendChild(c),d=K.css(c,"display"),b.removeChild(qc)),uc[a]=d}return uc[a]}function G(a){return K.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}var H=a.document,I=a.navigator,J=a.location,K=function(){function c(){if(!h.isReady){try{H.documentElement.doScroll("left")}catch(a){return setTimeout(c,1),void 0}h.ready()}}var d,e,f,g,h=function(a,b){return new h.fn.init(a,b,d)},i=a.jQuery,j=a.$,k=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,l=/\S/,m=/^\s+/,n=/\s+$/,o=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,p=/^[\],:{}\s]*$/,q=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,r=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,s=/(?:^|:|,)(?:\s*\[)+/g,t=/(webkit)[ \/]([\w.]+)/,u=/(opera)(?:.*version)?[ \/]([\w.]+)/,v=/(msie) ([\w.]+)/,w=/(mozilla)(?:.*? rv:([\w.]+))?/,x=/-([a-z]|[0-9])/gi,y=/^-ms-/,z=function(a,b){return(b+"").toUpperCase()},A=I.userAgent,B=Object.prototype.toString,C=Object.prototype.hasOwnProperty,D=Array.prototype.push,E=Array.prototype.slice,F=String.prototype.trim,G=Array.prototype.indexOf,J={};return h.fn=h.prototype={constructor:h,init:function(a,c,d){var e,f,g,i;if(!a)return this;if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if("body"===a&&!c&&H.body)return this.context=H,this[0]=H.body,this.selector=a,this.length=1,this;if("string"==typeof a){if(e="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:k.exec(a),!e||!e[1]&&c)return!c||c.jquery?(c||d).find(a):this.constructor(c).find(a);if(e[1])return c=c instanceof h?c[0]:c,i=c?c.ownerDocument||c:H,g=o.exec(a),g?h.isPlainObject(c)?(a=[H.createElement(g[1])],h.fn.attr.call(a,c,!0)):a=[i.createElement(g[1])]:(g=h.buildFragment([e[1]],[i]),a=(g.cacheable?h.clone(g.fragment):g.fragment).childNodes),h.merge(this,a);if(f=H.getElementById(e[2]),f&&f.parentNode){if(f.id!==e[2])return d.find(a);this.length=1,this[0]=f}return this.context=H,this.selector=a,this}return h.isFunction(a)?d.ready(a):(a.selector!==b&&(this.selector=a.selector,this.context=a.context),h.makeArray(a,this))},selector:"",jquery:"1.7.1",length:0,size:function(){return this.length},toArray:function(){return E.call(this,0)},get:function(a){return null==a?this.toArray():0>a?this[this.length+a]:this[a]},pushStack:function(a,b,c){var d=this.constructor();return h.isArray(a)?D.apply(d,a):h.merge(d,a),d.prevObject=this,d.context=this.context,"find"===b?d.selector=this.selector+(this.selector?" ":"")+c:b&&(d.selector=this.selector+"."+b+"("+c+")"),d},each:function(a,b){return h.each(this,a,b)},ready:function(a){return h.bindReady(),f.add(a),this},eq:function(a){return a=+a,-1===a?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(E.apply(this,arguments),"slice",E.call(arguments).join(","))},map:function(a){return this.pushStack(h.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:D,sort:[].sort,splice:[].splice},h.fn.init.prototype=h.fn,h.extend=h.fn.extend=function(){var a,c,d,e,f,g,i=arguments[0]||{},j=1,k=arguments.length,l=!1;for("boolean"==typeof i&&(l=i,i=arguments[1]||{},j=2),"object"==typeof i||h.isFunction(i)||(i={}),k===j&&(i=this,--j);k>j;j++)if(null!=(a=arguments[j]))for(c in a)d=i[c],e=a[c],i!==e&&(l&&e&&(h.isPlainObject(e)||(f=h.isArray(e)))?(f?(f=!1,g=d&&h.isArray(d)?d:[]):g=d&&h.isPlainObject(d)?d:{},i[c]=h.extend(l,g,e)):e!==b&&(i[c]=e));return i},h.extend({noConflict:function(b){return a.$===h&&(a.$=j),b&&a.jQuery===h&&(a.jQuery=i),h},isReady:!1,readyWait:1,holdReady:function(a){a?h.readyWait++:h.ready(!0)},ready:function(a){if(a===!0&&!--h.readyWait||a!==!0&&!h.isReady){if(!H.body)return setTimeout(h.ready,1);if(h.isReady=!0,a!==!0&&--h.readyWait>0)return;f.fireWith(H,[h]),h.fn.trigger&&h(H).trigger("ready").off("ready")}},bindReady:function(){if(!f){if(f=h.Callbacks("once memory"),"complete"===H.readyState)return setTimeout(h.ready,1);if(H.addEventListener)H.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",h.ready,!1);else if(H.attachEvent){H.attachEvent("onreadystatechange",g),a.attachEvent("onload",h.ready);var b=!1;try{b=null==a.frameElement}catch(d){}H.documentElement.doScroll&&b&&c()}}},isFunction:function(a){return"function"===h.type(a)},isArray:Array.isArray||function(a){return"array"===h.type(a)},isWindow:function(a){return a&&"object"==typeof a&&"setInterval"in a},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return null==a?String(a):J[B.call(a)]||"object"},isPlainObject:function(a){if(!a||"object"!==h.type(a)||a.nodeType||h.isWindow(a))return!1;try{if(a.constructor&&!C.call(a,"constructor")&&!C.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}var d;for(d in a);return d===b||C.call(a,d)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw new Error(a)},parseJSON:function(b){return"string"==typeof b&&b?(b=h.trim(b),a.JSON&&a.JSON.parse?a.JSON.parse(b):p.test(b.replace(q,"@").replace(r,"]").replace(s,""))?new Function("return "+b)():(h.error("Invalid JSON: "+b),void 0)):null},parseXML:function(c){var d,e;try{a.DOMParser?(e=new DOMParser,d=e.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(f){d=b}return d&&d.documentElement&&!d.getElementsByTagName("parsererror").length||h.error("Invalid XML: "+c),d},noop:function(){},globalEval:function(b){b&&l.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(y,"ms-").replace(x,z)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,d){var e,f=0,g=a.length,i=g===b||h.isFunction(a);if(d)if(i){for(e in a)if(c.apply(a[e],d)===!1)break}else for(;g>f&&c.apply(a[f++],d)!==!1;);else if(i){for(e in a)if(c.call(a[e],e,a[e])===!1)break}else for(;g>f&&c.call(a[f],f,a[f++])!==!1;);return a},trim:F?function(a){return null==a?"":F.call(a)}:function(a){return null==a?"":a.toString().replace(m,"").replace(n,"")},makeArray:function(a,b){var c=b||[];if(null!=a){var d=h.type(a);null==a.length||"string"===d||"function"===d||"regexp"===d||h.isWindow(a)?D.call(c,a):h.merge(c,a)}return c},inArray:function(a,b,c){var d;if(b){if(G)return G.call(b,a,c);for(d=b.length,c=c?0>c?Math.max(0,d+c):c:0;d>c;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,c){var d=a.length,e=0;if("number"==typeof c.length)for(var f=c.length;f>e;e++)a[d++]=c[e];else for(;c[e]!==b;)a[d++]=c[e++];return a.length=d,a},grep:function(a,b,c){var d,e=[];c=!!c;for(var f=0,g=a.length;g>f;f++)d=!!b(a[f],f),c!==d&&e.push(a[f]);return e},map:function(a,c,d){var e,f,g=[],i=0,j=a.length,k=a instanceof h||j!==b&&"number"==typeof j&&(j>0&&a[0]&&a[j-1]||0===j||h.isArray(a));if(k)for(;j>i;i++)e=c(a[i],i,d),null!=e&&(g[g.length]=e);else for(f in a)e=c(a[f],f,d),null!=e&&(g[g.length]=e);return g.concat.apply([],g)},guid:1,proxy:function(a,c){if("string"==typeof c){var d=a[c];c=a,a=d}if(!h.isFunction(a))return b;var e=E.call(arguments,2),f=function(){return a.apply(c,e.concat(E.call(arguments)))};return f.guid=a.guid=a.guid||f.guid||h.guid++,f},access:function(a,c,d,e,f,g){var i=a.length;if("object"==typeof c){for(var j in c)h.access(a,j,c[j],e,f,d);return a}if(d!==b){e=!g&&e&&h.isFunction(d);for(var k=0;i>k;k++)f(a[k],c,e?d.call(a[k],k,f(a[k],c)):d,g);return a}return i?f(a[0],c):b},now:function(){return(new Date).getTime()},uaMatch:function(a){a=a.toLowerCase();var b=t.exec(a)||u.exec(a)||v.exec(a)||a.indexOf("compatible")<0&&w.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},sub:function(){function a(b,c){return new a.fn.init(b,c)}h.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function(c,d){return d&&d instanceof h&&!(d instanceof a)&&(d=a(d)),h.fn.init.call(this,c,d,b)},a.fn.init.prototype=a.fn;var b=a(H);return a},browser:{}}),h.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){J["[object "+b+"]"]=b.toLowerCase()}),e=h.uaMatch(A),e.browser&&(h.browser[e.browser]=!0,h.browser.version=e.version),h.browser.webkit&&(h.browser.safari=!0),l.test(" ")&&(m=/^[\s\xA0]+/,n=/[\s\xA0]+$/),d=h(H),H.addEventListener?g=function(){H.removeEventListener("DOMContentLoaded",g,!1),h.ready()}:H.attachEvent&&(g=function(){"complete"===H.readyState&&(H.detachEvent("onreadystatechange",g),h.ready())}),h}(),L={};K.Callbacks=function(a){a=a?L[a]||c(a):{};var d,e,f,g,h,i=[],j=[],k=function(b){var c,d,e,f;for(c=0,d=b.length;d>c;c++)e=b[c],f=K.type(e),"array"===f?k(e):"function"===f&&(a.unique&&m.has(e)||i.push(e))},l=function(b,c){for(c=c||[],d=!a.memory||[b,c],e=!0,h=f||0,f=0,g=i.length;i&&g>h;h++)if(i[h].apply(b,c)===!1&&a.stopOnFalse){d=!0;break}e=!1,i&&(a.once?d===!0?m.disable():i=[]:j&&j.length&&(d=j.shift(),m.fireWith(d[0],d[1])))},m={add:function(){if(i){var a=i.length;k(arguments),e?g=i.length:d&&d!==!0&&(f=a,l(d[0],d[1]))}return this},remove:function(){if(i)for(var b=arguments,c=0,d=b.length;d>c;c++)for(var f=0;f<i.length&&(b[c]!==i[f]||(e&&g>=f&&(g--,h>=f&&h--),i.splice(f--,1),!a.unique));f++);return this},has:function(a){if(i)for(var b=0,c=i.length;c>b;b++)if(a===i[b])return!0;return!1},empty:function(){return i=[],this},disable:function(){return i=j=d=b,this},disabled:function(){return!i},lock:function(){return j=b,d&&d!==!0||m.disable(),this},locked:function(){return!j},fireWith:function(b,c){return j&&(e?a.once||j.push([b,c]):a.once&&d||l(b,c)),this},fire:function(){return m.fireWith(this,arguments),this},fired:function(){return!!d}};return m};var M=[].slice;K.extend({Deferred:function(a){var b,c=K.Callbacks("once memory"),d=K.Callbacks("once memory"),e=K.Callbacks("memory"),f="pending",g={resolve:c,reject:d,notify:e},h={done:c.add,fail:d.add,progress:e.add,state:function(){return f},isResolved:c.fired,isRejected:d.fired,then:function(a,b,c){return i.done(a).fail(b).progress(c),this},always:function(){return i.done.apply(i,arguments).fail.apply(i,arguments),this},pipe:function(a,b,c){return K.Deferred(function(d){K.each({done:[a,"resolve"],fail:[b,"reject"],progress:[c,"notify"]},function(a,b){var c,e=b[0],f=b[1];K.isFunction(e)?i[a](function(){c=e.apply(this,arguments),c&&K.isFunction(c.promise)?c.promise().then(d.resolve,d.reject,d.notify):d[f+"With"](this===i?d:this,[c])}):i[a](d[f])})}).promise()},promise:function(a){if(null==a)a=h;else for(var b in h)a[b]=h[b];return a}},i=h.promise({});for(b in g)i[b]=g[b].fire,i[b+"With"]=g[b].fireWith;return i.done(function(){f="resolved"},d.disable,e.lock).fail(function(){f="rejected"},c.disable,e.lock),a&&a.call(i,i),i},when:function(a){function b(a){return function(b){d[a]=arguments.length>1?M.call(arguments,0):b,--h||i.resolveWith(i,d)}}function c(a){return function(b){g[a]=arguments.length>1?M.call(arguments,0):b,i.notifyWith(j,g)}}var d=M.call(arguments,0),e=0,f=d.length,g=new Array(f),h=f,i=1>=f&&a&&K.isFunction(a.promise)?a:K.Deferred(),j=i.promise();if(f>1){for(;f>e;e++)d[e]&&d[e].promise&&K.isFunction(d[e].promise)?d[e].promise().then(b(e),i.reject,c(e)):--h;h||i.resolveWith(i,d)}else i!==a&&i.resolveWith(i,f?[a]:[]);return j}}),K.support=function(){var b,c,d,e,f,g,h,i,j,k,l,m,n=H.createElement("div");if(H.documentElement,n.setAttribute("className","t"),n.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",c=n.getElementsByTagName("*"),d=n.getElementsByTagName("a")[0],!c||!c.length||!d)return{};e=H.createElement("select"),f=e.appendChild(H.createElement("option")),g=n.getElementsByTagName("input")[0],b={leadingWhitespace:3===n.firstChild.nodeType,tbody:!n.getElementsByTagName("tbody").length,htmlSerialize:!!n.getElementsByTagName("link").length,style:/top/.test(d.getAttribute("style")),hrefNormalized:"/a"===d.getAttribute("href"),opacity:/^0.55/.test(d.style.opacity),cssFloat:!!d.style.cssFloat,checkOn:"on"===g.value,optSelected:f.selected,getSetAttribute:"t"!==n.className,enctype:!!H.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==H.createElement("nav").cloneNode(!0).outerHTML,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0},g.checked=!0,b.noCloneChecked=g.cloneNode(!0).checked,e.disabled=!0,b.optDisabled=!f.disabled;try{delete n.test}catch(o){b.deleteExpando=!1}if(!n.addEventListener&&n.attachEvent&&n.fireEvent&&(n.attachEvent("onclick",function(){b.noCloneEvent=!1}),n.cloneNode(!0).fireEvent("onclick")),g=H.createElement("input"),g.value="t",g.setAttribute("type","radio"),b.radioValue="t"===g.value,g.setAttribute("checked","checked"),n.appendChild(g),i=H.createDocumentFragment(),i.appendChild(n.lastChild),b.checkClone=i.cloneNode(!0).cloneNode(!0).lastChild.checked,b.appendChecked=g.checked,i.removeChild(g),i.appendChild(n),n.innerHTML="",a.getComputedStyle&&(h=H.createElement("div"),h.style.width="0",h.style.marginRight="0",n.style.width="2px",n.appendChild(h),b.reliableMarginRight=0===(parseInt((a.getComputedStyle(h,null)||{marginRight:0}).marginRight,10)||0)),n.attachEvent)for(l in{submit:1,change:1,focusin:1})k="on"+l,m=k in n,m||(n.setAttribute(k,"return;"),m="function"==typeof n[k]),b[l+"Bubbles"]=m;return i.removeChild(n),i=e=f=h=n=g=null,K(function(){var a,c,d,e,f,g,h,i,k,l,o=H.getElementsByTagName("body")[0];o&&(g=1,h="position:absolute;top:0;left:0;width:1px;height:1px;margin:0;",i="visibility:hidden;border:0;",k="style='"+h+"border:5px solid #000;padding:0;'",l="<div "+k+"><div></div></div>"+"<table "+k+" cellpadding='0' cellspacing='0'>"+"<tr><td></td></tr></table>",a=H.createElement("div"),a.style.cssText=i+"width:0;height:0;position:static;top:0;margin-top:"+g+"px",o.insertBefore(a,o.firstChild),n=H.createElement("div"),a.appendChild(n),n.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>",j=n.getElementsByTagName("td"),m=0===j[0].offsetHeight,j[0].style.display="",j[1].style.display="none",b.reliableHiddenOffsets=m&&0===j[0].offsetHeight,n.innerHTML="",n.style.width=n.style.paddingLeft="1px",K.boxModel=b.boxModel=2===n.offsetWidth,"undefined"!=typeof n.style.zoom&&(n.style.display="inline",n.style.zoom=1,b.inlineBlockNeedsLayout=2===n.offsetWidth,n.style.display="",n.innerHTML="<div style='width:4px;'></div>",b.shrinkWrapBlocks=2!==n.offsetWidth),n.style.cssText=h+i,n.innerHTML=l,c=n.firstChild,d=c.firstChild,e=c.nextSibling.firstChild.firstChild,f={doesNotAddBorder:5!==d.offsetTop,doesAddBorderForTableAndCells:5===e.offsetTop},d.style.position="fixed",d.style.top="20px",f.fixedPosition=20===d.offsetTop||15===d.offsetTop,d.style.position=d.style.top="",c.style.overflow="hidden",c.style.position="relative",f.subtractsBorderForOverflowNotVisible=-5===d.offsetTop,f.doesNotIncludeMarginInBodyOffset=o.offsetTop!==g,o.removeChild(a),n=a=null,K.extend(b,f))}),b}();var N=/^(?:\{.*\}|\[.*\])$/,O=/([A-Z])/g;K.extend({cache:{},uuid:0,expando:"jQuery"+(K.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){return a=a.nodeType?K.cache[a[K.expando]]:a[K.expando],!!a&&!e(a)},data:function(a,c,d,e){if(K.acceptData(a)){var f,g,h,i=K.expando,j="string"==typeof c,k=a.nodeType,l=k?K.cache:a,m=k?a[i]:a[i]&&i,n="events"===c;if(m&&l[m]&&(n||e||l[m].data)||!j||d!==b)return m||(k?a[i]=m=++K.uuid:m=i),l[m]||(l[m]={},k||(l[m].toJSON=K.noop)),("object"==typeof c||"function"==typeof c)&&(e?l[m]=K.extend(l[m],c):l[m].data=K.extend(l[m].data,c)),f=g=l[m],e||(g.data||(g.data={}),g=g.data),d!==b&&(g[K.camelCase(c)]=d),n&&!g[c]?f.events:(j?(h=g[c],null==h&&(h=g[K.camelCase(c)])):h=g,h)}},removeData:function(a,b,c){if(K.acceptData(a)){var d,f,g,h=K.expando,i=a.nodeType,j=i?K.cache:a,k=i?a[h]:h;if(j[k]){if(b&&(d=c?j[k]:j[k].data)){K.isArray(b)||(b in d?b=[b]:(b=K.camelCase(b),b=b in d?[b]:b.split(" ")));for(f=0,g=b.length;g>f;f++)delete d[b[f]];if(!(c?e:K.isEmptyObject)(d))return}(c||(delete j[k].data,e(j[k])))&&(K.support.deleteExpando||!j.setInterval?delete j[k]:j[k]=null,i&&(K.support.deleteExpando?delete a[h]:a.removeAttribute?a.removeAttribute(h):a[h]=null))}}},_data:function(a,b,c){return K.data(a,b,c,!0)},acceptData:function(a){if(a.nodeName){var b=K.noData[a.nodeName.toLowerCase()];if(b)return!(b===!0||a.getAttribute("classid")!==b)}return!0}}),K.fn.extend({data:function(a,c){var e,f,g,h=null;if("undefined"==typeof a){if(this.length&&(h=K.data(this[0]),1===this[0].nodeType&&!K._data(this[0],"parsedAttrs"))){f=this[0].attributes;for(var i=0,j=f.length;j>i;i++)g=f[i].name,0===g.indexOf("data-")&&(g=K.camelCase(g.substring(5)),d(this[0],g,h[g]));K._data(this[0],"parsedAttrs",!0)}return h}return"object"==typeof a?this.each(function(){K.data(this,a)}):(e=a.split("."),e[1]=e[1]?"."+e[1]:"",c===b?(h=this.triggerHandler("getData"+e[1]+"!",[e[0]]),h===b&&this.length&&(h=K.data(this[0],a),h=d(this[0],a,h)),h===b&&e[1]?this.data(e[0]):h):this.each(function(){var b=K(this),d=[e[0],c];b.triggerHandler("setData"+e[1]+"!",d),K.data(this,a,c),b.triggerHandler("changeData"+e[1]+"!",d)}))},removeData:function(a){return this.each(function(){K.removeData(this,a)})}}),K.extend({_mark:function(a,b){a&&(b=(b||"fx")+"mark",K._data(a,b,(K._data(a,b)||0)+1))},_unmark:function(a,b,c){if(a!==!0&&(c=b,b=a,a=!1),b){c=c||"fx";var d=c+"mark",e=a?0:(K._data(b,d)||1)-1;e?K._data(b,d,e):(K.removeData(b,d,!0),f(b,c,"mark"))}},queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=K._data(a,b),c&&(!d||K.isArray(c)?d=K._data(a,b,K.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=K.queue(a,b),d=c.shift(),e={};"inprogress"===d&&(d=c.shift()),d&&("fx"===b&&c.unshift("inprogress"),K._data(a,b+".run",e),d.call(a,function(){K.dequeue(a,b)},e)),c.length||(K.removeData(a,b+"queue "+b+".run",!0),f(a,b,"queue"))}}),K.fn.extend({queue:function(a,c){return"string"!=typeof a&&(c=a,a="fx"),c===b?K.queue(this[0],a):this.each(function(){var b=K.queue(this,a,c);"fx"===a&&"inprogress"!==b[0]&&K.dequeue(this,a)})},dequeue:function(a){return this.each(function(){K.dequeue(this,a)})},delay:function(a,b){return a=K.fx?K.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){function d(){--i||f.resolveWith(g,[g])}"string"!=typeof a&&(c=a,a=b),a=a||"fx";for(var e,f=K.Deferred(),g=this,h=g.length,i=1,j=a+"defer",k=a+"queue",l=a+"mark";h--;)(e=K.data(g[h],j,b,!0)||(K.data(g[h],k,b,!0)||K.data(g[h],l,b,!0))&&K.data(g[h],j,K.Callbacks("once memory"),!0))&&(i++,e.add(d));return d(),f.promise()}});var P,Q,R,S=/[\n\t\r]/g,T=/\s+/,U=/\r/g,V=/^(?:button|input)$/i,W=/^(?:button|input|object|select|textarea)$/i,X=/^a(?:rea)?$/i,Y=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,Z=K.support.getSetAttribute;K.fn.extend({attr:function(a,b){return K.access(this,a,b,!0,K.attr)},removeAttr:function(a){return this.each(function(){K.removeAttr(this,a)})},prop:function(a,b){return K.access(this,a,b,!0,K.prop)},removeProp:function(a){return a=K.propFix[a]||a,this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,f,g,h;if(K.isFunction(a))return this.each(function(b){K(this).addClass(a.call(this,b,this.className))});if(a&&"string"==typeof a)for(b=a.split(T),c=0,d=this.length;d>c;c++)if(e=this[c],1===e.nodeType)if(e.className||1!==b.length){for(f=" "+e.className+" ",g=0,h=b.length;h>g;g++)~f.indexOf(" "+b[g]+" ")||(f+=b[g]+" ");e.className=K.trim(f)}else e.className=a;return this},removeClass:function(a){var c,d,e,f,g,h,i;if(K.isFunction(a))return this.each(function(b){K(this).removeClass(a.call(this,b,this.className))});if(a&&"string"==typeof a||a===b)for(c=(a||"").split(T),d=0,e=this.length;e>d;d++)if(f=this[d],1===f.nodeType&&f.className)if(a){for(g=(" "+f.className+" ").replace(S," "),h=0,i=c.length;i>h;h++)g=g.replace(" "+c[h]+" "," ");f.className=K.trim(g)}else f.className="";return this},toggleClass:function(a,b){var c=typeof a,d="boolean"==typeof b;return K.isFunction(a)?this.each(function(c){K(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if("string"===c)for(var e,f=0,g=K(this),h=b,i=a.split(T);e=i[f++];)h=d?h:!g.hasClass(e),g[h?"addClass":"removeClass"](e);else("undefined"===c||"boolean"===c)&&(this.className&&K._data(this,"__className__",this.className),this.className=this.className||a===!1?"":K._data(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(S," ").indexOf(b)>-1)return!0;return!1},val:function(a){var c,d,e,f=this[0];{if(arguments.length)return e=K.isFunction(a),this.each(function(d){var f,g=K(this);1===this.nodeType&&(f=e?a.call(this,d,g.val()):a,null==f?f="":"number"==typeof f?f+="":K.isArray(f)&&(f=K.map(f,function(a){return null==a?"":a+""})),c=K.valHooks[this.nodeName.toLowerCase()]||K.valHooks[this.type],c&&"set"in c&&c.set(this,f,"value")!==b||(this.value=f))});if(f)return c=K.valHooks[f.nodeName.toLowerCase()]||K.valHooks[f.type],c&&"get"in c&&(d=c.get(f,"value"))!==b?d:(d=f.value,"string"==typeof d?d.replace(U,""):null==d?"":d)}}}),K.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,c,d,e,f=a.selectedIndex,g=[],h=a.options,i="select-one"===a.type;if(0>f)return null;for(c=i?f:0,d=i?f+1:h.length;d>c;c++)if(e=h[c],!(!e.selected||(K.support.optDisabled?e.disabled:null!==e.getAttribute("disabled"))||e.parentNode.disabled&&K.nodeName(e.parentNode,"optgroup"))){if(b=K(e).val(),i)return b;g.push(b)}return i&&!g.length&&h.length?K(h[f]).val():g},set:function(a,b){var c=K.makeArray(b);return K(a).find("option").each(function(){this.selected=K.inArray(K(this).val(),c)>=0}),c.length||(a.selectedIndex=-1),c}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(a,c,d,e){var f,g,h,i=a.nodeType;if(a&&3!==i&&8!==i&&2!==i)return e&&c in K.attrFn?K(a)[c](d):"undefined"==typeof a.getAttribute?K.prop(a,c,d):(h=1!==i||!K.isXMLDoc(a),h&&(c=c.toLowerCase(),g=K.attrHooks[c]||(Y.test(c)?Q:P)),d!==b?null===d?(K.removeAttr(a,c),void 0):g&&"set"in g&&h&&(f=g.set(a,d,c))!==b?f:(a.setAttribute(c,""+d),d):g&&"get"in g&&h&&null!==(f=g.get(a,c))?f:(f=a.getAttribute(c),null===f?b:f))},removeAttr:function(a,b){var c,d,e,f,g=0;if(b&&1===a.nodeType)for(d=b.toLowerCase().split(T),f=d.length;f>g;g++)e=d[g],e&&(c=K.propFix[e]||e,K.attr(a,e,""),a.removeAttribute(Z?e:c),Y.test(e)&&c in a&&(a[c]=!1))},attrHooks:{type:{set:function(a,b){if(V.test(a.nodeName)&&a.parentNode)K.error("type property can't be changed");else if(!K.support.radioValue&&"radio"===b&&K.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}},value:{get:function(a,b){return P&&K.nodeName(a,"button")?P.get(a,b):b in a?a.value:null},set:function(a,b,c){return P&&K.nodeName(a,"button")?P.set(a,b,c):(a.value=b,void 0)}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,f,g,h=a.nodeType;if(a&&3!==h&&8!==h&&2!==h)return g=1!==h||!K.isXMLDoc(a),g&&(c=K.propFix[c]||c,f=K.propHooks[c]),d!==b?f&&"set"in f&&(e=f.set(a,d,c))!==b?e:a[c]=d:f&&"get"in f&&null!==(e=f.get(a,c))?e:a[c]},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):W.test(a.nodeName)||X.test(a.nodeName)&&a.href?0:b}}}}),K.attrHooks.tabindex=K.propHooks.tabIndex,Q={get:function(a,c){var d,e=K.prop(a,c);return e===!0||"boolean"!=typeof e&&(d=a.getAttributeNode(c))&&d.nodeValue!==!1?c.toLowerCase():b},set:function(a,b,c){var d;return b===!1?K.removeAttr(a,c):(d=K.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase())),c}},Z||(R={name:!0,id:!0},P=K.valHooks.button={get:function(a,c){var d;return d=a.getAttributeNode(c),d&&(R[c]?""!==d.nodeValue:d.specified)?d.nodeValue:b},set:function(a,b,c){var d=a.getAttributeNode(c);return d||(d=H.createAttribute(c),a.setAttributeNode(d)),d.nodeValue=b+""}},K.attrHooks.tabindex.set=P.set,K.each(["width","height"],function(a,b){K.attrHooks[b]=K.extend(K.attrHooks[b],{set:function(a,c){return""===c?(a.setAttribute(b,"auto"),c):void 0}})}),K.attrHooks.contenteditable={get:P.get,set:function(a,b,c){""===b&&(b="false"),P.set(a,b,c)}}),K.support.hrefNormalized||K.each(["href","src","width","height"],function(a,c){K.attrHooks[c]=K.extend(K.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return null===d?b:d}})}),K.support.style||(K.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=""+b}}),K.support.optSelected||(K.propHooks.selected=K.extend(K.propHooks.selected,{get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}})),K.support.enctype||(K.propFix.enctype="encoding"),K.support.checkOn||K.each(["radio","checkbox"],function(){K.valHooks[this]={get:function(a){return null===a.getAttribute("value")?"on":a.value}}}),K.each(["radio","checkbox"],function(){K.valHooks[this]=K.extend(K.valHooks[this],{set:function(a,b){return K.isArray(b)?a.checked=K.inArray(K(a).val(),b)>=0:void 0}})});var _=/^(?:textarea|input|select)$/i,ab=/^([^\.]*)?(?:\.(.+))?$/,bb=/\bhover(\.\S+)?\b/,cb=/^key/,db=/^(?:mouse|contextmenu)|click/,eb=/^(?:focusinfocus|focusoutblur)$/,fb=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,gb=function(a){var b=fb.exec(a);return b&&(b[1]=(b[1]||"").toLowerCase(),b[3]=b[3]&&new RegExp("(?:^|\\s)"+b[3]+"(?:\\s|$)")),b},hb=function(a,b){var c=a.attributes||{};return!(b[1]&&a.nodeName.toLowerCase()!==b[1]||b[2]&&(c.id||{}).value!==b[2]||b[3]&&!b[3].test((c["class"]||{}).value))
},ib=function(a){return K.event.special.hover?a:a.replace(bb,"mouseenter$1 mouseleave$1")};K.event={add:function(a,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q;if(3!==a.nodeType&&8!==a.nodeType&&c&&d&&(g=K._data(a))){for(d.handler&&(o=d,d=o.handler),d.guid||(d.guid=K.guid++),i=g.events,i||(g.events=i={}),h=g.handle,h||(g.handle=h=function(a){return"undefined"==typeof K||a&&K.event.triggered===a.type?b:K.event.dispatch.apply(h.elem,arguments)},h.elem=a),c=K.trim(ib(c)).split(" "),j=0;j<c.length;j++)k=ab.exec(c[j])||[],l=k[1],m=(k[2]||"").split(".").sort(),q=K.event.special[l]||{},l=(f?q.delegateType:q.bindType)||l,q=K.event.special[l]||{},n=K.extend({type:l,origType:k[1],data:e,handler:d,guid:d.guid,selector:f,quick:gb(f),namespace:m.join(".")},o),p=i[l],p||(p=i[l]=[],p.delegateCount=0,q.setup&&q.setup.call(a,e,m,h)!==!1||(a.addEventListener?a.addEventListener(l,h,!1):a.attachEvent&&a.attachEvent("on"+l,h))),q.add&&(q.add.call(a,n),n.handler.guid||(n.handler.guid=d.guid)),f?p.splice(p.delegateCount++,0,n):p.push(n),K.event.global[l]=!0;a=null}},global:{},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q,r=K.hasData(a)&&K._data(a);if(r&&(m=r.events)){for(b=K.trim(ib(b||"")).split(" "),f=0;f<b.length;f++)if(g=ab.exec(b[f])||[],h=i=g[1],j=g[2],h){for(n=K.event.special[h]||{},h=(d?n.delegateType:n.bindType)||h,p=m[h]||[],k=p.length,j=j?new RegExp("(^|\\.)"+j.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null,l=0;l<p.length;l++)q=p[l],!e&&i!==q.origType||c&&c.guid!==q.guid||j&&!j.test(q.namespace)||d&&d!==q.selector&&("**"!==d||!q.selector)||(p.splice(l--,1),q.selector&&p.delegateCount--,n.remove&&n.remove.call(a,q));0===p.length&&k!==p.length&&(n.teardown&&n.teardown.call(a,j)!==!1||K.removeEvent(a,h,r.handle),delete m[h])}else for(h in m)K.event.remove(a,h+b[f],c,d,!0);K.isEmptyObject(m)&&(o=r.handle,o&&(o.elem=null),K.removeData(a,["events","handle"],!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,e,f){if(!e||3!==e.nodeType&&8!==e.nodeType){var g,h,i,j,k,l,m,n,o,p,q=c.type||c,r=[];if(!eb.test(q+K.event.triggered)&&(q.indexOf("!")>=0&&(q=q.slice(0,-1),h=!0),q.indexOf(".")>=0&&(r=q.split("."),q=r.shift(),r.sort()),e&&!K.event.customEvent[q]||K.event.global[q]))if(c="object"==typeof c?c[K.expando]?c:new K.Event(q,c):new K.Event(q),c.type=q,c.isTrigger=!0,c.exclusive=h,c.namespace=r.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+r.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,l=q.indexOf(":")<0?"on"+q:"",e){if(c.result=b,c.target||(c.target=e),d=null!=d?K.makeArray(d):[],d.unshift(c),m=K.event.special[q]||{},!m.trigger||m.trigger.apply(e,d)!==!1){if(o=[[e,m.bindType||q]],!f&&!m.noBubble&&!K.isWindow(e)){for(p=m.delegateType||q,j=eb.test(p+q)?e:e.parentNode,k=null;j;j=j.parentNode)o.push([j,p]),k=j;k&&k===e.ownerDocument&&o.push([k.defaultView||k.parentWindow||a,p])}for(i=0;i<o.length&&!c.isPropagationStopped();i++)j=o[i][0],c.type=o[i][1],n=(K._data(j,"events")||{})[c.type]&&K._data(j,"handle"),n&&n.apply(j,d),n=l&&j[l],n&&K.acceptData(j)&&n.apply(j,d)===!1&&c.preventDefault();return c.type=q,f||c.isDefaultPrevented()||m._default&&m._default.apply(e.ownerDocument,d)!==!1||"click"===q&&K.nodeName(e,"a")||!K.acceptData(e)||l&&e[q]&&("focus"!==q&&"blur"!==q||0!==c.target.offsetWidth)&&!K.isWindow(e)&&(k=e[l],k&&(e[l]=null),K.event.triggered=q,e[q](),K.event.triggered=b,k&&(e[l]=k)),c.result}}else{g=K.cache;for(i in g)g[i].events&&g[i].events[q]&&K.event.trigger(c,d,g[i].handle.elem,!0)}}},dispatch:function(c){c=K.event.fix(c||a.event);var d,e,f,g,h,i,j,k,l,m,n=(K._data(this,"events")||{})[c.type]||[],o=n.delegateCount,p=[].slice.call(arguments,0),q=!c.exclusive&&!c.namespace,r=[];if(p[0]=c,c.delegateTarget=this,o&&!c.target.disabled&&(!c.button||"click"!==c.type))for(g=K(this),g.context=this.ownerDocument||this,f=c.target;f!=this;f=f.parentNode||this){for(i={},k=[],g[0]=f,d=0;o>d;d++)l=n[d],m=l.selector,i[m]===b&&(i[m]=l.quick?hb(f,l.quick):g.is(m)),i[m]&&k.push(l);k.length&&r.push({elem:f,matches:k})}for(n.length>o&&r.push({elem:this,matches:n.slice(o)}),d=0;d<r.length&&!c.isPropagationStopped();d++)for(j=r[d],c.currentTarget=j.elem,e=0;e<j.matches.length&&!c.isImmediatePropagationStopped();e++)l=j.matches[e],(q||!c.namespace&&!l.namespace||c.namespace_re&&c.namespace_re.test(l.namespace))&&(c.data=l.data,c.handleObj=l,h=((K.event.special[l.origType]||{}).handle||l.handler).apply(j.elem,p),h!==b&&(c.result=h,h===!1&&(c.preventDefault(),c.stopPropagation())));return c.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,c){var d,e,f,g=c.button,h=c.fromElement;return null==a.pageX&&null!=c.clientX&&(d=a.target.ownerDocument||H,e=d.documentElement,f=d.body,a.pageX=c.clientX+(e&&e.scrollLeft||f&&f.scrollLeft||0)-(e&&e.clientLeft||f&&f.clientLeft||0),a.pageY=c.clientY+(e&&e.scrollTop||f&&f.scrollTop||0)-(e&&e.clientTop||f&&f.clientTop||0)),!a.relatedTarget&&h&&(a.relatedTarget=h===a.target?c.toElement:h),a.which||g===b||(a.which=1&g?1:2&g?3:4&g?2:0),a}},fix:function(a){if(a[K.expando])return a;var c,d,e=a,f=K.event.fixHooks[a.type]||{},g=f.props?this.props.concat(f.props):this.props;for(a=K.Event(e),c=g.length;c;)d=g[--c],a[d]=e[d];return a.target||(a.target=e.srcElement||H),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey===b&&(a.metaKey=a.ctrlKey),f.filter?f.filter(a,e):a},special:{ready:{setup:K.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){K.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,d){var e=K.extend(new K.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?K.event.trigger(e,null,b):K.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},K.event.handle=K.event.dispatch,K.removeEvent=H.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)},K.Event=function(a,b){return this instanceof K.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?h:g):this.type=a,b&&K.extend(this,b),this.timeStamp=a&&a.timeStamp||K.now(),this[K.expando]=!0,void 0):new K.Event(a,b)},K.Event.prototype={preventDefault:function(){this.isDefaultPrevented=h;var a=this.originalEvent;a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=h;var a=this.originalEvent;a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=h,this.stopPropagation()},isDefaultPrevented:g,isPropagationStopped:g,isImmediatePropagationStopped:g},K.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){K.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return f.selector,(!e||e!==d&&!K.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),K.support.submitBubbles||(K.event.special.submit={setup:function(){return K.nodeName(this,"form")?!1:(K.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=K.nodeName(c,"input")||K.nodeName(c,"button")?c.form:b;d&&!d._submit_attached&&(K.event.add(d,"submit._submit",function(a){this.parentNode&&!a.isTrigger&&K.event.simulate("submit",this.parentNode,a,!0)}),d._submit_attached=!0)}),void 0)},teardown:function(){return K.nodeName(this,"form")?!1:(K.event.remove(this,"._submit"),void 0)}}),K.support.changeBubbles||(K.event.special.change={setup:function(){return _.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(K.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),K.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1,K.event.simulate("change",this,a,!0))})),!1):(K.event.add(this,"beforeactivate._change",function(a){var b=a.target;_.test(b.nodeName)&&!b._change_attached&&(K.event.add(b,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||K.event.simulate("change",this.parentNode,a,!0)}),b._change_attached=!0)}),void 0)},handle:function(a){var b=a.target;return this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type?a.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return K.event.remove(this,"._change"),_.test(this.nodeName)}}),K.support.focusinBubbles||K.each({focus:"focusin",blur:"focusout"},function(a,b){var c=0,d=function(a){K.event.simulate(b,a.target,K.event.fix(a),!0)};K.event.special[b]={setup:function(){0===c++&&H.addEventListener(a,d,!0)},teardown:function(){0===--c&&H.removeEventListener(a,d,!0)}}}),K.fn.extend({on:function(a,c,d,e,f){var h,i;if("object"==typeof a){"string"!=typeof c&&(d=c,c=b);for(i in a)this.on(i,c,d,a[i],f);return this}if(null==d&&null==e?(e=c,d=c=b):null==e&&("string"==typeof c?(e=d,d=b):(e=d,d=c,c=b)),e===!1)e=g;else if(!e)return this;return 1===f&&(h=e,e=function(a){return K().off(a),h.apply(this,arguments)},e.guid=h.guid||(h.guid=K.guid++)),this.each(function(){K.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on.call(this,a,b,c,d,1)},off:function(a,c,d){if(a&&a.preventDefault&&a.handleObj){var e=a.handleObj;return K(a.delegateTarget).off(e.namespace?e.type+"."+e.namespace:e.type,e.selector,e.handler),this}if("object"==typeof a){for(var f in a)this.off(f,c,a[f]);return this}return(c===!1||"function"==typeof c)&&(d=c,c=b),d===!1&&(d=g),this.each(function(){K.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){return K(this.context).on(a,this.selector,b,c),this},die:function(a,b){return K(this.context).off(a,this.selector||"**",b),this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1==arguments.length?this.off(a,"**"):this.off(b,a,c)},trigger:function(a,b){return this.each(function(){K.event.trigger(a,b,this)})},triggerHandler:function(a,b){return this[0]?K.event.trigger(a,b,this[0],!0):void 0},toggle:function(a){var b=arguments,c=a.guid||K.guid++,d=0,e=function(c){var e=(K._data(this,"lastToggle"+a.guid)||0)%d;return K._data(this,"lastToggle"+a.guid,e+1),c.preventDefault(),b[e].apply(this,arguments)||!1};for(e.guid=c;d<b.length;)b[d++].guid=c;return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),K.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){K.fn[b]=function(a,c){return null==c&&(c=a,a=null),arguments.length>0?this.on(b,null,a,c):this.trigger(b)},K.attrFn&&(K.attrFn[b]=!0),cb.test(b)&&(K.event.fixHooks[b]=K.event.keyHooks),db.test(b)&&(K.event.fixHooks[b]=K.event.mouseHooks)}),function(){function a(a,b,c,d,f,g){for(var h=0,i=d.length;i>h;h++){var j=d[h];if(j){var k=!1;for(j=j[a];j;){if(j[e]===c){k=d[j.sizset];break}if(1!==j.nodeType||g||(j[e]=c,j.sizset=h),j.nodeName.toLowerCase()===b){k=j;break}j=j[a]}d[h]=k}}}function c(a,b,c,d,f,g){for(var h=0,i=d.length;i>h;h++){var j=d[h];if(j){var k=!1;for(j=j[a];j;){if(j[e]===c){k=d[j.sizset];break}if(1===j.nodeType)if(g||(j[e]=c,j.sizset=h),"string"!=typeof b){if(j===b){k=!0;break}}else if(m.filter(b,[j]).length>0){k=j;break}j=j[a]}d[h]=k}}}var d=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,e="sizcache"+(Math.random()+"").replace(".",""),f=0,g=Object.prototype.toString,h=!1,i=!0,j=/\\/g,k=/\r\n/g,l=/\W/;[0,0].sort(function(){return i=!1,0});var m=function(a,b,c,e){c=c||[],b=b||H;var f=b;if(1!==b.nodeType&&9!==b.nodeType)return[];if(!a||"string"!=typeof a)return c;var h,i,j,k,l,n,q,r,t=!0,u=m.isXML(b),v=[],x=a;do if(d.exec(""),h=d.exec(x),h&&(x=h[3],v.push(h[1]),h[2])){k=h[3];break}while(h);if(v.length>1&&p.exec(a))if(2===v.length&&o.relative[v[0]])i=w(v[0]+v[1],b,e);else for(i=o.relative[v[0]]?[b]:m(v.shift(),b);v.length;)a=v.shift(),o.relative[a]&&(a+=v.shift()),i=w(a,i,e);else if(!e&&v.length>1&&9===b.nodeType&&!u&&o.match.ID.test(v[0])&&!o.match.ID.test(v[v.length-1])&&(l=m.find(v.shift(),b,u),b=l.expr?m.filter(l.expr,l.set)[0]:l.set[0]),b)for(l=e?{expr:v.pop(),set:s(e)}:m.find(v.pop(),1!==v.length||"~"!==v[0]&&"+"!==v[0]||!b.parentNode?b:b.parentNode,u),i=l.expr?m.filter(l.expr,l.set):l.set,v.length>0?j=s(i):t=!1;v.length;)n=v.pop(),q=n,o.relative[n]?q=v.pop():n="",null==q&&(q=b),o.relative[n](j,q,u);else j=v=[];if(j||(j=i),j||m.error(n||a),"[object Array]"===g.call(j))if(t)if(b&&1===b.nodeType)for(r=0;null!=j[r];r++)j[r]&&(j[r]===!0||1===j[r].nodeType&&m.contains(b,j[r]))&&c.push(i[r]);else for(r=0;null!=j[r];r++)j[r]&&1===j[r].nodeType&&c.push(i[r]);else c.push.apply(c,j);else s(j,c);return k&&(m(k,f,c,e),m.uniqueSort(c)),c};m.uniqueSort=function(a){if(u&&(h=i,a.sort(u),h))for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1);return a},m.matches=function(a,b){return m(a,null,null,b)},m.matchesSelector=function(a,b){return m(b,null,null,[a]).length>0},m.find=function(a,b,c){var d,e,f,g,h,i;if(!a)return[];for(e=0,f=o.order.length;f>e;e++)if(h=o.order[e],(g=o.leftMatch[h].exec(a))&&(i=g[1],g.splice(1,1),"\\"!==i.substr(i.length-1)&&(g[1]=(g[1]||"").replace(j,""),d=o.find[h](g,b,c),null!=d))){a=a.replace(o.match[h],"");break}return d||(d="undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName("*"):[]),{set:d,expr:a}},m.filter=function(a,c,d,e){for(var f,g,h,i,j,k,l,n,p,q=a,r=[],s=c,t=c&&c[0]&&m.isXML(c[0]);a&&c.length;){for(h in o.filter)if(null!=(f=o.leftMatch[h].exec(a))&&f[2]){if(k=o.filter[h],l=f[1],g=!1,f.splice(1,1),"\\"===l.substr(l.length-1))continue;if(s===r&&(r=[]),o.preFilter[h])if(f=o.preFilter[h](f,s,d,r,e,t)){if(f===!0)continue}else g=i=!0;if(f)for(n=0;null!=(j=s[n]);n++)j&&(i=k(j,f,n,s),p=e^i,d&&null!=i?p?g=!0:s[n]=!1:p&&(r.push(j),g=!0));if(i!==b){if(d||(s=r),a=a.replace(o.match[h],""),!g)return[];break}}if(a===q){if(null!=g)break;m.error(a)}q=a}return s},m.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)};var n=m.getText=function(a){var b,c,d=a.nodeType,e="";if(d){if(1===d||9===d){if("string"==typeof a.textContent)return a.textContent;if("string"==typeof a.innerText)return a.innerText.replace(k,"");for(a=a.firstChild;a;a=a.nextSibling)e+=n(a)}else if(3===d||4===d)return a.nodeValue}else for(b=0;c=a[b];b++)8!==c.nodeType&&(e+=n(c));return e},o=m.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c="string"==typeof b,d=c&&!l.test(b),e=c&&!d;d&&(b=b.toLowerCase());for(var f,g=0,h=a.length;h>g;g++)if(f=a[g]){for(;(f=f.previousSibling)&&1!==f.nodeType;);a[g]=e||f&&f.nodeName.toLowerCase()===b?f||!1:f===b}e&&m.filter(b,a,!0)},">":function(a,b){var c,d="string"==typeof b,e=0,f=a.length;if(d&&!l.test(b)){for(b=b.toLowerCase();f>e;e++)if(c=a[e]){var g=c.parentNode;a[e]=g.nodeName.toLowerCase()===b?g:!1}}else{for(;f>e;e++)c=a[e],c&&(a[e]=d?c.parentNode:c.parentNode===b);d&&m.filter(b,a,!0)}},"":function(b,d,e){var g,h=f++,i=c;"string"!=typeof d||l.test(d)||(d=d.toLowerCase(),g=d,i=a),i("parentNode",d,h,b,g,e)},"~":function(b,d,e){var g,h=f++,i=c;"string"!=typeof d||l.test(d)||(d=d.toLowerCase(),g=d,i=a),i("previousSibling",d,h,b,g,e)}},find:{ID:function(a,b,c){if("undefined"!=typeof b.getElementById&&!c){var d=b.getElementById(a[1]);return d&&d.parentNode?[d]:[]}},NAME:function(a,b){if("undefined"!=typeof b.getElementsByName){for(var c=[],d=b.getElementsByName(a[1]),e=0,f=d.length;f>e;e++)d[e].getAttribute("name")===a[1]&&c.push(d[e]);return 0===c.length?null:c}},TAG:function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a[1]):void 0}},preFilter:{CLASS:function(a,b,c,d,e,f){if(a=" "+a[1].replace(j,"")+" ",f)return a;for(var g,h=0;null!=(g=b[h]);h++)g&&(e^(g.className&&(" "+g.className+" ").replace(/[\t\n\r]/g," ").indexOf(a)>=0)?c||d.push(g):c&&(b[h]=!1));return!1},ID:function(a){return a[1].replace(j,"")},TAG:function(a){return a[1].replace(j,"").toLowerCase()},CHILD:function(a){if("nth"===a[1]){a[2]||m.error(a[0]),a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec("even"===a[2]&&"2n"||"odd"===a[2]&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0,a[3]=b[3]-0}else a[2]&&m.error(a[0]);return a[0]=f++,a},ATTR:function(a,b,c,d,e,f){var g=a[1]=a[1].replace(j,"");return!f&&o.attrMap[g]&&(a[1]=o.attrMap[g]),a[4]=(a[4]||a[5]||"").replace(j,""),"~="===a[2]&&(a[4]=" "+a[4]+" "),a},PSEUDO:function(a,b,c,e,f){if("not"===a[1]){if(!((d.exec(a[3])||"").length>1||/^\w/.test(a[3]))){var g=m.filter(a[3],b,c,!0^f);return c||e.push.apply(e,g),!1}a[3]=m(a[3],null,null,b)}else if(o.match.POS.test(a[0])||o.match.CHILD.test(a[0]))return!0;return a},POS:function(a){return a.unshift(!0),a}},filters:{enabled:function(a){return a.disabled===!1&&"hidden"!==a.type},disabled:function(a){return a.disabled===!0},checked:function(a){return a.checked===!0},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,c){return!!m(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),c=a.type;return"input"===a.nodeName.toLowerCase()&&"text"===c&&(b===c||null===b)},radio:function(a){return"input"===a.nodeName.toLowerCase()&&"radio"===a.type},checkbox:function(a){return"input"===a.nodeName.toLowerCase()&&"checkbox"===a.type},file:function(a){return"input"===a.nodeName.toLowerCase()&&"file"===a.type},password:function(a){return"input"===a.nodeName.toLowerCase()&&"password"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return("input"===b||"button"===b)&&"submit"===a.type},image:function(a){return"input"===a.nodeName.toLowerCase()&&"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return("input"===b||"button"===b)&&"reset"===a.type},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return 0===b},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return 0===b%2},odd:function(a,b){return 1===b%2},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=o.filters[e];if(f)return f(a,c,b,d);if("contains"===e)return(a.textContent||a.innerText||n([a])||"").indexOf(b[3])>=0;if("not"===e){for(var g=b[3],h=0,i=g.length;i>h;h++)if(g[h]===a)return!1;return!0}m.error(e)},CHILD:function(a,b){var c,d,f,g,h,i,j=b[1],k=a;switch(j){case"only":case"first":for(;k=k.previousSibling;)if(1===k.nodeType)return!1;if("first"===j)return!0;k=a;case"last":for(;k=k.nextSibling;)if(1===k.nodeType)return!1;return!0;case"nth":if(c=b[2],d=b[3],1===c&&0===d)return!0;if(f=b[0],g=a.parentNode,g&&(g[e]!==f||!a.nodeIndex)){for(h=0,k=g.firstChild;k;k=k.nextSibling)1===k.nodeType&&(k.nodeIndex=++h);g[e]=f}return i=a.nodeIndex-d,0===c?0===i:0===i%c&&i/c>=0}},ID:function(a,b){return 1===a.nodeType&&a.getAttribute("id")===b},TAG:function(a,b){return"*"===b&&1===a.nodeType||!!a.nodeName&&a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var c=b[1],d=m.attr?m.attr(a,c):o.attrHandle[c]?o.attrHandle[c](a):null!=a[c]?a[c]:a.getAttribute(c),e=d+"",f=b[2],g=b[4];return null==d?"!="===f:!f&&m.attr?null!=d:"="===f?e===g:"*="===f?e.indexOf(g)>=0:"~="===f?(" "+e+" ").indexOf(g)>=0:g?"!="===f?e!==g:"^="===f?0===e.indexOf(g):"$="===f?e.substr(e.length-g.length)===g:"|="===f?e===g||e.substr(0,g.length+1)===g+"-":!1:e&&d!==!1},POS:function(a,b,c,d){var e=b[2],f=o.setFilters[e];return f?f(a,c,b,d):void 0}}},p=o.match.POS,q=function(a,b){return"\\"+(b-0+1)};for(var r in o.match)o.match[r]=new RegExp(o.match[r].source+/(?![^\[]*\])(?![^\(]*\))/.source),o.leftMatch[r]=new RegExp(/(^(?:.|\r|\n)*?)/.source+o.match[r].source.replace(/\\(\d+)/g,q));var s=function(a,b){return a=Array.prototype.slice.call(a,0),b?(b.push.apply(b,a),b):a};try{Array.prototype.slice.call(H.documentElement.childNodes,0)[0].nodeType}catch(t){s=function(a,b){var c=0,d=b||[];if("[object Array]"===g.call(a))Array.prototype.push.apply(d,a);else if("number"==typeof a.length)for(var e=a.length;e>c;c++)d.push(a[c]);else for(;a[c];c++)d.push(a[c]);return d}}var u,v;H.documentElement.compareDocumentPosition?u=function(a,b){return a===b?(h=!0,0):a.compareDocumentPosition&&b.compareDocumentPosition?4&a.compareDocumentPosition(b)?-1:1:a.compareDocumentPosition?-1:1}:(u=function(a,b){if(a===b)return h=!0,0;if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],f=[],g=a.parentNode,i=b.parentNode,j=g;if(g===i)return v(a,b);if(!g)return-1;if(!i)return 1;for(;j;)e.unshift(j),j=j.parentNode;for(j=i;j;)f.unshift(j),j=j.parentNode;c=e.length,d=f.length;for(var k=0;c>k&&d>k;k++)if(e[k]!==f[k])return v(e[k],f[k]);return k===c?v(a,f[k],-1):v(e[k],b,1)},v=function(a,b,c){if(a===b)return c;for(var d=a.nextSibling;d;){if(d===b)return-1;d=d.nextSibling}return 1}),function(){var a=H.createElement("div"),c="script"+(new Date).getTime(),d=H.documentElement;a.innerHTML="<a name='"+c+"'/>",d.insertBefore(a,d.firstChild),H.getElementById(c)&&(o.find.ID=function(a,c,d){if("undefined"!=typeof c.getElementById&&!d){var e=c.getElementById(a[1]);return e?e.id===a[1]||"undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id").nodeValue===a[1]?[e]:b:[]}},o.filter.ID=function(a,b){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return 1===a.nodeType&&c&&c.nodeValue===b}),d.removeChild(a),d=a=null}(),function(){var a=H.createElement("div");a.appendChild(H.createComment("")),a.getElementsByTagName("*").length>0&&(o.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if("*"===a[1]){for(var d=[],e=0;c[e];e++)1===c[e].nodeType&&d.push(c[e]);c=d}return c}),a.innerHTML="<a href='#'></a>",a.firstChild&&"undefined"!=typeof a.firstChild.getAttribute&&"#"!==a.firstChild.getAttribute("href")&&(o.attrHandle.href=function(a){return a.getAttribute("href",2)}),a=null}(),H.querySelectorAll&&function(){var a=m,b=H.createElement("div"),c="__sizzle__";if(b.innerHTML="<p class='TEST'></p>",!b.querySelectorAll||0!==b.querySelectorAll(".TEST").length){m=function(b,d,e,f){if(d=d||H,!f&&!m.isXML(d)){var g=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(g&&(1===d.nodeType||9===d.nodeType)){if(g[1])return s(d.getElementsByTagName(b),e);if(g[2]&&o.find.CLASS&&d.getElementsByClassName)return s(d.getElementsByClassName(g[2]),e)}if(9===d.nodeType){if("body"===b&&d.body)return s([d.body],e);if(g&&g[3]){var h=d.getElementById(g[3]);if(!h||!h.parentNode)return s([],e);if(h.id===g[3])return s([h],e)}try{return s(d.querySelectorAll(b),e)}catch(i){}}else if(1===d.nodeType&&"object"!==d.nodeName.toLowerCase()){var j=d,k=d.getAttribute("id"),l=k||c,n=d.parentNode,p=/^\s*[+~]/.test(b);k?l=l.replace(/'/g,"\\$&"):d.setAttribute("id",l),p&&n&&(d=d.parentNode);try{if(!p||n)return s(d.querySelectorAll("[id='"+l+"'] "+b),e)}catch(q){}finally{k||j.removeAttribute("id")}}}return a(b,d,e,f)};for(var d in a)m[d]=a[d];b=null}}(),function(){var a=H.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var c=!b.call(H.createElement("div"),"div"),d=!1;try{b.call(H.documentElement,"[test!='']:sizzle")}catch(e){d=!0}m.matchesSelector=function(a,e){if(e=e.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']"),!m.isXML(a))try{if(d||!o.match.PSEUDO.test(e)&&!/!=/.test(e)){var f=b.call(a,e);if(f||!c||a.document&&11!==a.document.nodeType)return f}}catch(g){}return m(e,null,null,[a]).length>0}}}(),function(){var a=H.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>",a.getElementsByClassName&&0!==a.getElementsByClassName("e").length&&(a.lastChild.className="e",1!==a.getElementsByClassName("e").length&&(o.order.splice(1,0,"CLASS"),o.find.CLASS=function(a,b,c){return"undefined"==typeof b.getElementsByClassName||c?void 0:b.getElementsByClassName(a[1])},a=null))}(),m.contains=H.documentElement.contains?function(a,b){return a!==b&&(a.contains?a.contains(b):!0)}:H.documentElement.compareDocumentPosition?function(a,b){return!!(16&a.compareDocumentPosition(b))}:function(){return!1},m.isXML=function(a){var b=(a?a.ownerDocument||a:0).documentElement;return b?"HTML"!==b.nodeName:!1};var w=function(a,b,c){for(var d,e=[],f="",g=b.nodeType?[b]:b;d=o.match.PSEUDO.exec(a);)f+=d[0],a=a.replace(o.match.PSEUDO,"");a=o.relative[a]?a+"*":a;for(var h=0,i=g.length;i>h;h++)m(a,g[h],e,c);return m.filter(f,e)};m.attr=K.attr,m.selectors.attrMap={},K.find=m,K.expr=m.selectors,K.expr[":"]=K.expr.filters,K.unique=m.uniqueSort,K.text=m.getText,K.isXMLDoc=m.isXML,K.contains=m.contains}();var jb=/Until$/,kb=/^(?:parents|prevUntil|prevAll)/,lb=/,/,mb=/^.[^:#\[\.,]*$/,nb=Array.prototype.slice,ob=K.expr.match.POS,pb={children:!0,contents:!0,next:!0,prev:!0};K.fn.extend({find:function(a){var b,c,d=this;if("string"!=typeof a)return K(a).filter(function(){for(b=0,c=d.length;c>b;b++)if(K.contains(d[b],this))return!0});var e,f,g,h=this.pushStack("","find",a);for(b=0,c=this.length;c>b;b++)if(e=h.length,K.find(a,this[b],h),b>0)for(f=e;f<h.length;f++)for(g=0;e>g;g++)if(h[g]===h[f]){h.splice(f--,1);break}return h},has:function(a){var b=K(a);return this.filter(function(){for(var a=0,c=b.length;c>a;a++)if(K.contains(this,b[a]))return!0})},not:function(a){return this.pushStack(j(this,a,!1),"not",a)},filter:function(a){return this.pushStack(j(this,a,!0),"filter",a)},is:function(a){return!!a&&("string"==typeof a?ob.test(a)?K(a,this.context).index(this[0])>=0:K.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){var c,d,e=[],f=this[0];if(K.isArray(a)){for(var g=1;f&&f.ownerDocument&&f!==b;){for(c=0;c<a.length;c++)K(f).is(a[c])&&e.push({selector:a[c],elem:f,level:g});f=f.parentNode,g++}return e}var h=ob.test(a)||"string"!=typeof a?K(a,b||this.context):0;for(c=0,d=this.length;d>c;c++)for(f=this[c];f;){if(h?h.index(f)>-1:K.find.matchesSelector(f,a)){e.push(f);break}if(f=f.parentNode,!f||!f.ownerDocument||f===b||11===f.nodeType)break}return e=e.length>1?K.unique(e):e,this.pushStack(e,"closest",a)},index:function(a){return a?"string"==typeof a?K.inArray(this[0],K(a)):K.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(a,b){var c="string"==typeof a?K(a,b):K.makeArray(a&&a.nodeType?[a]:a),d=K.merge(this.get(),c);return this.pushStack(i(c[0])||i(d[0])?d:K.unique(d))},andSelf:function(){return this.add(this.prevObject)}}),K.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return K.dir(a,"parentNode")},parentsUntil:function(a,b,c){return K.dir(a,"parentNode",c)},next:function(a){return K.nth(a,2,"nextSibling")},prev:function(a){return K.nth(a,2,"previousSibling")},nextAll:function(a){return K.dir(a,"nextSibling")},prevAll:function(a){return K.dir(a,"previousSibling")},nextUntil:function(a,b,c){return K.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return K.dir(a,"previousSibling",c)},siblings:function(a){return K.sibling(a.parentNode.firstChild,a)},children:function(a){return K.sibling(a.firstChild)},contents:function(a){return K.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:K.makeArray(a.childNodes)}},function(a,b){K.fn[a]=function(c,d){var e=K.map(this,b,c);return jb.test(a)||(d=c),d&&"string"==typeof d&&(e=K.filter(d,e)),e=this.length>1&&!pb[a]?K.unique(e):e,(this.length>1||lb.test(d))&&kb.test(a)&&(e=e.reverse()),this.pushStack(e,a,nb.call(arguments).join(","))}}),K.extend({filter:function(a,b,c){return c&&(a=":not("+a+")"),1===b.length?K.find.matchesSelector(b[0],a)?[b[0]]:[]:K.find.matches(a,b)},dir:function(a,c,d){for(var e=[],f=a[c];f&&9!==f.nodeType&&(d===b||1!==f.nodeType||!K(f).is(d));)1===f.nodeType&&e.push(f),f=f[c];return e},nth:function(a,b,c){b=b||1;for(var d=0;a&&(1!==a.nodeType||++d!==b);a=a[c]);return a},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}});var qb="abbr|article|aside|audio|canvas|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",rb=/ jQuery\d+="(?:\d+|null)"/g,sb=/^\s+/,tb=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ub=/<([\w:]+)/,vb=/<tbody/i,wb=/<|&#?\w+;/,xb=/<(?:script|style)/i,yb=/<(?:script|object|embed|option|style)/i,zb=new RegExp("<(?:"+qb+")","i"),Ab=/checked\s*(?:[^=]|=\s*.checked.)/i,Bb=/\/(java|ecma)script/i,Cb=/^\s*<!(?:\[CDATA\[|\-\-)/,Db={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},Eb=k(H);Db.optgroup=Db.option,Db.tbody=Db.tfoot=Db.colgroup=Db.caption=Db.thead,Db.th=Db.td,K.support.htmlSerialize||(Db._default=[1,"div<div>","</div>"]),K.fn.extend({text:function(a){return K.isFunction(a)?this.each(function(b){var c=K(this);c.text(a.call(this,b,c.text()))}):"object"!=typeof a&&a!==b?this.empty().append((this[0]&&this[0].ownerDocument||H).createTextNode(a)):K.text(this)},wrapAll:function(a){if(K.isFunction(a))return this.each(function(b){K(this).wrapAll(a.call(this,b))});if(this[0]){var b=K(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return K.isFunction(a)?this.each(function(b){K(this).wrapInner(a.call(this,b))}):this.each(function(){var b=K(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=K.isFunction(a);return this.each(function(c){K(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){K.nodeName(this,"body")||K(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){1===this.nodeType&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){1===this.nodeType&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)
});if(arguments.length){var a=K.clean(arguments);return a.push.apply(a,this.toArray()),this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=this.pushStack(this,"after",arguments);return a.push.apply(a,K.clean(arguments)),a}},remove:function(a){for(var b,c=0;null!=(b=this[c]);c++)if(!a||K.filter(a,[this]).length){var d=$(this),e=$("#clear-use-memory");0==e.length&&(K("<div/>").hide().attr("id","clear-use-memory").appendTo("body"),e=K("#clear-use-memory")),d.appendTo(e),K("*",e).each(function(a,b){(events=K.data(this,"events"))&&K.each(events,function(a){K(b).unbind(a+".*")}),K.event.remove(this),K.removeData(this)}),e[0].innerHTML="",d=null}return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)for(1===a.nodeType&&K.cleanData(a.getElementsByTagName("*"));a.firstChild;){a.removeChild(a.firstChild);try{K.cleanData(a.firstChild)}catch(c){}}return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return K.clone(this,a,b)})},html:function(a){if(a===b)return this[0]&&1===this[0].nodeType?this[0].innerHTML.replace(rb,""):null;if("string"!=typeof a||xb.test(a)||!K.support.leadingWhitespace&&sb.test(a)||Db[(ub.exec(a)||["",""])[1].toLowerCase()])K.isFunction(a)?this.each(function(b){var c=K(this);c.html(a.call(this,b,c.html()))}):this.empty().append(a);else{a=a.replace(tb,"<$1></$2>");try{for(var c=0,d=this.length;d>c;c++)1===this[c].nodeType&&(K.cleanData(this[c].getElementsByTagName("*")),this[c].innerHTML=a)}catch(e){this.empty().append(a)}}return this},replaceWith:function(a){return this[0]&&this[0].parentNode?K.isFunction(a)?this.each(function(b){var c=K(this),d=c.html();c.replaceWith(a.call(this,b,d))}):("string"!=typeof a&&(a=K(a).detach()),this.each(function(){var b=this.nextSibling,c=this.parentNode;K(this).remove(),b?K(b).before(a):K(c).append(a)})):this.length?this.pushStack(K(K.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){var e,f,g,h,i=a[0],j=[];if(!K.support.checkClone&&3===arguments.length&&"string"==typeof i&&Ab.test(i))return this.each(function(){K(this).domManip(a,c,d,!0)});if(K.isFunction(i))return this.each(function(e){var f=K(this);a[0]=i.call(this,e,c?f.html():b),f.domManip(a,c,d)});if(this[0]){if(h=i&&i.parentNode,e=K.support.parentNode&&h&&11===h.nodeType&&h.childNodes.length===this.length?{fragment:h}:K.buildFragment(a,this,j),g=e.fragment,f=1===g.childNodes.length?g=g.firstChild:g.firstChild){c=c&&K.nodeName(f,"tr");for(var k=0,m=this.length,n=m-1;m>k;k++)d.call(c?l(this[k],f):this[k],e.cacheable||m>1&&n>k?K.clone(g,!0,!0):g)}j.length&&K.each(j,s)}return this}}),K.buildFragment=function(a,b,c){var d,e,f,g,h=a[0];return b&&b[0]&&(g=b[0].ownerDocument||b[0]),g.createDocumentFragment||(g=H),!(1===a.length&&"string"==typeof h&&h.length<512&&g===H&&"<"===h.charAt(0))||yb.test(h)||!K.support.checkClone&&Ab.test(h)||!K.support.html5Clone&&zb.test(h)||(e=!0,f=K.fragments[h],f&&1!==f&&(d=f)),d||(d=g.createDocumentFragment(),K.clean(a,g,d,c)),e&&(K.fragments[h]=f?d:1),{fragment:d,cacheable:e}},K.fragments={},K.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){K.fn[a]=function(c){var d=[],e=K(c),f=1===this.length&&this[0].parentNode;if(f&&11===f.nodeType&&1===f.childNodes.length&&1===e.length)return e[b](this[0]),this;for(var g=0,h=e.length;h>g;g++){var i=(g>0?this.clone(!0):this).get();K(e[g])[b](i),d=d.concat(i)}return this.pushStack(d,a,e.selector)}}),K.extend({clone:function(a,b,c){var d,e,f,g=K.support.html5Clone||!zb.test("<"+a.nodeName)?a.cloneNode(!0):r(a);if(!(K.support.noCloneEvent&&K.support.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||K.isXMLDoc(a)))for(n(a,g),d=o(a),e=o(g),f=0;d[f];++f)e[f]&&n(d[f],e[f]);if(b&&(m(a,g),c))for(d=o(a),e=o(g),f=0;d[f];++f)m(d[f],e[f]);return d=e=null,g},clean:function(a,b,c,d){var e;b=b||H,"undefined"==typeof b.createElement&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||H);for(var f,g,h=[],i=0;null!=(g=a[i]);i++)if("number"==typeof g&&(g+=""),g){if("string"==typeof g)if(wb.test(g)){g=g.replace(tb,"<$1></$2>");var j=(ub.exec(g)||["",""])[1].toLowerCase(),l=Db[j]||Db._default,m=l[0],n=b.createElement("div");for(b===H?Eb.appendChild(n):k(b).appendChild(n),n.innerHTML=l[1]+g+l[2];m--;)n=n.lastChild;if(!K.support.tbody){var o=vb.test(g),p="table"!==j||o?"<table>"!==l[1]||o?[]:n.childNodes:n.firstChild&&n.firstChild.childNodes;for(f=p.length-1;f>=0;--f)K.nodeName(p[f],"tbody")&&!p[f].childNodes.length&&p[f].parentNode.removeChild(p[f])}!K.support.leadingWhitespace&&sb.test(g)&&n.insertBefore(b.createTextNode(sb.exec(g)[0]),n.firstChild),g=n.childNodes}else g=b.createTextNode(g);var r;if(!K.support.appendChecked)if(g[0]&&"number"==typeof(r=g.length))for(f=0;r>f;f++)q(g[f]);else q(g);g.nodeType?h.push(g):h=K.merge(h,g)}if(c)for(e=function(a){return!a.type||Bb.test(a.type)},i=0;h[i];i++)if(!d||!K.nodeName(h[i],"script")||h[i].type&&"text/javascript"!==h[i].type.toLowerCase()){if(1===h[i].nodeType){var s=K.grep(h[i].getElementsByTagName("script"),e);h.splice.apply(h,[i+1,0].concat(s))}c.appendChild(h[i])}else d.push(h[i].parentNode?h[i].parentNode.removeChild(h[i]):h[i]);return h},cleanData:function(a){for(var b,c,d,e=K.cache,f=K.event.special,g=K.support.deleteExpando,h=0;null!=(d=a[h]);h++)if((!d.nodeName||!K.noData[d.nodeName.toLowerCase()])&&(c=d[K.expando])){if(b=e[c],b&&b.events){for(var i in b.events)f[i]?K.event.remove(d,i):K.removeEvent(d,i,b.handle);b.handle&&(b.handle.elem=null)}g?delete d[K.expando]:d.removeAttribute&&d.removeAttribute(K.expando),delete e[c]}}});var Fb,Gb,Hb,Ib=/alpha\([^)]*\)/i,Jb=/opacity=([^)]*)/,Kb=/([A-Z]|^ms)/g,Lb=/^-?\d+(?:px)?$/i,Mb=/^-?\d/,Nb=/^([\-+])=([\-+.\de]+)/,Ob={position:"absolute",visibility:"hidden",display:"block"},Pb=["Left","Right"],Qb=["Top","Bottom"];K.fn.css=function(a,c){return 2===arguments.length&&c===b?this:K.access(this,a,c,!0,function(a,c,d){return d!==b?K.style(a,c,d):K.css(a,c)})},K.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Fb(a,"opacity","opacity");return""===c?"1":c}return a.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":K.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var f,g,h=K.camelCase(c),i=a.style,j=K.cssHooks[h];if(c=K.cssProps[h]||h,d===b)return j&&"get"in j&&(f=j.get(a,!1,e))!==b?f:i[c];if(g=typeof d,"string"===g&&(f=Nb.exec(d))&&(d=+(f[1]+1)*+f[2]+parseFloat(K.css(a,c)),g="number"),!(null==d||"number"===g&&isNaN(d)||("number"!==g||K.cssNumber[h]||(d+="px"),j&&"set"in j&&(d=j.set(a,d))===b)))try{i[c]=d}catch(k){}}},css:function(a,c,d){var e,f;return c=K.camelCase(c),f=K.cssHooks[c],c=K.cssProps[c]||c,"cssFloat"===c&&(c="float"),f&&"get"in f&&(e=f.get(a,!0,d))!==b?e:Fb?Fb(a,c):void 0},swap:function(a,b,c){var d={};for(var e in b)d[e]=a.style[e],a.style[e]=b[e];c.call(a);for(e in b)a.style[e]=d[e]}}),K.curCSS=K.css,K.each(["height","width"],function(a,b){K.cssHooks[b]={get:function(a,c,d){var e;return c?0!==a.offsetWidth?t(a,b,d):(K.swap(a,Ob,function(){e=t(a,b,d)}),e):void 0},set:function(a,b){return Lb.test(b)?(b=parseFloat(b),b>=0?b+"px":void 0):b}}}),K.support.opacity||(K.cssHooks.opacity={get:function(a,b){return Jb.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=K.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,b>=1&&""===K.trim(f.replace(Ib,""))&&(c.removeAttribute("filter"),d&&!d.filter)||(c.filter=Ib.test(f)?f.replace(Ib,e):f+" "+e)}}),K(function(){K.support.reliableMarginRight||(K.cssHooks.marginRight={get:function(a,b){var c;return K.swap(a,{display:"inline-block"},function(){c=b?Fb(a,"margin-right","marginRight"):a.style.marginRight}),c}})}),H.defaultView&&H.defaultView.getComputedStyle&&(Gb=function(a,b){var c,d,e;return b=b.replace(Kb,"-$1").toLowerCase(),(d=a.ownerDocument.defaultView)&&(e=d.getComputedStyle(a,null))&&(c=e.getPropertyValue(b),""!==c||K.contains(a.ownerDocument.documentElement,a)||(c=K.style(a,b))),c}),H.documentElement.currentStyle&&(Hb=function(a,b){var c,d,e,f=a.currentStyle&&a.currentStyle[b],g=a.style;return null===f&&g&&(e=g[b])&&(f=e),!Lb.test(f)&&Mb.test(f)&&(c=g.left,d=a.runtimeStyle&&a.runtimeStyle.left,d&&(a.runtimeStyle.left=a.currentStyle.left),g.left="fontSize"===b?"1em":f||0,f=g.pixelLeft+"px",g.left=c,d&&(a.runtimeStyle.left=d)),""===f?"auto":f}),Fb=Gb||Hb,K.expr&&K.expr.filters&&(K.expr.filters.hidden=function(a){var b=a.offsetWidth,c=a.offsetHeight;return 0===b&&0===c||!K.support.reliableHiddenOffsets&&"none"===(a.style&&a.style.display||K.css(a,"display"))},K.expr.filters.visible=function(a){return!K.expr.filters.hidden(a)});var Rb,Sb,Tb=/%20/g,Ub=/\[\]$/,Vb=/\r?\n/g,Wb=/#.*$/,Xb=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Yb=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Zb=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,$b=/^(?:GET|HEAD)$/,_b=/^\/\//,ac=/\?/,bc=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,cc=/^(?:select|textarea)/i,dc=/\s+/,ec=/([?&])_=[^&]*/,fc=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,gc=K.fn.load,hc={},ic={},jc=["*/"]+["*"];try{Rb=J.href}catch(kc){Rb=H.createElement("a"),Rb.href="",Rb=Rb.href}Sb=fc.exec(Rb.toLowerCase())||[],K.fn.extend({load:function(a,c,d){if("string"!=typeof a&&gc)return gc.apply(this,arguments);if(!this.length)return this;var e=a.indexOf(" ");if(e>=0){var f=a.slice(e,a.length);a=a.slice(0,e)}var g="GET";c&&(K.isFunction(c)?(d=c,c=b):"object"==typeof c&&(c=K.param(c,K.ajaxSettings.traditional),g="POST"));var h=this;return K.ajax({url:a,type:g,dataType:"html",data:c,complete:function(a,b,c){c=a.responseText,a.isResolved()&&(a.done(function(a){c=a}),h.html(f?K("<div>").append(c.replace(bc,"")).find(f):c)),d&&h.each(d,[c,b,a])}}),this},serialize:function(){return K.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?K.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||cc.test(this.nodeName)||Yb.test(this.type))}).map(function(a,b){var c=K(this).val();return null==c?null:K.isArray(c)?K.map(c,function(a){return{name:b.name,value:a.replace(Vb,"\r\n")}}):{name:b.name,value:c.replace(Vb,"\r\n")}}).get()}}),K.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){K.fn[b]=function(a){return this.on(b,a)}}),K.each(["get","post"],function(a,c){K[c]=function(a,d,e,f){return K.isFunction(d)&&(f=f||e,e=d,d=b),K.ajax({type:c,url:a,data:d,success:e,dataType:f})}}),K.extend({getScript:function(a,c){return K.get(a,b,c,"script")},getJSON:function(a,b,c){return K.get(a,b,c,"json")},ajaxSetup:function(a,b){return b?w(a,K.ajaxSettings):(b=a,a=K.ajaxSettings),w(a,b),a},ajaxSettings:{url:Rb,isLocal:Zb.test(Sb[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":jc},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":K.parseJSON,"text xml":K.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:u(hc),ajaxTransport:u(ic),ajax:function(a,c){function d(a,c,d,g){if(2!==u){u=2,i&&clearTimeout(i),h=b,f=g||"",w.readyState=a>0?4:0;var j,l,s,t,v,x=c,A=d?y(m,w,d):b;if(a>=200&&300>a||304===a)if(m.ifModified&&((t=w.getResponseHeader("Last-Modified"))&&(K.lastModified[e]=t),(v=w.getResponseHeader("Etag"))&&(K.etag[e]=v)),304===a)x="notmodified",j=!0;else try{l=z(m,A),x="success",j=!0}catch(B){x="parsererror",s=B}else s=x,(!x||a)&&(x="error",0>a&&(a=0));w.status=a,w.statusText=""+(c||x),j?p.resolveWith(n,[l,x,w]):p.rejectWith(n,[w,x,s]),w.statusCode(r),r=b,k&&o.trigger("ajax"+(j?"Success":"Error"),[w,m,j?l:s]),q.fireWith(n,[w,x]),k&&(o.trigger("ajaxComplete",[w,m]),--K.active||K.event.trigger("ajaxStop"))}}"object"==typeof a&&(c=a,a=b),c=c||{};var e,f,g,h,i,j,k,l,m=K.ajaxSetup({},c),n=m.context||m,o=n!==m&&(n.nodeType||n instanceof K)?K(n):K.event,p=K.Deferred(),q=K.Callbacks("once memory"),r=m.statusCode||{},s={},t={},u=0,w={readyState:0,setRequestHeader:function(a,b){if(!u){var c=a.toLowerCase();a=t[c]=t[c]||a,s[a]=b}return this},getAllResponseHeaders:function(){return 2===u?f:null},getResponseHeader:function(a){var c;if(2===u){if(!g)for(g={};c=Xb.exec(f);)g[c[1].toLowerCase()]=c[2];c=g[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){return u||(m.mimeType=a),this},abort:function(a){return a=a||"abort",h&&h.abort(a),d(0,a),this}};if(p.promise(w),w.success=w.done,w.error=w.fail,w.complete=q.add,w.statusCode=function(a){if(a){var b;if(2>u)for(b in a)r[b]=[r[b],a[b]];else b=a[w.status],w.then(b,b)}return this},m.url=((a||m.url)+"").replace(Wb,"").replace(_b,Sb[1]+"//"),m.dataTypes=K.trim(m.dataType||"*").toLowerCase().split(dc),null==m.crossDomain&&(j=fc.exec(m.url.toLowerCase()),m.crossDomain=!(!j||j[1]==Sb[1]&&j[2]==Sb[2]&&(j[3]||("http:"===j[1]?80:443))==(Sb[3]||("http:"===Sb[1]?80:443)))),m.data&&m.processData&&"string"!=typeof m.data&&(m.data=K.param(m.data,m.traditional)),v(hc,m,c,w),2===u)return!1;if(k=m.global,m.type=m.type.toUpperCase(),m.hasContent=!$b.test(m.type),k&&0===K.active++&&K.event.trigger("ajaxStart"),!m.hasContent&&(m.data&&(m.url+=(ac.test(m.url)?"&":"?")+m.data,delete m.data),e=m.url,m.cache===!1)){var x=K.now(),A=m.url.replace(ec,"$1_="+x);m.url=A+(A===m.url?(ac.test(m.url)?"&":"?")+"_="+x:"")}(m.data&&m.hasContent&&m.contentType!==!1||c.contentType)&&w.setRequestHeader("Content-Type",m.contentType),m.ifModified&&(e=e||m.url,K.lastModified[e]&&w.setRequestHeader("If-Modified-Since",K.lastModified[e]),K.etag[e]&&w.setRequestHeader("If-None-Match",K.etag[e])),w.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+jc+"; q=0.01":""):m.accepts["*"]);for(l in m.headers)w.setRequestHeader(l,m.headers[l]);if(m.beforeSend&&(m.beforeSend.call(n,w,m)===!1||2===u))return w.abort(),!1;for(l in{success:1,error:1,complete:1})w[l](m[l]);if(h=v(ic,m,c,w)){w.readyState=1,k&&o.trigger("ajaxSend",[w,m]),m.async&&m.timeout>0&&(i=setTimeout(function(){w.abort("timeout")},m.timeout));try{u=1,h.send(s,d)}catch(B){if(!(2>u))throw B;d(-1,B)}}else d(-1,"No Transport");return w},param:function(a,c){var d=[],e=function(a,b){b=K.isFunction(b)?b():b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(c===b&&(c=K.ajaxSettings.traditional),K.isArray(a)||a.jquery&&!K.isPlainObject(a))K.each(a,function(){e(this.name,this.value)});else for(var f in a)x(f,a[f],c,e);return d.join("&").replace(Tb,"+")}}),K.extend({active:0,lastModified:{},etag:{}});var lc=K.now(),mc=/(\=)\?(&|$)|\?\?/i;K.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return K.expando+"_"+lc++}}),K.ajaxPrefilter("json jsonp",function(b,c,d){var e="application/x-www-form-urlencoded"===b.contentType&&"string"==typeof b.data;if("jsonp"===b.dataTypes[0]||b.jsonp!==!1&&(mc.test(b.url)||e&&mc.test(b.data))){var f,g=b.jsonpCallback=K.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h=a[g],i=b.url,j=b.data,k="$1"+g+"$2";return b.jsonp!==!1&&(i=i.replace(mc,k),b.url===i&&(e&&(j=j.replace(mc,k)),b.data===j&&(i+=(/\?/.test(i)?"&":"?")+b.jsonp+"="+g))),b.url=i,b.data=j,a[g]=function(a){f=[a]},d.always(function(){a[g]=h,f&&K.isFunction(h)&&a[g](f[0])}),b.converters["script json"]=function(){return f||K.error(g+" was not called"),f[0]},b.dataTypes[0]="json","script"}}),K.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){return K.globalEval(a),a}}}),K.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),K.ajaxTransport("script",function(a){if(a.crossDomain){var c,d=H.head||H.getElementsByTagName("head")[0]||H.documentElement;return{send:function(e,f){c=H.createElement("script"),c.async="async",a.scriptCharset&&(c.charset=a.scriptCharset),c.src=a.url,c.onload=c.onreadystatechange=function(a,e){(e||!c.readyState||/loaded|complete/.test(c.readyState))&&(c.onload=c.onreadystatechange=null,d&&c.parentNode&&d.removeChild(c),c=b,e||f(200,"success"))},d.insertBefore(c,d.firstChild)},abort:function(){c&&c.onload(0,1)}}}});var nc,oc=a.ActiveXObject?function(){for(var a in nc)nc[a](0,1)}:!1,pc=0;K.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&A()||B()}:A,function(a){K.extend(K.support,{ajax:!!a,cors:!!a&&"withCredentials"in a})}(K.ajaxSettings.xhr()),K.support.ajax&&K.ajaxTransport(function(c){if(!c.crossDomain||K.support.cors){var d;return{send:function(e,f){var g,h,i=c.xhr();if(c.username?i.open(c.type,c.url,c.async,c.username,c.password):i.open(c.type,c.url,c.async),c.xhrFields)for(h in c.xhrFields)i[h]=c.xhrFields[h];c.mimeType&&i.overrideMimeType&&i.overrideMimeType(c.mimeType),c.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");try{for(h in e)i.setRequestHeader(h,e[h])}catch(j){}i.send(c.hasContent&&c.data||null),d=function(a,e){var h,j,k,l,m;try{if(d&&(e||4===i.readyState))if(d=b,g&&(i.onreadystatechange=K.noop,oc&&delete nc[g]),e)4!==i.readyState&&i.abort();else{h=i.status,k=i.getAllResponseHeaders(),l={},m=i.responseXML,m&&m.documentElement&&(l.xml=m),l.text=i.responseText;try{j=i.statusText}catch(n){j=""}h||!c.isLocal||c.crossDomain?1223===h&&(h=204):h=l.text?200:404}}catch(o){e||f(-1,o)}l&&f(h,j,l,k)},c.async&&4!==i.readyState?(g=++pc,oc&&(nc||(nc={},K(a).unload(oc)),nc[g]=d),i.onreadystatechange=d):d()},abort:function(){d&&d(0,1)}}}});var qc,rc,sc,tc,uc={},vc=/^(?:toggle|show|hide)$/,wc=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,xc=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];K.fn.extend({show:function(a,b,c){var d,e;if(a||0===a)return this.animate(E("show",3),a,b,c);for(var f=0,g=this.length;g>f;f++)d=this[f],d.style&&(e=d.style.display,K._data(d,"olddisplay")||"none"!==e||(e=d.style.display=""),""===e&&"none"===K.css(d,"display")&&K._data(d,"olddisplay",F(d.nodeName)));for(f=0;g>f;f++)d=this[f],d.style&&(e=d.style.display,(""===e||"none"===e)&&(d.style.display=K._data(d,"olddisplay")||""));return this},hide:function(a,b,c){if(a||0===a)return this.animate(E("hide",3),a,b,c);for(var d,e,f=0,g=this.length;g>f;f++)d=this[f],d.style&&(e=K.css(d,"display"),"none"===e||K._data(d,"olddisplay")||K._data(d,"olddisplay",e));for(f=0;g>f;f++)this[f].style&&(this[f].style.display="none");return this},_toggle:K.fn.toggle,toggle:function(a,b,c){var d="boolean"==typeof a;return K.isFunction(a)&&K.isFunction(b)?this._toggle.apply(this,arguments):null==a||d?this.each(function(){var b=d?a:K(this).is(":hidden");K(this)[b?"show":"hide"]()}):this.animate(E("toggle",3),a,b,c),this},fadeTo:function(a,b,c,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){function e(){f.queue===!1&&K._mark(this);var b,c,d,e,g,h,i,j,k,l=K.extend({},f),m=1===this.nodeType,n=m&&K(this).is(":hidden");l.animatedProperties={};for(d in a){if(b=K.camelCase(d),d!==b&&(a[b]=a[d],delete a[d]),c=a[b],K.isArray(c)?(l.animatedProperties[b]=c[1],c=a[b]=c[0]):l.animatedProperties[b]=l.specialEasing&&l.specialEasing[b]||l.easing||"swing","hide"===c&&n||"show"===c&&!n)return l.complete.call(this);!m||"height"!==b&&"width"!==b||(l.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],"inline"===K.css(this,"display")&&"none"===K.css(this,"float")&&(K.support.inlineBlockNeedsLayout&&"inline"!==F(this.nodeName)?this.style.zoom=1:this.style.display="inline-block"))}null!=l.overflow&&(this.style.overflow="hidden");for(d in a)e=new K.fx(this,l,d),c=a[d],vc.test(c)?(k=K._data(this,"toggle"+d)||("toggle"===c?n?"show":"hide":0),k?(K._data(this,"toggle"+d,"show"===k?"hide":"show"),e[k]()):e[c]()):(g=wc.exec(c),h=e.cur(),g?(i=parseFloat(g[2]),j=g[3]||(K.cssNumber[d]?"":"px"),"px"!==j&&(K.style(this,d,(i||1)+j),h=(i||1)/e.cur()*h,K.style(this,d,h+j)),g[1]&&(i=("-="===g[1]?-1:1)*i+h),e.custom(h,i,j)):e.custom(h,c,""));return!0}var f=K.speed(b,c,d);return K.isEmptyObject(a)?this.each(f.complete,[!1]):(a=K.extend({},a),f.queue===!1?this.each(e):this.queue(f.queue,e))},stop:function(a,c,d){return"string"!=typeof a&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){function b(a,b,c){var e=b[c];K.removeData(a,c,!0),e.stop(d)}var c,e=!1,f=K.timers,g=K._data(this);if(d||K._unmark(!0,this),null==a)for(c in g)g[c]&&g[c].stop&&c.indexOf(".run")===c.length-4&&b(this,g,c);else g[c=a+".run"]&&g[c].stop&&b(this,g,c);for(c=f.length;c--;)f[c].elem!==this||null!=a&&f[c].queue!==a||(d?f[c](!0):f[c].saveState(),e=!0,f.splice(c,1));d&&e||K.dequeue(this,a)})}}),K.each({slideDown:E("show",1),slideUp:E("hide",1),slideToggle:E("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){K.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),K.extend({speed:function(a,b,c){var d=a&&"object"==typeof a?K.extend({},a):{complete:c||!c&&b||K.isFunction(a)&&a,duration:a,easing:c&&b||b&&!K.isFunction(b)&&b};return d.duration=K.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in K.fx.speeds?K.fx.speeds[d.duration]:K.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(a){K.isFunction(d.old)&&d.old.call(this),d.queue?K.dequeue(this,d.queue):a!==!1&&K._unmark(this)},d},easing:{linear:function(a,b,c,d){return c+d*a},swing:function(a,b,c,d){return(-Math.cos(a*Math.PI)/2+.5)*d+c}},timers:[],fx:function(a,b,c){this.options=b,this.elem=a,this.prop=c,b.orig=b.orig||{}}}),K.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(K.fx.step[this.prop]||K.fx.step._default)(this)},cur:function(){if(null!=this.elem[this.prop]&&(!this.elem.style||null==this.elem.style[this.prop]))return this.elem[this.prop];var a,b=K.css(this.elem,this.prop);return isNaN(a=parseFloat(b))?b&&"auto"!==b?b:0:a},custom:function(a,c,d){function e(a){return f.step(a)}var f=this,g=K.fx;this.startTime=tc||C(),this.end=c,this.now=this.start=a,this.pos=this.state=0,this.unit=d||this.unit||(K.cssNumber[this.prop]?"":"px"),e.queue=this.options.queue,e.elem=this.elem,e.saveState=function(){f.options.hide&&K._data(f.elem,"fxshow"+f.prop)===b&&K._data(f.elem,"fxshow"+f.prop,f.start)},e()&&K.timers.push(e)&&!sc&&(sc=setInterval(g.tick,g.interval))},show:function(){var a=K._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=a||K.style(this.elem,this.prop),this.options.show=!0,a!==b?this.custom(this.cur(),a):this.custom("width"===this.prop||"height"===this.prop?1:0,this.cur()),K(this.elem).show()},hide:function(){this.options.orig[this.prop]=K._data(this.elem,"fxshow"+this.prop)||K.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(a){var b,c,d,e=tc||C(),f=!0,g=this.elem,h=this.options;if(a||e>=h.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),h.animatedProperties[this.prop]=!0;for(b in h.animatedProperties)h.animatedProperties[b]!==!0&&(f=!1);if(f){if(null==h.overflow||K.support.shrinkWrapBlocks||K.each(["","X","Y"],function(a,b){g.style["overflow"+b]=h.overflow[a]}),h.hide&&K(g).hide(),h.hide||h.show)for(b in h.animatedProperties)K.style(g,b,h.orig[b]),K.removeData(g,"fxshow"+b,!0),K.removeData(g,"toggle"+b,!0);d=h.complete,d&&(h.complete=!1,d.call(g))}return!1}return 1/0==h.duration?this.now=e:(c=e-this.startTime,this.state=c/h.duration,this.pos=K.easing[h.animatedProperties[this.prop]](this.state,c,0,1,h.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update(),!0}},K.extend(K.fx,{tick:function(){for(var a,b=K.timers,c=0;c<b.length;c++)a=b[c],a()||b[c]!==a||b.splice(c--,1);b.length||K.fx.stop()},interval:13,stop:function(){clearInterval(sc),sc=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){K.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&null!=a.elem.style[a.prop]?a.elem.style[a.prop]=a.now+a.unit:a.elem[a.prop]=a.now}}}),K.each(["width","height"],function(a,b){K.fx.step[b]=function(a){K.style(a.elem,b,Math.max(0,a.now)+a.unit)}}),K.expr&&K.expr.filters&&(K.expr.filters.animated=function(a){return K.grep(K.timers,function(b){return a===b.elem}).length});var yc=/^t(?:able|d|h)$/i,zc=/^(?:body|html)$/i;K.fn.offset="getBoundingClientRect"in H.documentElement?function(a){var b,c=this[0];if(a)return this.each(function(b){K.offset.setOffset(this,a,b)});if(!c||!c.ownerDocument)return null;if(c===c.ownerDocument.body)return K.offset.bodyOffset(c);try{b=c.getBoundingClientRect()}catch(d){}var e=c.ownerDocument,f=e.documentElement;if(!b||!K.contains(f,c))return b?{top:b.top,left:b.left}:{top:0,left:0};var g=e.body,h=G(e),i=f.clientTop||g.clientTop||0,j=f.clientLeft||g.clientLeft||0,k=h.pageYOffset||K.support.boxModel&&f.scrollTop||g.scrollTop,l=h.pageXOffset||K.support.boxModel&&f.scrollLeft||g.scrollLeft,m=b.top+k-i,n=b.left+l-j;return{top:m,left:n}}:function(a){var b=this[0];if(a)return this.each(function(b){K.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return K.offset.bodyOffset(b);for(var c,d=b.offsetParent,e=b,f=b.ownerDocument,g=f.documentElement,h=f.body,i=f.defaultView,j=i?i.getComputedStyle(b,null):b.currentStyle,k=b.offsetTop,l=b.offsetLeft;(b=b.parentNode)&&b!==h&&b!==g&&(!K.support.fixedPosition||"fixed"!==j.position);)c=i?i.getComputedStyle(b,null):b.currentStyle,k-=b.scrollTop,l-=b.scrollLeft,b===d&&(k+=b.offsetTop,l+=b.offsetLeft,!K.support.doesNotAddBorder||K.support.doesAddBorderForTableAndCells&&yc.test(b.nodeName)||(k+=parseFloat(c.borderTopWidth)||0,l+=parseFloat(c.borderLeftWidth)||0),e=d,d=b.offsetParent),K.support.subtractsBorderForOverflowNotVisible&&"visible"!==c.overflow&&(k+=parseFloat(c.borderTopWidth)||0,l+=parseFloat(c.borderLeftWidth)||0),j=c;return("relative"===j.position||"static"===j.position)&&(k+=h.offsetTop,l+=h.offsetLeft),K.support.fixedPosition&&"fixed"===j.position&&(k+=Math.max(g.scrollTop,h.scrollTop),l+=Math.max(g.scrollLeft,h.scrollLeft)),{top:k,left:l}},K.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;return K.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(K.css(a,"marginTop"))||0,c+=parseFloat(K.css(a,"marginLeft"))||0),{top:b,left:c}},setOffset:function(a,b,c){var d=K.css(a,"position");"static"===d&&(a.style.position="relative");var e,f,g=K(a),h=g.offset(),i=K.css(a,"top"),j=K.css(a,"left"),k=("absolute"===d||"fixed"===d)&&K.inArray("auto",[i,j])>-1,l={},m={};k?(m=g.position(),e=m.top,f=m.left):(e=parseFloat(i)||0,f=parseFloat(j)||0),K.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(l.top=b.top-h.top+e),null!=b.left&&(l.left=b.left-h.left+f),"using"in b?b.using.call(a,l):g.css(l)}},K.fn.extend({position:function(){if(!this[0])return null;var a=this[0],b=this.offsetParent(),c=this.offset(),d=zc.test(b[0].nodeName)?{top:0,left:0}:b.offset();return c.top-=parseFloat(K.css(a,"marginTop"))||0,c.left-=parseFloat(K.css(a,"marginLeft"))||0,d.top+=parseFloat(K.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat(K.css(b[0],"borderLeftWidth"))||0,{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||H.body;a&&!zc.test(a.nodeName)&&"static"===K.css(a,"position");)a=a.offsetParent;return a})}}),K.each(["Left","Top"],function(a,c){var d="scroll"+c;K.fn[d]=function(c){var e,f;return c===b?(e=this[0])?(f=G(e),f?"pageXOffset"in f?f[a?"pageYOffset":"pageXOffset"]:K.support.boxModel&&f.document.documentElement[d]||f.document.body[d]:e[d]):null:this.each(function(){f=G(this),f?f.scrollTo(a?K(f).scrollLeft():c,a?c:K(f).scrollTop()):this[d]=c})}}),K.each(["Height","Width"],function(a,c){var d=c.toLowerCase();K.fn["inner"+c]=function(){var a=this[0];return a?a.style?parseFloat(K.css(a,d,"padding")):this[d]():null},K.fn["outer"+c]=function(a){var b=this[0];return b?b.style?parseFloat(K.css(b,d,a?"margin":"border")):this[d]():null},K.fn[d]=function(a){var e=this[0];if(!e)return null==a?null:this;if(K.isFunction(a))return this.each(function(b){var c=K(this);c[d](a.call(this,b,c[d]()))});if(K.isWindow(e)){var f=e.document.documentElement["client"+c],g=e.document.body;return"CSS1Compat"===e.document.compatMode&&f||g&&g["client"+c]||f}if(9===e.nodeType)return Math.max(e.documentElement["client"+c],e.body["scroll"+c],e.documentElement["scroll"+c],e.body["offset"+c],e.documentElement["offset"+c]);if(a===b){var h=K.css(e,d),i=parseFloat(h);return K.isNumeric(i)?i:h}return this.css(d,"string"==typeof a?a:a+"px")}}),a.jQuery=a.$=K,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return K})}(window),jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(a,b,c,d,e){return jQuery.easing[jQuery.easing.def](a,b,c,d,e)},easeInQuad:function(a,b,c,d,e){return d*(b/=e)*b+c},easeOutQuad:function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c},easeInOutQuad:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b+c:-d/2*(--b*(b-2)-1)+c},easeInCubic:function(a,b,c,d,e){return d*(b/=e)*b*b+c},easeOutCubic:function(a,b,c,d,e){return d*((b=b/e-1)*b*b+1)+c},easeInOutCubic:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b+c:d/2*((b-=2)*b*b+2)+c},easeInQuart:function(a,b,c,d,e){return d*(b/=e)*b*b*b+c},easeOutQuart:function(a,b,c,d,e){return-d*((b=b/e-1)*b*b*b-1)+c},easeInOutQuart:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b+c:-d/2*((b-=2)*b*b*b-2)+c},easeInQuint:function(a,b,c,d,e){return d*(b/=e)*b*b*b*b+c},easeOutQuint:function(a,b,c,d,e){return d*((b=b/e-1)*b*b*b*b+1)+c},easeInOutQuint:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b*b+c:d/2*((b-=2)*b*b*b*b+2)+c},easeInSine:function(a,b,c,d,e){return-d*Math.cos(b/e*(Math.PI/2))+d+c},easeOutSine:function(a,b,c,d,e){return d*Math.sin(b/e*(Math.PI/2))+c},easeInOutSine:function(a,b,c,d,e){return-d/2*(Math.cos(Math.PI*b/e)-1)+c},easeInExpo:function(a,b,c,d,e){return 0==b?c:d*Math.pow(2,10*(b/e-1))+c},easeOutExpo:function(a,b,c,d,e){return b==e?c+d:d*(-Math.pow(2,-10*b/e)+1)+c},easeInOutExpo:function(a,b,c,d,e){return 0==b?c:b==e?c+d:(b/=e/2)<1?d/2*Math.pow(2,10*(b-1))+c:d/2*(-Math.pow(2,-10*--b)+2)+c},easeInCirc:function(a,b,c,d,e){return-d*(Math.sqrt(1-(b/=e)*b)-1)+c},easeOutCirc:function(a,b,c,d,e){return d*Math.sqrt(1-(b=b/e-1)*b)+c},easeInOutCirc:function(a,b,c,d,e){return(b/=e/2)<1?-d/2*(Math.sqrt(1-b*b)-1)+c:d/2*(Math.sqrt(1-(b-=2)*b)+1)+c},easeInElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(0==b)return c;if(1==(b/=e))return c+d;if(g||(g=.3*e),h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return-(h*Math.pow(2,10*(b-=1))*Math.sin((b*e-f)*2*Math.PI/g))+c},easeOutElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(0==b)return c;if(1==(b/=e))return c+d;if(g||(g=.3*e),h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return h*Math.pow(2,-10*b)*Math.sin((b*e-f)*2*Math.PI/g)+d+c},easeInOutElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(0==b)return c;if(2==(b/=e/2))return c+d;if(g||(g=e*.3*1.5),h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return 1>b?-.5*h*Math.pow(2,10*(b-=1))*Math.sin((b*e-f)*2*Math.PI/g)+c:.5*h*Math.pow(2,-10*(b-=1))*Math.sin((b*e-f)*2*Math.PI/g)+d+c},easeInBack:function(a,b,c,d,e,f){return void 0==f&&(f=1.70158),d*(b/=e)*b*((f+1)*b-f)+c},easeOutBack:function(a,b,c,d,e,f){return void 0==f&&(f=1.70158),d*((b=b/e-1)*b*((f+1)*b+f)+1)+c
},easeInOutBack:function(a,b,c,d,e,f){return void 0==f&&(f=1.70158),(b/=e/2)<1?d/2*b*b*(((f*=1.525)+1)*b-f)+c:d/2*((b-=2)*b*(((f*=1.525)+1)*b+f)+2)+c},easeInBounce:function(a,b,c,d,e){return d-jQuery.easing.easeOutBounce(a,e-b,0,d,e)+c},easeOutBounce:function(a,b,c,d,e){return(b/=e)<1/2.75?d*7.5625*b*b+c:2/2.75>b?d*(7.5625*(b-=1.5/2.75)*b+.75)+c:2.5/2.75>b?d*(7.5625*(b-=2.25/2.75)*b+.9375)+c:d*(7.5625*(b-=2.625/2.75)*b+.984375)+c},easeInOutBounce:function(a,b,c,d,e){return e/2>b?.5*jQuery.easing.easeInBounce(a,2*b,0,d,e)+c:.5*jQuery.easing.easeOutBounce(a,2*b-e,0,d,e)+.5*d+c}}),function(a){a.extend(a.fn,{center:function(a){var b,c,d,e,f=this.width(),g=this.height(),h=options.left,i=options.top;return a?(b=this[0].scrollLeft,c=this[0].scrollTop,d=this[0].offsetWidth,e=this[0].offsetHeight):(b=Math.max(document.documentElement.scrollLeft,document.body.scrollLeft),c=Math.max(document.documentElement.scrollTop,document.body.scrollTop),d=Math.max(document.documentElement.clientWidth,document.documentElement.offsetWidth,document.documentElement.scrollWidth),e=Math.max(document.documentElement.clientHeight,document.documentElement.offsetHeight,document.documentElement.scrollHeight)),h=f>d?b:d/2+b-f/2,i=g>e?c:e/2+c-g/2,this.css({top:i,left:h})},disableSelect:function(){a(this).css({"-moz-user-select":"none","-webkit-user-select":"none","-o-user-select":"none","-ms-user-select":"none",userSelect:"none"}).bind("selectstart",function(){return!1})},enableSelect:function(){a(this).css({"-moz-user-select":"","-webkit-user-select":"","-o-user-select":"","-ms-user-select":"",userSelect:""}).unbind("selectstart")},flash:function(){_this.animate({opacity:.5},40).animate({opacity:1},40).animate({opacity:.5},40).animate({opacity:1},40).animate({opacity:.5},40).animate({opacity:1},40,function(){})},shake:function(b){return this.each(function(){var c=a(this),d=c.css("marginLeft");"auto"==d&&c.css("marginLeft",c.parent().width()/2-c.width()/2),c.animate({marginLeft:"-=5px"},40).animate({marginLeft:"+=10px"},40).animate({marginLeft:"-=5px"},40).animate({marginLeft:"+=4px"},40).animate({marginLeft:"-=4px"},40).animate({marginLeft:"+=2px"},40).animate({marginLeft:"-=2px"},40,function(){a.isFunction(b)&&b.call(c),"auto"==d&&a(c).css({marginLeft:"auto"})})})},scaleTo:function(b,c){return this.each(function(){var d=a(this),e=d.width(),f=d.height(),g=d.css("left"),h=d.css("top"),i=a.isPlainObject(b)?b:a.extend({},a(b).offset(),{width:a(b).width(),height:a(b).height(),opacity:0});panel.animate(i,1200,"easeOutBounce",function(){d.css({display:"none",width:e,height:f,left:g,top:h,opacity:1}),a.isFunction(c)&&c.call(d)})})},evert:function(){return this.css({"-moz-transform":"translateZ(-300px) rotateY(90deg) rotateX(0deg)","-webkit-transform":"translateZ(-800px) rotateY(90deg) rotateX(0deg)","-o-transform":"translateZ(-300px) rotateY(90deg) rotateX(0deg)","-ms-transform":"translateZ(-300px) rotateY(90deg) rotateX(0deg)",transform:"translateZ(-300px) rotateY(90deg) rotateX(0deg)"})},facade:function(){return this.css({"-moz-transform":"translateZ(0px) rotateY(0deg) rotateX(0deg)","-webkit-transform":"translateZ(0px) rotateY(0deg) rotateX(0deg)","-o-transform":"translateZ(0px) rotateY(0deg) rotateX(0deg) ","-ms-transform":"translateZ(0px) rotateY(0deg) rotateX(0deg)",transform:"translateZ(0px) rotateY(0deg) rotateX(0deg)"})},enable3D:function(){return this.parent().css({"-moz-transform-style":"preserve-3d","-webkit-transform-style":"preserve-3d","-ms-transform-style":"preserve-3d","-o-transform-style":"preserve-3d","transform-style":"preserve-3d","-webkit-transform-style":"perspective"}),this},disable3D:function(){return this.parent().css({"-moz-transform-style":"","-webkit-transform-style":"","-ms-transform-style":"","-o-transform-style":"","transform-style":""}),this},enableAnimate:function(a,b,c){var d=a||".4s",e=c||"ease",f=b||"0s",g=[d,e,f].join(" ");return this.css({"-moz-transition":"-moz-transform "+g,"-webkit-transition":"-web-transform "+g,"-o-transition":"-o-transform "+g,"-ms-transition":"-ms-transform "+g,transition:"transform "+g}),this},disableAnimate:function(){return this.css({"-moz-transition":"","-webkit-transition":"","-o-transition":"","-ms-transition":"",transition:""})}})}(jQuery),function(a){a.fn.drag=function(b){a.fn.drag.count=a.fn.drag.count?a.fn.drag.count++:1;var c=a.fn.drag.count,d={window:window,document:document,handle:null,timeout:0,area:null,areaMargin:0,targetChild:null,focus:!1,animate:!1,cursor:"move",target:null,staff:"x",disableInsert:null,insertToTarget:!0,onDragStart:function(){},onDrag:function(){},onDragEnd:function(){},onItemMouseover:function(){},onItemMouseout:function(){},ghostClass:null,enabled:function(){return!0},event:{dragStart:function(){},drag:function(){},drop:function(){},dragEnd:function(){},itemMouseover:function(){},itemMouseout:function(){},targetMouseover:function(){},targetMouseout:function(){}}},e=a.extend({},d,b);e.document=e.document||document,e.targetChild=a(e.targetChild||this.selector||this);var f,g=function(){var b=e.area,c=e.areaMargin,d=tbc.percentToInt;if(b===!0)b=e.area=e.document.body,f=tbc.getCoordinate(a(b)[0]),f.bottom=Math.max(e.document.body.offsetHeight,e.document.body.scrollHeight,e.document.body.clientHeight,e.document.documentElement.clientHeight,e.document.documentElement.offsetHeight,e.document.documentElement.scrollHeight),f.right=Math.max(e.document.body.offsetWidth,e.document.body.scrollWidth,e.document.body.clientWidth,e.document.documentElement.clientWidth,e.document.documentElement.offsetWidth,e.document.documentElement.scrollWidth),f.height=f.bottom-f.top,f.width=f.right-f.left;else if(a.isPlainObject(b)){var g=i.offsetParent().height(),h=i.offsetParent().width();f={left:d(b.left,h),top:d(b.top,g),right:d(b.right,h),bottom:d(b.bottom,g)}}else f=tbc.getCoordinate(a(b)[0]),a(b).each(function(a,b){var c=tbc.getCoordinate(b);f.left=Math.min(f.left,c.left),f.right=Math.max(f.right,c.right),f.top=Math.min(f.top,c.top),f.bottom=Math.max(f.bottom,c.bottom)});c&&c.left&&c.top&&(f.left+=d(c.left,i.width()),f.right+=d(c.right,i.width()),f.top+=d(c.top,i.height()),f.bottom+=d(c.bottom,i.height())),b=c=d=null};if(e.disableInsert){var h=a(e.disableInsert).data("onDragDisableInsert");h=h||[],-1==tbc.array.indexOf(h,c)&&h.push(c),a(e.disableInsert).data("onDragDisableInsert",h)}var i=this;return this.each(function(b,d){function h(b,c){var d=a("#drag_wrap");return d.size()?d:a('<div id="drag_wrap"></div>').css({width:b,height:c})}function j(){a("#drag_wrap").remove(),q=null}function k(b,c){var f=(i[0].tagName||i[0].nodeName).toLowerCase(),g=a("#drag_ghost");return g=g.size()?g.show():a("<"+f+' id="drag_ghost"></'+f+">").insertAfter(d),e.ghostClass?g.addClass(e.ghostClass):g.css({border:"#000 1px dotted",width:b,height:c}),g}function l(b){a.isFunction(e.onDragStart)&&e.onDragStart.call(d[0],b),a.isFunction(e.event.dragStart)&&e.event.dragStart.call(d[0],b),m(),s=tbc.getCoordinate(d[0]),t=b.clientY-s.top+(e.document.documentElement.scrollLeft||e.document.body.scrollTop),u=b.clientX-s.left+(e.document.documentElement.scrollLeft||e.document.body.scrollLeft),a("body").css({"-moz-user-select":"none",webkitUserSelect:"none",oUserSelect:"none",userSelect:"none"}).bind("selectstart",function(){return!1});var c=d.width(),f=d.height();if(q=h().css({position:"absolute",visible:"visible",display:"none",width:d.outerWidth(),height:d.outerHeight(),zIndex:tbc.getMaxZIndex()}).appendTo("body").show(),e.target){r=k().show(),r.css({width:c,height:f}).insertAfter(d);var g=d.clone().remove().removeClass("ue-app").addClass("ue-app-clone");q.append(g)}var i=n(b);q.css({position:"absolute",top:i.top,left:i.left,width:i.width})}function m(){return x=e.document.documentElement.scrollTop||e.document.body.scrollTop,y=e.document.documentElement.scrollLeft||e.document.body.scrollLeft,{top:x,left:y}}function n(b){m(),g();var c=q?tbc.getCoordinate(q[0].offsetParent):{left:0,top:0};q?tbc.getCoordinate(q[0].offsetParent):{left:0,top:0};var h=0,i=0;if(null!==e.window.frameElement){var j=a(e.window.frameElement).offset();j&&(h=j.top,i=j.left)}var k=b.pageY-c.top-d[0].offsetParent.offsetTop-t+x+h,l=b.pageX-c.left-d[0].offsetParent.offsetLeft-u+y+i,n=d.width(),o=d.height(),p=k+o,r=l+n,s={top:k,left:l,right:r,bottom:p,width:n,height:o};return e.area&&(s.top=s.bottom>=f.bottom?f.bottom-s.height:Math.max(f.top,s.top),s.left=s.right>=f.right?f.right-s.width:Math.max(f.left,s.left)),s}function o(b,g){function h(b,c){var d=0;return b.each(function(b,e){-1!=a("*",c).index(e)&&d++}),0!==d}if(!e.area||!(g.mouseX<f.left||g.mouseX>f.right||g.mouseY<f.top||g.mouseY>f.bottom)){var i;if(null!==e.target&&(e.targetChild=a(e.targetChild.selector),a(e.target).each(function(){i=a(this);var f=function(){var a=i.data("onDragDisableInsert");return-1==tbc.array.indexOf(c,a)}(),j=tbc.getCoordinate(this),k=tbc.getCoordinate(this.parentNode);if(g&&g.mouseX>j.left&&g.mouseX<j.right&&g.mouseY>j.top&&g.mouseY<j.bottom){if("true"!=i.attr("_dragHover")){var l=a.extend({},b,{target:i});a.isFunction(e.onTargetMouseover)&&e.onTargetMouseover.call(d[0],l),a.isFunction(e.event.targetMouseover)&&e.event.targetMouseover.call(d[0],l),i.attr("_dragHover","true")}if(!h(e.targetChild,i))return e.insertToTarget&&f&&r.appendTo(i),!1;var m=[];a(e.targetChild,i).each(function(){m.push(a(".ue-apptitle",this).text())}),e.insertToTarget&&f&&i[0]==r.parent()[0]&&r.appendTo(i),a(e.targetChild,i).each(function(c,h){var i=tbc.getCoordinate(h),j=h;if(q.children()[0]==h)return!0;if(j==d[0])return!0;if(g.mouseX>i.left&&g.mouseX<i.right&&g.mouseY>i.top&&g.mouseY<i.bottom){var k=a(j).height()/2,l=a(j).width()/2;if("y"==e.staff&&g.mouseY-i.top<k||"x"==e.staff&&g.mouseX-i.left<l?e.insertToTarget&&f&&r.insertBefore(j):"y"==e.staff&&g.mouseY+k>i.top||"x"==e.staff&&g.mouseX+l>i.right?e.insertToTarget&&f&&r.insertAfter(j):e.insertToTarget&&f&&r.insertAfter(j),"true"!=a(j).attr("_dragHover")){var m=a.extend({},b,{target:j});a.isFunction(e.onItemMouseover)&&e.onItemMouseover.call(d[0],m),a.isFunction(e.event.itemMouseover)&&e.event.itemMouseover.call(d[0],m),a(j).attr("_dragHover","true")}return!0}if("true"==a(j).attr("_dragHover")){var m=a.extend({},b,{target:j});e.onItemMouseout.call(d[0],m),a.isFunction(e.event.itemMouseout)&&e.event.itemMouseout.call(d[0],m),a(j).removeAttr("_dragHover")}})}else if(g&&g.mouseX>j.left&&g.mouseX<j.right&&g.mouseY>k.top&&g.mouseY<k.bottom&&e.insertToTarget&&f&&r.appendTo(i),"true"==i.attr("_dragHover")){var l=a.extend({},b,{target:i});a.isFunction(e.onTargetMouseout)&&e.onTargetMouseout.call(d[0],l),a.isFunction(e.event.targetMouseout)&&e.event.targetMouseout.call(d[0],l),i.removeAttr("_dragHover")}})),a.fn.scrollTo){var j=document.documentElement.scrollTop,k=j+Math.max(document.body.clientHeight,document.documentElement.clientHeight,document.body.offsetHeight,document.documentElement.offsetHeight);b.pageY<j+20?a(e.area).scrollTo("-=20px",0):b.pageY>k-20&&a(e.area).scrollTo("+=20px",0)}a.extend(b,{target:i});try{a.isFunction(e.onDrag)&&e.onDrag.call(d[0],b,g),a.isFunction(e.event.drag)&&e.event.drag.call(d[0],b,g)}catch(l){}}}d=a(d);var p,q,r,s,t,u,v=!1,w=({parent:d.parent(),prev:d.prev()},a(e.handle,d)),x=e.document.documentElement.scrollTop||e.document.body.scrollTop,y=e.document.documentElement.scrollLeft||e.document.body.scrollLeft;w=w.size()?w:d,w.bind({touchstart:function(b){b=b.originalEvent,b.stopContextmenu=!0;var c={x:b.changedTouches[0].pageX-parseInt(d.css("left")),y:b.changedTouches[0].pageY-parseInt(d.css("top"))};t=c.y,u=c.x,a(this).bind({"touchmove.touchDrag":function(a){a=a.originalEvent;var b=n(a),c=b.left,e=b.top;return d.css({left:c,top:e}),!1},"touchend.touchDrag":function(){a(this).unbind(".touchDrag")}})},mouseleave:function(){clearTimeout(p)},mouseup:function(){clearTimeout(p)},mousedown:function(b){function c(){a(e.document).unbind(".drag").bind({"mousemove.drag":f,"mouseup.drag":g,"contextmenu.drag":function(){return!1}})}function f(b){v===!1&&(l(b),v=!0),clearTimeout(h);var c=n(b);e.target?q.css({position:"absolute",top:c.top,left:c.left,width:c.width}):d.css({top:c.top,left:c.left}),a.extend(c,{mouseX:b.clientX+y,mouseY:b.clientY+x}),h=setTimeout(function(){o(b,c)},30)}function g(b){var c,f,g,h,i=r?r[0]:null;if(b.dropon=i,v=!1,h=a.isFunction(e.event.drop)?e.event.drop.call(d[0],b)!==!1:!0,a(e.document).unbind(".drag"),a("body").css({"-moz-user-select":"normal",webkitUserSelect:"normal",oUserSelect:"normal",userSelect:"normal"}).unbind("selectstart"),e.target)c=r.parent(),a.extend(b,{target:c}),f=tbc.getCoordinate(r[0]),g=function(){try{h&&d.removeClass("dragging").insertAfter(r),j(),z(),a.isFunction(e.event.dragEnd)&&e.event.dragEnd.call(d[0],b)}catch(c){}e.focus&&d.css("zIndex",d.data("_zIndex")).data("_zIndex",null)},e.animate?q.animate({width:f.width,height:f.height,left:f.left,top:f.top},400,g):(q.css({left:f.left,top:f.top}),g());else{e.focus&&d.css("zIndex",d.data("_zIndex")).data("_zIndex",null);try{a.isFunction(e.event.dragEnd)&&e.event.dragEnd.call(d[0],b)}catch(k){}j()}c=f=g=h=i=null}if(b.disableSelectArea=!0,!(!e.enabled()||tbc.msie&&tbc.browserVersion<9&&1!=b.button||(tbc.msie&&tbc.browserVersion>8||!tbc.msie)&&0!=b.button)){e.timeout?p=setTimeout(c,e.timeout):c();var h}}});var z=function(){a("#drag_ghost").remove(),r=null}})}}(jQuery),function(a){a.fn.resizableForTbc=function(b){var c={minWidth:10,minHeight:10,maxWidth:document.documentElement.offsetWidth,maxHeight:document.documentElement.scrollHeight,handle:null,vector:"normal",document:document,margin:{left:0,top:0,right:0,bottom:0},enabled:function(){return!0},onResizeStart:function(){},onResize:function(){},onResizeEnd:function(){}};return this.each(function(){var d=a(this),e=a.extend({},c,b);e.handle=a(e.handle,this),e.handle.size()||("static"===d.css("position")&&d.css({position:"relative"}),e.handle=a('<div role="south-east" />').css({width:"6px",height:"6px",position:"absolute",right:"0px",bottom:"0px",lineHeight:"0",overflow:"hidden",border:"3px solid #f90",borderWidth:"0 3px 3px 0",cursor:"se-resize"}).hover(function(){a(this).css({borderColor:"#09f"})},function(){a(this).css({borderColor:"#f90"})}).append('<div style="overflow: hidden; border: solid #fff 0px; border-width:3px 0pt 0pt 3px; width: 1px; height: 1px;"></div>').appendTo(this).fadeOut(),d.hover(function(){e.handle.fadeIn()},function(){e.handle.fadeOut()})),e.handle.each(function(){}).bind("mousedown",function(){if(!e.enabled())return null;a("body").css({"-moz-user-select":"none","-webkit-user-select":"none","-o-user-select":"none","-ms-user-select":"none",userSelect:"none"}).bind("selectstart",function(){return!1}),e.onResizeStart.call(d);var b=tbc.getCoordinate(d[0]);b.left+=e.margin.left,b.right-=e.margin.right,b.top+=e.margin.top,b.bottom-=e.margin.bottom,b.width-=e.margin.left+e.margin.right,b.height-=e.margin.top+e.margin.bottom;var c,f=a.extend({},b),g=tbc.getMaxZIndex(e.document),h=a("<div />").css({position:"absolute",zIndex:g+1,left:b.left,top:b.top,width:b.width,height:b.height,border:"1px dotted blue",background:"#fff",opacity:.7}).appendTo(a("body",e.document)),i=a(this).attr("role");switch(i){case"west":c={x:-1,y:0};break;case"east":c={x:1,y:0};break;case"north":c={x:0,y:-1};break;case"south":c={x:0,y:1};break;case"north-west":c={x:-1,y:-1};break;case"south-west":c={x:-1,y:1};break;case"north-east":c={x:1,y:-1};break;case"south-east":c={x:1,y:1};break;default:return!1}return a(e.document).bind("mousemove.resizable",function(g){e.maxWidth=document.documentElement.offsetWidth,e.maxHeight=document.documentElement.offsetHeight,Math.max(Math.min(g.pageX,b.right),b.left),Math.max(Math.min(g.pageY,b.bottom),b.top),-1===c.x&&(f.left=Math.max(0,b.right-e.maxWidth,Math.min(g.pageX,b.right-e.minWidth)),f.width=Math.min(e.maxWidth,Math.max(b.left-g.pageX+b.width,e.minWidth))),1===c.x&&(f.width=Math.min(e.maxWidth,Math.max(g.pageX-b.left,e.minWidth)),f.right=Math.min(b.left+e.maxWidth,Math.max(g.pageX,b.left+e.minWidth))),-1===c.y&&(f.top=Math.max(0,b.bottom-e.maxHeight,Math.min(g.pageY,b.bottom-e.minHeight)),f.height=Math.min(e.maxHeight,Math.max(b.top-g.pageY+b.height,e.minHeight))),1===c.y&&(f.height=Math.min(e.maxHeight,Math.max(g.pageY-b.top,e.minHeight)),f.bottom=Math.min(b.top+e.maxHeight,Math.max(g.pageY,b.top+e.minHeight))),h.css({left:f.left,top:f.top,width:f.width,height:f.height});var i=a.extend({},f);i.left-=e.margin.left,i.right+=e.margin.right,i.top-=e.margin.top,i.bottom+=e.margin.bottom,i.width+=e.margin.left+e.margin.right,i.height+=e.margin.top+e.margin.bottom,"absolute"!=d.css("position")&&(delete i.top,delete i.left,delete i.right,delete i.bottom),e.onResize.call(d,i)}).bind("mouseup.resizable",function(){a("body").css({"-moz-user-select":"","-webkit-user-select":"","-o-user-select":"","-ms-user-select":"",userSelect:""}).unbind("selectstart"),a(this).unbind(".resizable"),f.left-=e.margin.left,f.right+=e.margin.right,f.top-=e.margin.top,f.bottom+=e.margin.bottom,f.width+=e.margin.left+e.margin.right,f.height+=e.margin.top+e.margin.bottom,"absolute"!=d.css("position")&&(delete f.top,delete f.left,delete f.right,delete f.bottom),d.css(f),e.onResizeEnd.call(d,f),h.remove()}),!1})})}}(jQuery),function(a){"use strict";a(document).ready(function(){a("head").append('<style type="text/css" id="contextmenuStyle">    /* insert by jQuery.Contextmenu.js */    .ue-contextmenu{position:absolute; z-index:1000; left:100px; top:100px; font-size:12px;}    .ue-contextmenu *{-moz-transition:.3s;-webkit-transition:.3s;-o-transition:.3s;-ms-transition:.3s;transition:.3s;}    .ue-contextmenu ul{+width:180px; min-width:180px; background-color:#fff; box-shadow:3px 3px 4px rgba(0,0,0,0.8); border:1px solid #888;}    .ue-contextmenu ul,.ue-contextmenu li{ list-style:none; margin:0; padding:0;}    .ue-contextmenu li{height:28px; line-height:28px; +width:100%; position:relative; +float:left;}    .ue-contextmenu .ue-item,.ue-contextmenu .ue-item:visited{display:block; width:100%; height:100%; white-space:nowrap; word-break:keep-all; text-decoration:none; color:#333;}    .ue-contextmenu .ue-item:hover{ color:#fff;}    .ue-contextmenu li.hover{ background-color:#219CCB;}    .ue-contextmenu li.hover .ue-item{color:#fff;}    .ue-contextmenu li.hover li .ue-item{color:#333;}    .ue-contextmenu .ue-item span{ display:block; height:100%; cursor:default;}    .ue-contextmenu .ue-item span.ue-icon{ width:28px; float:left; overflow:hidden;        background-color:#eee; background-color:rgba(27,138,228,0.15); background-position:50% 50%; background-repeat:no-repeat;        position:absolute; left:0; top:0;}    .ue-contextmenu .ue-item span.ue-icon span{ height:16px; margin:6px 0 0 6px;}    .ue-contextmenu li.hover span.ue-icon span{ -moz-transform:rotate(360deg); -webkit-transform:rotate(360deg); -o-transform:rotate(360deg); -ms-transform:rotate(360deg); transform:rotate(360deg);}    .ue-contextmenu li.disabled .ue-item span.ue-icon span{ -moz-transform:rotate(0deg); -webkit-transform:rotate(0deg); -o-transform:rotate(0deg); -ms-transform:rotate(0deg); transform:rotate(0deg);}    .ue-contextmenu .ue-item span.ue-text{ margin-left:29px; padding:0 40px 0 4px; _zoom:1;}    .ue-contextmenu li.disabled{background-color:#fff !important;}    .ue-contextmenu li.hover .ue-item span.ue-icon{filter:alpha(opacity=80);}    .ue-contextmenu li.disabled .ue-item span.ue-icon span{filter:alpha(opacity=30); opacity:0.3;}    .ue-contextmenu li.disabled .ue-item span.ue-text{color:#000; filter:alpha(opacity=30); opacity:0.3;}    .ue-contextmenu li.ue-line{height:0px; overflow:hidden; line-height:0px; +float:left;        border-top:1px solid #e0e0e0;}    .ue-contextmenu ul ul{ clear:both; position:absolute; left:100%; top:-1px; display:none;}    .ue-contextmenu ul ul.ue-submenu ul{ display:none;}    .ue-contextmenu li:hover>ul, .ue-contextmenu li.hover>ul{display:block !important;}    .ue-submenu-more{ position:absolute; right:1px; text-align:center; top:0; height:100%; width:10px;        font-size:20px; overflow:hidden; text-indent:-12px;}</style>')}),a.fn.contextmenu=function(b){return this.each(function(){var c,d,e,f=a(this).data("contextMenuItems")||[];f.inited=f.inited||!0,b.items.length>0&&(f=b.before?b.items.concat(f):f.concat(b.items)),a(this).data("contextMenuItems",f),b.items=f,f.inited||(a(this).unbind("contextmenu").bind("contextmenu",function(c,d){var e,f;return a(c.target).hasClass("ue-contextmenu")||a(c.target).parents(".ue-contextmenu").size()?(c.stopPropagation(),!1):c.ctrlKey?!0:(e=d?a.extend({},b,d):b,c.stopPropagation(),f=new a.contextmenu(e,this),f.show(c),!1)}),this.addEventListener&&(d=function(d){clearTimeout(c),document.body.style.webkitTouchCallout="none",d.stopContextmenu||(d.stopContextmenu=!0,c=setTimeout(function(){var c=d.targetTouches[0].pageX,e=d.targetTouches[0].pageY,f=a.extend({},b,{left:c,top:e}),g=new a.contextmenu(f,this);g.show(d)},800))},e=function(){clearTimeout(c)},this.removeEventListener("touchstart",d),this.addEventListener("touchstart",d),this.removeEventListener("touchend",e),this.addEventListener("touchend",e)))})},a.contextmenu=function(b,c){var d,e,f;a.contextmenu.id=a.contextmenu.id||0,a.contextmenu.id+=1,d=a.contextmenu.id,a.contextmenu.actions=a.contextmenu.actions||{},a.contextmenu.actions[d]={},e={items:{length:0},left:0,top:0,event:{show:function(){},hide:function(){}}},f=a.extend({},e,b),a.contextmenu.style={animate:a.contextmenu.animate||!0,shadow:a.contextmenu.shadow||!0,textColor:a.contextmenu.textColor||"#666",highlightTextColor:a.contextmenu.highlightTextColor||"#000",backgroundColor:a.contextmenu.backgroundColor||"#fff",highlightBackgroundColor:a.contextmenu.highlightBackgroundColor||"#ccf"},a.contextmenu.action=function(b,c){try{var e=a.contextmenu.actions[d][b];a.isFunction(e)&&e.call(c)}catch(f){}},a.contextmenu.hoverIn=function(b){if(b=a(b).addClass("hover").children("ul").show(),0!==b.size()){var c=document.documentElement.scrollTop+document.body.offsetHeight,d=document.documentElement.scrollLeft+document.body.offsetWidth,e=b.offset(),f=e.left,g=e.top,h=g+b.height(),i=f+b.width();h>c&&b.css({top:c-h}),i>d&&b.css({left:"auto",right:"100%"})}},a.contextmenu.hoverOut=function(b){a(b).removeClass("hover").children("ul").hide()},this.items=f.items||[],this.addItem=this.append=this.push=function(a){return this.items[this.items.length]=a,this},this.removeItem=function(a){return delete this.items[a],this},this.disableItem=function(a){return this.items[a].enabled=!1,this},this.show=function(b){function e(b,c){var f='<ul class="'+(c||"")+'">';return b=a.isFunction(b)?b():b,a.each(b,function(b,c){var h,i,j,k,l,m,n,o,p="";switch(g+=1,c){case"line":case"-":case"--":case"---":p='<li class="ue-line"></li>';break;default:if(h=a.isFunction(c)?c():c,j=a.isFunction(h.text)?h.text():h.text,!j||""===j)break;i=a.isFunction(h.icon)?h.icon():h.icon||"",k=a.isFunction(h.disabled)?h.disabled():h.disabled,l=a.isFunction(h.visible)?h.visible():h.visible,m=a.isFunction(h.submenu)?h.submenu():h.submenu,n=k?"null":"$.contextmenu.action("+g+")",o=k?"":'onmouseover="$.contextmenu.hoverIn(this);" onmouseout="$.contextmenu.hoverOut(this);"',a.contextmenu.actions[d][g]=h.click,p=l!==!0?'<li class="'+(k?"disabled":"")+'" '+o+">"+'<span class="ue-item" href="javascript:void(null);" onclick="'+n+';">'+(i.match(/\.(jpg|jpeg|gif|png|img|ico|bmp)$/)||-1!==i.indexOf("sf-server/file/getFile/")?'<span class="ue-icon"><span class="tbc-icon"><img src="'+i+'" style="border:0px; width:16px;" /></span></span>':'<span class="ue-icon"><span class="tbc-icon '+i+'"></span></span>')+'<span class="ue-text">'+j+"</span>"+"</span>"+(m?'<span class="ue-submenu-more">&diams;</span>'+e(m,"ue-submenu"):"")+"</li>":""}f+=p}),f+="</ul>"}var g,h,i,j,k,l,m,n,o,p,q;return q=function(b){setTimeout(function(){var c;for(b.remove(),c=0;d>c;c+=1)delete a.contextmenu.actions[c];b=null},1),a(document).unbind("click.hideContextmenu blur.hideContextmenu"),a.isFunction(f.event.hide)&&f.event.hide.call(a(c))},a(b.target).hasClass("ue-contextmenu")||a(b.target).parents(".ue-contextmenu").size()?(b.stopPropagation(),!1):(a.isFunction(f.event.show)&&f.event.show.call(a(c)),a(document).trigger("click.hideContextmenu"),g=0,h=f.left||b.pageX||b.targetTouches[0],i=f.top||b.pageY||b.targetTouches[0],j=a('<div class="ue-contextmenu"></div>').append(e(this.inherit(b))).css({left:h,top:i,zIndex:window.tbc?window.tbc.getMaxZIndex():"auto"}).appendTo("body"),k=document.documentElement.scrollTop+document.body.offsetHeight,l=document.documentElement.scrollLeft+document.body.offsetWidth,m=i+j.height(),n=h+j.width(),o=m>k?k-j.height():i,p=n>l?l-j.width():h,m>k&&j.css({top:"auto",bottom:"0px"}),n>l&&j.css({left:"auto",right:"0px"}),a(document).bind("click.hideContextmenu blur.hideContextmenu",function(){return a(b.target).hasClass("ue-contextmenu")&&0!==a(b.target).parents(".ue-contextmenu").size()?(b.stopPropagation(),!1):(q(j),void 0)}),this)},this.inherit=function(b){function d(){var b=a(this).data("contextMenuItems"),d=this;b&&b.length>0&&c!==d&&f.push("line"),b&&a.each(b,function(a,b){b.inheritable===!0&&c!==d&&f.push(b)})}var e,f=[];a.each(this.items,function(a,b){f.push(b)}),a(b.target).parents().each(d);try{for(e=window;e&&(a(window.frameElement).parents().each(d),e.parent!==e);)e=e.parent}catch(g){}return f}}}(jQuery),function(a){a.fn.selectArea=function(b){var c={item:this.children(),exclude:null,classSelected:"selected",event:{select:function(){},unselect:function(){}}},d=a.extend({},c,b);return this.each(function(){a(this).bind({"mousedown.selector":function(b){if(!(tbc.msie&&tbc.browserVersion<9&&1!=b.button||(tbc.msie&&tbc.browserVersion>8||!tbc.msie)&&0!=b.button||b.disableSelectArea||b.target!=this)){b.stopPropagation();var c,e=a(this),f=b.pageX,g=b.pageY,h=!1;a(document).bind({"mousemove.selector.a":function(b){a("body").disableSelect(),c=c||a.fn.selectArea.area().appendTo("body"),h=!0;var i=a.fn.selectArea.getOffset(b,f,g);c.css(i),(!tbc.msie||tbc.browserVersion>7)&&a.fn.selectArea.selectElement.call(e,d,b,f,g)},"mouseup.selector.a":function(b){h&&(a.fn.selectArea.selectElement.call(e,d,b,f,g),h=!1),a("body").enableSelect(),c&&c.remove(),a(this).unbind(".selector.a")}})}}})})},a.fn.selectArea.selectElement=function(b,c,d,e){var f=a.fn.selectArea.getOffset(c,d,e);a(this).children(b.item).not(b.exclude).each(function(){tbc.isOverlap(f,this)?(a(this).addClass(b.classSelected),b.event.select.call(this,c)):(a(this).removeClass(b.classSelected),b.event.unselect.call(this,c))})},a.fn.selectArea.getOffset=function(a,b,c){var d=a.pageX,e=a.pageY,f=Math.min(d,b),g=Math.max(d,b),h=Math.min(e,c),i=Math.max(e,c),j=Math.abs(f-g),k=Math.abs(h-i);return{left:f,top:h,right:g,bottom:i,width:j,height:k}},a.fn.selectArea.area=function(){var b=a("<div><div></div></div>"),c=tbc.getMaxZIndex()+1;b.css({backgroung:"transparent",border:"1px dotted #09f",position:"absolute",left:0,top:0,width:0,height:0,zIndex:c}),b.find("div").css({width:"100%",height:"100%",background:"#0af",opacity:.1});try{return b}finally{b=c=null}}}(jQuery),function(a){a.extend(a.fn,{validate:function(b){if(!this.length)return b&&b.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."),void 0;var c=a.data(this[0],"validator");if(c)return c;try{this.attr("novalidate","novalidate")}catch(d){}return c=new a.validator(b,this[0]),a.data(this[0],"validator",c),c.settings.onsubmit&&(this.validateDelegate(":submit","click",function(b){c.settings.submitHandler&&(c.submitButton=b.target),a(b.target).hasClass("cancel")&&(c.cancelSubmit=!0)}),this.submit(function(b){function d(){var d;return c.settings.submitHandler?(c.submitButton&&(d=a("<input type='hidden'/>").attr("name",c.submitButton.name).val(c.submitButton.value).appendTo(c.currentForm)),c.settings.submitHandler.call(c,c.currentForm,b),c.submitButton&&d.remove(),!1):!0}return c.settings.debug&&b.preventDefault(),c.cancelSubmit?(c.cancelSubmit=!1,d()):c.form()?c.pendingRequest?(c.formSubmitted=!0,!1):d():(c.focusInvalid(),!1)})),c},valid:function(){if(a(this[0]).is("form"))return this.validate().form();var b=!0,c=a(this[0].form).validate();return this.each(function(){b&=c.element(this)}),b},removeAttrs:function(b){var c={},d=this;return a.each(b.split(/\s/),function(a,b){c[b]=d.attr(b),d.removeAttr(b)}),c},rules:function(b,c){var d=this[0];if(b){var e=a.data(d.form,"validator").settings,f=e.rules,g=a.validator.staticRules(d);switch(b){case"add":a.extend(g,a.validator.normalizeRule(c)),f[d.name]=g,c.messages&&(e.messages[d.name]=a.extend(e.messages[d.name],c.messages));break;case"remove":if(!c)return delete f[d.name],g;var h={};return a.each(c.split(/\s/),function(a,b){h[b]=g[b],delete g[b]}),h}}var i=a.validator.normalizeRules(a.extend({},a.validator.classRules(d),a.validator.attributeRules(d),a.validator.dataRules(d),a.validator.staticRules(d)),d);if(i.required){var j=i.required;delete i.required,i=a.extend({required:j},i)}return i}}),a.extend(a.expr[":"],{blank:function(b){return!a.trim(""+b.value)},filled:function(b){return!!a.trim(""+b.value)},unchecked:function(a){return!a.checked}}),a.validator=function(b,c){this.settings=a.extend(!0,{},a.validator.defaults,b),this.currentForm=c,this.init()},a.validator.format=function(b,c){return 1===arguments.length?function(){var c=a.makeArray(arguments);return c.unshift(b),a.validator.format.apply(this,c)}:(arguments.length>2&&c.constructor!==Array&&(c=a.makeArray(arguments).slice(1)),c.constructor!==Array&&(c=[c]),a.each(c,function(a,c){b=b.replace(new RegExp("\\{"+a+"\\}","g"),function(){return c})}),b)},a.extend(a.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:a([]),errorLabelContainer:a([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(a){this.lastActive=a,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,a,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(a)).hide())},onfocusout:function(a){this.checkable(a)||!(a.name in this.submitted)&&this.optional(a)||this.element(a)},onkeyup:function(a,b){(9!==b.which||""!==this.elementValue(a))&&(a.name in this.submitted||a===this.lastElement)&&this.element(a)},onclick:function(a){a.name in this.submitted?this.element(a):a.parentNode.name in this.submitted&&this.element(a.parentNode)},highlight:function(b,c,d){"radio"===b.type?this.findByName(b.name).addClass(c).removeClass(d):a(b).addClass(c).removeClass(d)},unhighlight:function(b,c,d){"radio"===b.type?this.findByName(b.name).removeClass(c).addClass(d):a(b).removeClass(c).addClass(d)}},setDefaults:function(b){a.extend(a.validator.defaults,b)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:a.validator.format("Please enter no more than {0} characters."),minlength:a.validator.format("Please enter at least {0} characters."),rangelength:a.validator.format("Please enter a value between {0} and {1} characters long."),range:a.validator.format("Please enter a value between {0} and {1}."),max:a.validator.format("Please enter a value less than or equal to {0}."),min:a.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function b(b){var c=a.data(this[0].form,"validator"),d="on"+b.type.replace(/^validate/,"");c.settings[d]&&c.settings[d].call(c,this[0],b)}this.labelContainer=a(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||a(this.currentForm),this.containers=a(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();
var c=this.groups={};a.each(this.settings.groups,function(b,d){"string"==typeof d&&(d=d.split(/\s/)),a.each(d,function(a,d){c[d]=b})});var d=this.settings.rules;a.each(d,function(b,c){d[b]=a.validator.normalizeRule(c)}),a(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",b).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",b),this.settings.invalidHandler&&a(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),a.extend(this.submitted,this.errorMap),this.invalid=a.extend({},this.errorMap),this.valid()||a(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var a=0,b=this.currentElements=this.elements();b[a];a++)this.check(b[a]);return this.valid()},element:function(b){b=this.validationTargetFor(this.clean(b)),this.lastElement=b,this.prepareElement(b),this.currentElements=a(b);var c=this.check(b)!==!1;return c?delete this.invalid[b.name]:this.invalid[b.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),c},showErrors:function(b){if(b){a.extend(this.errorMap,b),this.errorList=[];for(var c in b)this.errorList.push({message:b[c],element:this.findByName(c)[0]});this.successList=a.grep(this.successList,function(a){return!(a.name in b)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){a.fn.resetForm&&a(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass).removeData("previousValue")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(a){var b=0;for(var c in a)b++;return b},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{a(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(b){}},findLastActive:function(){var b=this.lastActive;return b&&1===a.grep(this.errorList,function(a){return a.element.name===b.name}).length&&b},elements:function(){var b=this,c={};return a(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return!this.name&&b.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in c||!b.objectLength(a(this).rules())?!1:(c[this.name]=!0,!0)})},clean:function(b){return a(b)[0]},errors:function(){var b=this.settings.errorClass.replace(" ",".");return a(this.settings.errorElement+"."+b,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=a([]),this.toHide=a([]),this.currentElements=a([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(a){this.reset(),this.toHide=this.errorsFor(a)},elementValue:function(b){var c=a(b).attr("type"),d=a(b).val();return"radio"===c||"checkbox"===c?a("input[name='"+a(b).attr("name")+"']:checked").val():"string"==typeof d?d.replace(/\r/g,""):d},check:function(b){b=this.validationTargetFor(this.clean(b));var c,d=a(b).rules(),e=!1,f=this.elementValue(b);for(var g in d){var h={method:g,parameters:d[g]};try{if(c=a.validator.methods[g].call(this,f,b,h.parameters),"dependency-mismatch"===c){e=!0;continue}if(e=!1,"pending"===c)return this.toHide=this.toHide.not(this.errorsFor(b)),void 0;if(!c)return this.formatAndAdd(b,h),!1}catch(i){throw this.settings.debug&&window.console&&console.log("Exception occured when checking element "+b.id+", check the '"+h.method+"' method.",i),i}}return e?void 0:(this.objectLength(d)&&this.successList.push(b),!0)},customDataMessage:function(b,c){return a(b).data("msg-"+c.toLowerCase())||b.attributes&&a(b).attr("data-msg-"+c.toLowerCase())},customMessage:function(a,b){var c=this.settings.messages[a];return c&&(c.constructor===String?c:c[b])},findDefined:function(){for(var a=0;a<arguments.length;a++)if(void 0!==arguments[a])return arguments[a];return void 0},defaultMessage:function(b,c){return this.findDefined(this.customMessage(b.name,c),this.customDataMessage(b,c),!this.settings.ignoreTitle&&b.title||void 0,a.validator.messages[c],"<strong>Warning: No message defined for "+b.name+"</strong>")},formatAndAdd:function(b,c){var d=this.defaultMessage(b,c.method),e=/\$?\{(\d+)\}/g;"function"==typeof d?d=d.call(this,c.parameters,b):e.test(d)&&(d=a.validator.format(d.replace(e,"{$1}"),c.parameters)),this.errorList.push({message:d,element:b}),this.errorMap[b.name]=d,this.submitted[b.name]=d},addWrapper:function(a){return this.settings.wrapper&&(a=a.add(a.parent(this.settings.wrapper))),a},defaultShowErrors:function(){var a,b;for(a=0;this.errorList[a];a++){var c=this.errorList[a];this.settings.highlight&&this.settings.highlight.call(this,c.element,this.settings.errorClass,this.settings.validClass),this.showLabel(c.element,c.message)}if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(a=0;this.successList[a];a++)this.showLabel(this.successList[a]);if(this.settings.unhighlight)for(a=0,b=this.validElements();b[a];a++)this.settings.unhighlight.call(this,b[a],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return a(this.errorList).map(function(){return this.element})},showLabel:function(b,c){var d=this.errorsFor(b);d.length?(d.removeClass(this.settings.validClass).addClass(this.settings.errorClass),d.html(c)):(d=a("<"+this.settings.errorElement+">").attr("for",this.idOrName(b)).addClass(this.settings.errorClass).html(c||""),this.settings.wrapper&&(d=d.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(d).length||(this.settings.errorPlacement?this.settings.errorPlacement(d,a(b)):d.insertAfter(b))),!c&&this.settings.success&&(d.text(""),"string"==typeof this.settings.success?d.addClass(this.settings.success):this.settings.success(d,b)),this.toShow=this.toShow.add(d)},errorsFor:function(b){var c=this.idOrName(b);return this.errors().filter(function(){return a(this).attr("for")===c})},idOrName:function(a){return this.groups[a.name]||(this.checkable(a)?a.name:a.id||a.name)},validationTargetFor:function(a){return this.checkable(a)&&(a=this.findByName(a.name).not(this.settings.ignore)[0]),a},checkable:function(a){return/radio|checkbox/i.test(a.type)},findByName:function(b){return a(this.currentForm).find("[name='"+b+"']")},getLength:function(b,c){switch(c.nodeName.toLowerCase()){case"select":return a("option:selected",c).length;case"input":if(this.checkable(c))return this.findByName(c.name).filter(":checked").length}return b.length},depend:function(a,b){return this.dependTypes[typeof a]?this.dependTypes[typeof a](a,b):!0},dependTypes:{"boolean":function(a){return a},string:function(b,c){return!!a(b,c.form).length},"function":function(a,b){return a(b)}},optional:function(b){var c=this.elementValue(b);return!a.validator.methods.required.call(this,c,b)&&"dependency-mismatch"},startRequest:function(a){this.pending[a.name]||(this.pendingRequest++,this.pending[a.name]=!0)},stopRequest:function(b,c){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[b.name],c&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(a(this.currentForm).submit(),this.formSubmitted=!1):!c&&0===this.pendingRequest&&this.formSubmitted&&(a(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(b){return a.data(b,"previousValue")||a.data(b,"previousValue",{old:null,valid:!0,message:this.defaultMessage(b,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(b,c){b.constructor===String?this.classRuleSettings[b]=c:a.extend(this.classRuleSettings,b)},classRules:function(b){var c={},d=a(b).attr("class");return d&&a.each(d.split(" "),function(){this in a.validator.classRuleSettings&&a.extend(c,a.validator.classRuleSettings[this])}),c},attributeRules:function(b){var c={},d=a(b);for(var e in a.validator.methods){var f;"required"===e?(f=d.get(0).getAttribute(e),""===f&&(f=!0),f=!!f):f=d.attr(e),f?c[e]=f:d[0].getAttribute("type")===e&&(c[e]=!0)}return c.maxlength&&/-1|2147483647|524288/.test(c.maxlength)&&delete c.maxlength,c},dataRules:function(b){var c,d,e={},f=a(b);for(c in a.validator.methods)d=f.data("rule-"+c.toLowerCase()),void 0!==d&&(e[c]=d);return e},staticRules:function(b){var c={},d=a.data(b.form,"validator");return d.settings.rules&&(c=a.validator.normalizeRule(d.settings.rules[b.name])||{}),c},normalizeRules:function(b,c){return a.each(b,function(d,e){if(e===!1)return delete b[d],void 0;if(e.param||e.depends){var f=!0;switch(typeof e.depends){case"string":f=!!a(e.depends,c.form).length;break;case"function":f=e.depends.call(c,c)}f?b[d]=void 0!==e.param?e.param:!0:delete b[d]}}),a.each(b,function(d,e){b[d]=a.isFunction(e)?e(c):e}),a.each(["minlength","maxlength"],function(){b[this]&&(b[this]=Number(b[this]))}),a.each(["rangelength"],function(){var c;b[this]&&(a.isArray(b[this])?b[this]=[Number(b[this][0]),Number(b[this][1])]:"string"==typeof b[this]&&(c=b[this].split(/[\s,]+/),b[this]=[Number(c[0]),Number(c[1])]))}),a.validator.autoCreateRanges&&(b.min&&b.max&&(b.range=[b.min,b.max],delete b.min,delete b.max),b.minlength&&b.maxlength&&(b.rangelength=[b.minlength,b.maxlength],delete b.minlength,delete b.maxlength)),b},normalizeRule:function(b){if("string"==typeof b){var c={};a.each(b.split(/\s/),function(){c[this]=!0}),b=c}return b},addMethod:function(b,c,d){a.validator.methods[b]=c,a.validator.messages[b]=void 0!==d?d:a.validator.messages[b],c.length<3&&a.validator.addClassRules(b,a.validator.normalizeRule(b))},methods:{required:function(b,c,d){if(!this.depend(d,c))return"dependency-mismatch";if("select"===c.nodeName.toLowerCase()){var e=a(c).val();return e&&e.length>0}return this.checkable(c)?this.getLength(b,c)>0:a.trim(b).length>0},remote:function(b,c,d){if(this.optional(c))return"dependency-mismatch";var e=this.previousValue(c);if(this.settings.messages[c.name]||(this.settings.messages[c.name]={}),e.originalMessage=this.settings.messages[c.name].remote,this.settings.messages[c.name].remote=e.message,d="string"==typeof d&&{url:d}||d,e.old===b)return e.valid;e.old=b;var f=this;this.startRequest(c);var g={};return g[c.name]=b,a.ajax(a.extend(!0,{url:d,mode:"abort",port:"validate"+c.name,dataType:"json",data:g,success:function(d){f.settings.messages[c.name].remote=e.originalMessage;var g=d===!0||"true"===d;if(g){var h=f.formSubmitted;f.prepareElement(c),f.formSubmitted=h,f.successList.push(c),delete f.invalid[c.name],f.showErrors()}else{var i={},j=d||f.defaultMessage(c,"remote");i[c.name]=e.message=a.isFunction(j)?j(b):j,f.invalid[c.name]=!0,f.showErrors(i)}e.valid=g,f.stopRequest(c,g)}},d)),"pending"},minlength:function(b,c,d){var e=a.isArray(b)?b.length:this.getLength(a.trim(b),c);return this.optional(c)||e>=d},maxlength:function(b,c,d){var e=a.isArray(b)?b.length:this.getLength(a.trim(b),c);return this.optional(c)||d>=e},rangelength:function(b,c,d){var e=a.isArray(b)?b.length:this.getLength(a.trim(b),c);return this.optional(c)||e>=d[0]&&e<=d[1]},min:function(a,b,c){return this.optional(b)||a>=c},max:function(a,b,c){return this.optional(b)||c>=a},range:function(a,b,c){return this.optional(b)||a>=c[0]&&a<=c[1]},email:function(a,b){return this.optional(b)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(a)},url:function(a,b){return this.optional(b)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(a)},date:function(a,b){return this.optional(b)||!/Invalid|NaN/.test(new Date(a).toString())},dateISO:function(a,b){return this.optional(b)||/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(a)},number:function(a,b){return this.optional(b)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(a)},digits:function(a,b){return this.optional(b)||/^\d+$/.test(a)},creditcard:function(a,b){if(this.optional(b))return"dependency-mismatch";if(/[^0-9 \-]+/.test(a))return!1;var c=0,d=0,e=!1;a=a.replace(/\D/g,"");for(var f=a.length-1;f>=0;f--){var g=a.charAt(f);d=parseInt(g,10),e&&(d*=2)>9&&(d-=9),c+=d,e=!e}return 0===c%10},equalTo:function(b,c,d){var e=a(d);return this.settings.onfocusout&&e.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){a(c).valid()}),b===e.val()}}}),a.format=a.validator.format}(jQuery),function(a){var b={};if(a.ajaxPrefilter)a.ajaxPrefilter(function(a,c,d){var e=a.port;"abort"===a.mode&&(b[e]&&b[e].abort(),b[e]=d)});else{var c=a.ajax;a.ajax=function(d){var e=("mode"in d?d:a.ajaxSettings).mode,f=("port"in d?d:a.ajaxSettings).port;return"abort"===e?(b[f]&&b[f].abort(),b[f]=c.apply(this,arguments)):c.apply(this,arguments)}}}(jQuery),function(a){a.extend(a.fn,{validateDelegate:function(b,c,d){return this.bind(c,function(c){var e=a(c.target);return e.is(b)?d.apply(e,arguments):void 0})}})}(jQuery),function(a,b){"use strict";function c(a,b){var c;if("string"==typeof a){for(c=0;c<b.length;c+=1)if(a===b[c])return!1;return!0}}function d(a){a=a.toLowerCase();var b=i.exec(a)||j.exec(a)||k.exec(a)||a.indexOf("compatible")<0&&l.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}}var e,f,g,h=a.navigator.userAgent,i=/(webkit)[ \/]([\w.]+)/,j=/(opera)(?:.*version)?[ \/]([\w.]+)/,k=/(msie) ([\w.]+)/,l=/(mozilla)(?:.*? rv:([\w.]+))?/;!function(){return}(),a.console=a.console||{log:function(){}},a.tbc=e=a.tbc||{nspath:"tbc"},e.namespace=e.ns=function(a,b){a=a.split(/[.\/\\>]/);var c,d,f=b||e,g=f.nspath||"window";for(c=0,d=a.length;d>c;c+=1)(0!==c||"tbc"!==a[c])&&(g+="."+a[c],f[a[c]]=f[a[c]]||{superClass:f},f[a[c]].nspath=f[a[c]].nspath||g,f=f[a[c]]);try{return f}finally{f=g=null}},e.version="1.0",e.self=function(a,b){var c,d,f,g,h=b||[],i=h[h.length-1],j=i&&"object"==typeof i&&i.subclass?i.subclass:a;j&&(j.extend=function(){var a=[this];for(this.parentClass=this.parentClass||[],c=0;c<arguments.length;c+=1){for(g=null,d=0,f=this.parentClass.length;f>d;d+=1)if(this.parentClass[d]===arguments[c]){g=!0;break}g||(this.parentClass.push(arguments[c]),a.push(arguments[c]))}return e.extend.apply(this,a),a=null,this},j.extend(e.ClassManager,e.Event));try{return j}finally{h=i=j=null}},e.extend=function(){var a,b,d,e=arguments,f=e.length,g="nspath,superClass,extend,iid,guid,packageName";if(g=g.split(","),f>1)for(b=1;f>b;b+=1){switch(typeof e[b]){case"object":a=e[b]&&e[b].constructor===Array&&"function"==typeof e[b][0]?new e[b][0](e[b][1],{subclass:e[0]}):e[b];break;case"function":a=new e[b]({subclass:e[0]});break;default:a={}}for(d in a)a.hasOwnProperty(d)&&c(d,g)!==!1&&"undefined"!=typeof a[d]&&(e[0][d]=a[d])}try{return e[0]}finally{e=a=null}},g=d(h),g.browser&&(e[g.browser]=!0,e.browserVersion=g.version),e.touchable="ontouchstart"in document.documentElement,f={getCoordinate:function(a,c){a=b("string"==typeof a?document.getElementById(a):a);var d=a.size()?a.offset():{left:0,top:0},e={left:d.left,top:d.top,bottom:0,right:0,width:a.outerWidth(),height:a.outerHeight()};e.right=e.left+e.width,e.bottom=e.top+e.height;try{return e}finally{e=a=c=d=null}},getScroll:function(a,b){var c={top:0,left:0},d=a.parentNode;if(d||d&&"body"===d.nodeName)return c;for(;d&&d!==(b||document.body);)c.left+=d.scrollLeft||0,c.top+=d.scrollTop||0,d=d.parentNode;try{return c}finally{a=d=b=c=null}},lock:function(a,c){a=b(a||document.body);var d="number"==typeof c?{zIndex:c}:c,e=a.css("position"),f=b.isNumeric(c)?c:this.getMaxZIndex(a),g=a.innerWidth(),h=a.innerHeight(),i=b('<div class="elem_mask"></div>').appendTo(a);d=b.extend({position:"absolute",top:0,left:0,width:g,cursor:"wait",height:h,backgroundColor:"#000",opacity:.2,zIndex:f+1},d),i.css(d),e&&"static"!==e&&""!==e||a.css({position:"relative"});try{return i}finally{a=e=i=f=d=null}},unlock:function(a){a=b(a||document.body),a.children(".elem_mask").fadeOut(200,function(){b(this).remove(),a=null})},percentToInt:function(b,c){return"string"==typeof b&&b.match(/%$/)?a.parseInt(b)/100*c:b},percentToFloat:function(b,c){return"string"==typeof b&&b.match(/%$/)?a.parseFloat(b)/100*c:b},substr:function(a,b){if(!a||!b)return a||"";var c=0,d=0,e="";for(d=0;d<a.length;d+=1){if(c+=a.charCodeAt(d)>255?2:1,c>b)return e;e+=a.charAt(d)}return a},formatString:function(a){if(0===arguments.length)return null;var b,c;for(b=1;b<arguments.length;b+=1)c=new RegExp("\\{"+(b-1)+"\\}","gm"),a=a.replace(c,arguments[b]);return a},stringTemplate:function(a,b,c){if(b&&"object"!=typeof b)return a;c=c||{};var d,e;for(d in b)b.hasOwnProperty(d)&&(e=new RegExp("\\{"+d+"\\}","gm"),a=a.replace(e,c[b[d]]||b[d]||""));return a=a.replace(/\{\w+\}/g,"")},getMaxZIndex:function(a){var c,d=0;a=b(a||"body"),c=a.children(),c.each(function(){var a=b(this).css("zIndex");a=a&&!isNaN(a)?a:0,d=Math.max(d,a)});try{return d}finally{c=a=null}},getElementByMaxZIndex:function(a,c){a=b(a),c=b(c);for(var d,e,f,g,h=a[0],i=c[0];h&&h!==document.body;){for(d=h.offsetParent;d&&i&&i!==document.body;){if(e=i.offsetParent,e&&d===e){f=b(h).css("zIndex"),g=b(i).css("zIndex"),f="auto"===f?0:f,g="auto"===g?0:g;var j=-1===b(d).nextAll().index(e);return h=i=d=e=null,f>g?a:f===g&&j?a:c}i=e}i=c[0],h=d}},getCursorPosition:function(a){var b={text:"",start:0,end:0};if(a.focus(),a.setSelectionRange)b.start=a.selectionStart,b.end=a.selectionEnd,b.text=b.start!==b.end?a.value.substring(b.start,b.end):"";else if(document.selection){var c,d=document.selection.createRange(),e=document.body.createTextRange();for(e.moveToElementText(a),b.text=d.text,b.bookmark=d.getBookmark(),c=0;e.compareEndPoints("StartToStart",d)<0&&0!==d.moveStart("character",-1);c++)"\n"===a.value.charAt(c)&&c++;b.start=c,b.end=b.text.length+b.start}return b},setCursorPosition:function(a,b){if(b||alert("You must get cursor position first."),a.setSelectionRange)a.focus(),a.setSelectionRange(b.start,b.end);else if(a.createTextRange){var c=a.createTextRange();a.value.length===b.start?(c.collapse(!1),c.select()):(c.moveToBookmark(b.bookmark),c.select())}},setCursors:function(a,b,c){a.setSelectionRange?(a.focus(),a.setSelectionRange(b,c)):a.createTextRange&&(range=a.createTextRange(),range.collapse(!0),range.moveEnd("character",c),range.moveStart("character",b),range.select())},setCursor:function(a){var b=this.getCursorPosition(a);this.setCursorPosition(a,b)},batch:function(c,d,f,g,h,i){if(!b.isArray(c))return!1;f=f||0,d=d||1e3,g=g||20;var j=f*d,k=c.length,l=Math.min((f+1)*d,k),m=c.slice(j,l);b.isFunction(h)?h(m,l===k,f):a.console&&console.log("Error: tbc.batch(...). arguments[4] must be a function;"),setTimeout(function(){f+=1,k>d*f&&e.batch(c,d,f,g,h,i)},g),l===k&&b.isFunction(i)&&i.call(this)},seriesForm:function(a){var c,d=b("input,textarea,select",a),e=[],f={},g=[],h={};d.each(function(){var a=this.tagName.toLowerCase();if(this.disabled)return!0;switch(a){case"input":switch(this.type){case"checkbox":f[this.name]=f[this.name]||[],this.checked&&f[this.name].push(this.value);break;case"radio":h[this.name]=h[this.name]||[],this.checked&&h[this.name].push(this.value);break;case"button":case"reset":break;case"submit":if(!b(this).hasClass("trigger_aspnet_event"))break;default:e.push([this.name||this.id,encodeURIComponent(this.value)].join("="))}break;case"textarea":e.push([this.name||this.id,encodeURIComponent(this.value)].join("="));break;case"select":b("option",this).each(function(){this.selected&&g.push(encodeURIComponent(this.value))}),e.push([this.name||this.id,g.join(",")].join("="));break;case"button":e.push([this.name||this.id,encodeURIComponent(this.value)].join("="))}}),d=null;for(c in f)e.push([c,f[c].join(",")].join("="));for(c in h)e.push([c,h[c].join(",")].join("="));try{return e.join("&")}finally{e=h=f=g=null}},replaceUrlParam:function(a,c,d){var e=this.isObject(a)?a:function(){var b={};return b[a]=c,b}(),f=d||document.location.search;f=f.substring(f.indexOf("?")+1).split("&");var g={};return b.each(f,function(){var a=this.split("=");g[a[0]]=a[1]||""}),b.extend(g,e),g},mergerPath:function(a,b){var a=a||document.location.href;if(b.match(/^https?:\/\//)){return b}var c=a.split("?")[0].split("/");if(c.length--,!b.match(/^\/{1}/)){for(;0===b.indexOf("../");)b=b.slice(3),c.length--;b=unescape(c.join("/")+"/"+b)}return b},randomString:function(a){a=a?a-1:15;var b="0123456789abcdefghijklmnoprstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ!@#$%^&*()_+|=-`";return function(a,b,c){return(c?arguments.callee(a,b,c-1):"")+b[a.floor(a.random()*b.length)]}(Math,b,a)},random:function(a,b){switch(arguments.length){case 1:return Math.floor(Math.random()*a+1);case 2:return Math.floor(Math.random()*(b-a+1)+a);default:return 0}},randColor:function(a){return function(a,b,c){return(c>0?arguments.callee(a,b,c-1):"#")+b[a.floor(16*a.random())]}(Math,a||["1","2","3","4","5","6","7","8","9","0","a","b","c","d","e","f"],5)},isSight:function(a){var c=b(a)[0]?b(a)[0].parentNode:a,d=this.getCoordinate(b(a)[0]),e=this.getCoordinate(b(a)[0]);if(d.top<e.top||d.top>e.bottom||d.left<e.left)return!1;try{return!0}finally{c=a=d=e=null}},inArea:function(a,b){var c=this.getCoordinate(a),d=this.getCoordinate(b);if(d.centerX=d.left+d.width/2,d.centerY=d.top+d.height/2,d.left>c.left&&d.right<c.right&&d.top>c.top&&d.bottom<c.bottom)return!0;try{return!1}finally{a=b=c=d=null}},isIncline:function(a,b){var c=this.getCoordinate(a),d=this.getCoordinate(b);if(d.centerX=d.left+d.width/2,d.centerY=d.top+d.height/2,d.centerX>c.left&&d.centerX<c.right&&d.centerY>c.top&&d.centerY<c.bottom)return!0;try{return!1}finally{a=b=c=d=null}},isOverlap:function(a,c){var d=b.isPlainObject(a)?a:this.getCoordinate(a),e=b.isPlainObject(c)?c:this.getCoordinate(c),f=Math.max(d.left,e.left),g=Math.max(d.top,e.top),h=Math.min(d.right,e.right),i=Math.min(d.bottom,e.bottom);try{return h>f&&i>g}finally{a=c=d=e=null}},center:function(a,c,d){a=b(a),c=b(c);var e,f,g,h,i=a.width(),j=a.height(),k=a.css("left"),l=a.css("top");c.size()?(e=c.innerWidth(),f=c.innerHeight(),g=c.scrollTop(),h=c.scrollLeft()):(e=document.documentElement.clientWidth||document.documentElement.offsetWidth,f=document.documentElement.clientHeight||document.documentElement.offsetHeight,g=Math.max(document.documentElement.scrollTop,document.body.scrollTop),h=Math.max(document.documentElement.scrollLeft,document.body.scrollLeft)),k=i>e?h:e/2+h-i/2,l=j>f?g:f/2+g-j/2,a.css({top:l,left:k,width:i,height:j}),d=d||c,b.isFunction(d)&&d.call(a)},array:{unique:function(a){var b,c,d,e,f=[];for(c=0,d=a.length;d>c;c+=1){for(b=!1,e=0;e<f.length;e+=1)a[c]===f[e]&&(b=!0);b!==!0&&f.push(a[c])}try{return f}finally{f=null}},merge:function(){var a,b=arguments,c=b.length,d=[];for(a=0;c>a;a+=1)"object"==typeof b[a]&&b[a].constructor===Array&&(d=d.concat(b[a]));try{return this.unique(d)}finally{b=d=null}},clear:function(a){var b,c,d=[];for(b=0,c=a.length;c>b;b+=1)"undefined"!=typeof a[b]&&d.push(a[b]);try{return d}finally{d=null}},remove:function(a){var c=[],d=arguments;return d=e.isArray(d[1])?[1].concat(d[1]):d,b.each(a,function(a,b){var e,f,g=!1;for(e=1,f=d.length;f>e;e+=1)if(!g&&d[e]===b){g=!0;break}g||c.push(b)}),c},indexOf:function(a,b){var c,d;for(b=b&&"object"==typeof b&&b.constructor===Array?b:[],c=0,d=b.length;d>c;c+=1)if(a===b[c])return c;return-1},sort:function(a,b){var c;c=b&&"desc"===b.toLowerCase()?a.sort(this.sortASC):a.sort(this.sortDESC);try{return c}finally{c=null}},sortASC:function(a,b){return a-b},sortDESC:function(a,b){return b-a}},isNumber:function(a){return"number"==typeof a},isString:function(a){return"string"==typeof a},isFunction:function(a){return"function"==typeof a},isNull:function(a){return null===a},isBool:function(a){return"boolean"==typeof a},isArray:function(a){return!!a&&a.constructor===Array},isObject:function(a){return!!a&&a.constructor===Object},debug:{printObj:function(a,b){var c,d=["{\n"];for(c in a)a.hasOwnProperty(c)&&d.push(b?"    "+c+":"+a[c]+",\n":"    "+c+"; ");return d.push("}"),d.join("")}},log:function(b){a.console&&a.console.log(b)},st:function(){return this.st.time=(new Date).getTime(),this.st.time},et:function(){var a=(new Date).getTime(),b="tbc.et: "+(a-this.st.time);return e.log(b),a-this.st.time}},e.extend(e,f)}(window,jQuery),function(){Function.prototype.bind=Function.prototype.bind||function(){var a=this,b=arguments[0],c=Array.prototype.slice.call(arguments,1);return function(){var d=Array.prototype.concat.apply(c,arguments);return a.apply(b,d)}}}(),function(a,b){"use strict";a.Event=function(){a.self(this,arguments).extend({init:function(){return this.packageName="tbc.Event",this},eventStorage:{},REMOVE:function(a,b){if("function"==typeof b){var c,d,e=this.eventStorage[a],f=[];if("object"==typeof e&&e.constructor===Array){for(c=0,d=e.length;d>c;c+=1)e[c].toString()!==b.toString()&&f.push(e[c]);this.eventStorage[a]=f}}else this.eventStorage[a]=[]},TRIGGER:function(a,b){var c,d,e,f=this.eventStorage[a];if("object"==typeof f&&f.constructor===Array)for(e=f.length-1;e>-1;e-=1)if("function"==typeof f[e])try{if(d=f[e].apply(this,b),c=d===!1?!1:c,d===!0)return!0}catch(g){}return c===!1?!1:c},addEvent:function(a,c){var d,e,f,g,h,i=this.eventStorage;if("object"==typeof a){for(d in a)a.hasOwnProperty(d)&&this.addEvent(d,a[d]);return this}if("function"==typeof c){for(e=b.isArray(i[a])?i[a]:i[a]=[],f=!1,g=0,h=e.length;h>g;g+=1)e[g].toString()===c.toString()&&(f=!0);f||i[a].push(c)}return this},removeEvent:function(a,b){var c,d=this.eventStorage,e=new RegExp("(^|\\.)"+a.substring(a.indexOf(".")+1,a.length)+"($|\\.)");for(c in d)d.hasOwnProperty(c)&&(c===a||c.match(e))&&this.REMOVE(c,b);return d=null,this},triggerEvent:function(a){var b,c,d,e,f,g=[],h=this.eventStorage,i=new RegExp("(^|\\.)"+a.substring(a.indexOf(".")+1,a.length)+"($|\\.)");for(d=1,e=arguments.length;e>d;d+=1)g.push(arguments[d]);for(f in h)if(h.hasOwnProperty(f)&&(f===a||f.match(i))&&(c=this.TRIGGER(f,g),b=c===!1?!1:b,c===!0))return!1;return h=null,b===!1?!1:this}})}}(tbc,jQuery),function(a,b){"use strict";a.TASK_DEPOT=a.TASK_DEPOT||{},a.TASK_DEPOT_COUNT=a.TASK_DEPOT_COUNT||0,a.guid=a.guid||0,a.TASKS=function(b,c){return b?!c||a.TASK_DEPOT[b]?a.TASK_DEPOT[b]||null:(a.TASK_DEPOT[b]=c,a.TASK_DEPOT_COUNT+=1,void 0):null},a.TASKS.set=function(a,b){this(a,b)},a.TASKS.get=function(a){return this(a)},a.TASKS.del=function(b){var c,d,e=a.TASK_DEPOT[b];if(b&&e){try{e.container&&a.TASK_DEPOT[b].container.empty().remove(),e.ui&&a.TASK_DEPOT[b].ui.empty().remove()}catch(f){}c=e.DEPENDS||[],a.TASKS.killAll(c);for(d in e)e.hasOwnProperty(d)&&delete a.TASK_DEPOT[b][d];e=null,delete a.TASK_DEPOT[b]}},a.TASKS.killAll=function(b){if("array"==typeof b&&b.length>0){var c,d,e;for(c in a.TASK_DEPOT)if(a.TASK_DEPOT.hasOwnProperty(c)&&a.TASK_DEPOT[c].DEPENDS)for(d=0,e=b.length;e>d;d++)b[d]===c&&a.TASK_DEPOT[c].DESTROY()}},a.getTaskByElement=function(c){var d=b(c).attr("tbc");return d=d||b(c).parents("[tbc]:first").attr("tbc"),a.TASKS(d)},a.ClassManager=function(){a.self(this,arguments).extend({DEPENDS:[],depend:function(b){return a.isArray(b.DEPENDS)&&b.DEPENDS.push(this.guid),this},dependSelf:function(a){var b="object"==typeof a?a.guid:a;return this.DEPENDS.push(b),this},undepend:function(b){return b&&a.isArray(b.DEPENDS)&&(b.DEPENDS=a.array.remove(b.DEPENDS,this.guid)),this},undependSelf:function(b){var c="object"==typeof b?b.guid:b;return this.DEPENDS=a.array.remove(this.DEPENDS,c),this},INIT:function(){var b=this.constructor;return this.packageName="tbc.ClassManager",b.maxid=b.maxid||0,b.maxid=b.maxid+1,this.iid=b.maxid,b.count=b.count&&!isNaN(b.count)?b.count+1:1,a.guid+=1,this.guid=a.guid,b.instance=b.instance||{},this.CREATE_TIME=(new Date).getTime(),this.INIT_INSTANCE(),this.INSTANCE(this.iid,this),a.TASKS(this.guid,this),this},DESTROY:function(){var b=this.guid,c=this.iid;this.INSTANCE(c,"del"),this.triggerEvent("destroy"),a.TASKS.del(b,!1),b=c=null},INSTANCE:function(a,b){if(!a)return null;if("del"===b&&this.constructor.instance[a])delete this.constructor.instance[a],this.constructor.count=this.constructor.count-1;else{if(!b||this.constructor.instance[a])return this.constructor.instance[a]||null;this.constructor.instance[a]=b}return this},INIT_INSTANCE:function(){this.INSTANCE.get=function(a){return this(a)},this.INSTANCE.set=function(a,b){this(a,b)},this.INSTANCE.del=function(a){this(a,"del")}}}).INIT()}}(tbc,jQuery),function(a,b){"use strict";a.Accordion=function(c){var d={height:320,header:".tbc-accordion-header",container:null,itemHeader:".tbc-accordion-itemHeader",itemContainer:".tbc-accordion-itemContainer",currentCss:"current",active:0,event:{titleClick:function(){},active:function(){},retire:function(){}}},e=a.extend({},d,c);e.height=e.height&&"auto"!==e.height?e.height:356,a.self(this,arguments).extend({init:function(){var a=this;this.addEvent(e.event),this.packageName="tbc.Accordion",e.container?(this.ui=b(e.container),this.container=this.ui):(this.ui=b('<div class="tbc-accordion"></div>'),this.container=this.ui),this.ui.height(e.height),this.crimpleAll(),setTimeout(function(){a.setCurrent(e.active,!0)},100),this.ui.delegate(e.itemHeader,"click touchend dblclick",function(){var c=b(this).prevAll(e.itemHeader).size();a.setCurrent(c)})},getSize:function(){return this.container.children(e.header).size()},appendTo:function(a){var c=b(a);return c.size()&&c.append(this.ui),this},append:function(a){return a.header&&a.container?this.appendItem.apply(this,arguments):this.container.append(a),this
},appendItem:function(a){return a.header&&a.container&&(a.container.hide(),this.container.append(a.header.addClass("tbc-accordion-itemHeader")).append(a.container.addClass("tbc-accordion-itemContainer"))),this},prepend:function(a){return a.header&&a.container?this.prependItem.apply(this,arguments):this.container.prepend(a),this},prependItem:function(a){return a.header&&a.container&&(a.container.hide(),this.container.prepend(a.container.addClass("tbc-accordion-itemContainer")).prepend(a.header.addClass("tbc-accordion-itemHeader"))),this},removeItem:function(a){var c,d;return a&&!isNaN(a)?(c=this.container.children(e.itemHeader).eq(a),d=c.next(e.itemContainer),c.remove(),d.remove()):"string"==typeof a&&(this.container.children(e.itemHeader).each(function(){return-1!==this.innerHTML.indexOf(a)?(c=b(this),!1):void 0}),d=c.next(e.itemContainer),c.remove(),d.remove()),c=d=null,this},getAll:function(){var a,c,d=[],f=this.container.children(e.itemHeader);for(a=0,c=f.length;c>a;a+=1)d.push({header:b(f[a]),container:b(f[a]).next(e.itemContainer)});try{return d}finally{d=f=null}},crimpleAll:function(){var a=this.container,b=a.children(e.itemHeader),c=a.children(e.itemContainer);return b.removeClass(e.currentCss),c.slideUp(),this},getCurrent:function(){var a=this.container.children(e.itemHeader).filter("."+e.currentCss),b=a.next(e.itemContainer);try{return a.size()?{header:a,container:b}:null}finally{a=b=null}},setCurrent:function(a,b){if(a=0!==a&&a?a:0,b||!this.isCurrent(a)){var c=this,d=this.getCurrent(),f=this.findItem(a);d&&f&&(d.header.removeClass(e.currentCss),d.container.stop().animate({height:0},300,function(){d.container.hide(),c.triggerEvent("retire",d),d=null})),f&&(f.header.addClass(e.currentCss),f.container.show().stop().animate({height:this.getAvailableHeight()},300,function(){f.container.css({overflow:"auto",position:""}),c.triggerEvent("active",f),f=null}))}return this},isCurrent:function(a){var b=this.findItem(a);return b&&b.header.hasClass(e.currentCss)},findItem:function(a){var b,c,d,e=this.getAll();if(0===a||a&&!isNaN(a))b=e[a];else for(c=0,d=e.length;d>c;c+=1)if(-1!==e[c].header.innerHTML.indexOf(a)){b=e[c];break}try{return b}finally{e=b=null}},getHeight:function(){return this.container.innerHeight()},setHeight:function(a){var b=this.getHeadersHeight();return this.getCurrent().container.css({height:a-b}),this.ui.css({height:a}),this.trigerEvent("resize",a),this},getAvailableHeight:function(){var a=this.getHeight(),b=this.getHeadersHeight();return a-b},setAvailableHeight:function(a){var b=this.getHeadersHeight();return this.ui.css({height:a+b}),this.getCurrent().container.css({height:a}),this.trigerEvent("resize",a+b),this},getHeadersHeight:function(){var a,c,d=0,f=this.container.children(e.itemHeader);for(a=0,c=f.length;c>a;a+=1)d+=b(f[a]).outerHeight();try{return d}finally{d=f=a=c=null}}}).init()}}(tbc,jQuery),function(a,b){"use strict";a.accordionSelector=function(c){var d,e,f=a.self(this,arguments),g={autoSelect:!0,container:null,includeChild:!1,multiple:!0,height:356,treeOptions:{},accordionOptions:{},items:[{title:"部门",type:"ajax",nodeType:"ORGANIZATION",content:"",active:!0,options:{}},{title:"岗位",type:"ajax",nodeType:"POSITION_CATEGORY",content:"",options:{}},{title:"群组",type:"ajax",nodeType:"GROUP_CATEGORY",content:"",options:{}}],event:{}},h=a.extend({},g,c),i=0;f.packageName="tbc.orgSelector",f.addEvent(h.event),h.container?(f.container=b(h.container),f.ui=h.ui?b(h.ui):f.container):(f.container=b('<div class="tbc-orgSelector"></div>'),f.ui=h.ui?b(h.ui):f.container),e=f.container.css("position"),"position"!==e&&"fixed"!==e&&f.container.css("position","relative"),h.accordionOptions=b.extend({height:h.height},h.accordionOptions),d=new a.Accordion(h.accordionOptions),f.accordion=d,d.depend(f),d.appendTo(f.container),d.addEvent({active:function(c){var d,e,g,i,j;try{f.includeChild=c.header.find("[name^='includeChild']")[0].checked}catch(k){}if(c&&c.container)if(c.container.data("rendered")||c.container.data("rendering")){if(h.autoSelect!==!1){if(d=c.container.data("treeId"),e=a.TASKS(d),!e)return;e.setCurrent()}}else i=c.container.data("options"),"ajax"===i.type&&"string"==typeof i.content?(j=b("<div/>").html("loading...").css({margin:"1em",textAlign:"center"}).appendTo(c.container),g=b.extend({},i.treeOptions,{nodeType:i.nodeType,url:i.content,container:c.container,lazyLevel:3,param:{nodeType:i.nodeType}}),e=new a.Tree(g),e.depend(f),e.addEvent({afterRender:function(){var b=this;h.autoSelect!==!1&&setTimeout(function(){b.setCurrent()},100),j.remove(),a.unlock(c.container),c.container.data("rendering",!1),f.triggerEvent("afterLoad",c),j=c=null},select:function(a,b,c,d){f._selected=a,f.triggerEvent("select",a,a.tp||a.nodeType,d),f.triggerEvent("selected",a,a.tp||a.nodeType,d)},deselect:function(a){return f.triggerEvent("deselect",a)},beforeLoad:function(){a.lock(c.container,10)},afterLoad:function(){a.unlock(c.container,10)}}),c.container.data("treeId",e.guid),setTimeout(function(){e.load(),e=null},1)):"object"==typeof i.content&&c.container.append(i.content),c.container.data("rendered",!0);f.triggerEvent("active",c)}}),f.extend({appendTo:function(a){b(a).size()&&this.ui.appendTo(a)},prependTo:function(a){b(a).size()&&this.ui.prependTo(a)},getCurrent:function(){return this.accordion.getCurrent()},getSelected:function(){return this._selected}}),b.each(h.items,function(a){var c,e,g,j=b('<h3 class="tbc-accordion-itemHeader"/>').html(this.title).appendTo(f.container),k=b('<div class="tbc-accordion-itemContainer"/>').appendTo(f.container).hide(),l=this.icon?this.icon.match(/(jpg|jpeg|png|gif|bmp)/)?'<i class="tbc-icon"><img src="'+this.icon+'"/></i>':'<i class="tbc-icon '+this.icon+'"></i>':null;l&&j.prepend(l),e=this.includeChild||h.includeChild&&"ORGANIZATION"===this.nodeType||c,g=b('<div class="tbc-accordion-includeChild"></div>').html('<input type="checkbox" name="includeChild_'+a+'" '+(e?' checked="checked" ':"")+' /><label for="includeChild_'+a+'">包含子类</label>'),"undefined"!=typeof e?g.hide().css({display:"block"}):g.show().css({display:"none"}),g.find("[name='includeChild_"+a+"']").click(function(){f.includeChild=this.checked,f.triggerEvent("includechild",this.checked)}),j.append(g),k.data("options",this),d.appendItem({header:j,container:k}),j=k=l=null,this.active&&(i=a)}),d.setCurrent(i)}}(tbc,jQuery),function(a,b){"use strict";a.dialog=function(c,d){if(c&&c instanceof Object&&!c.size&&(d=c,c=d.html),!(this instanceof a.dialog))return new a.dialog(c,d);var e=a.extend({name:"提示",width:320,height:190,scrolling:!1,target:"body",modal:!0},d);return a.self(this,arguments).extend([a.Panel,e],{initDialog:function(){var a,d,f=this,g=b('<div style="overflow:auto;"></div>'),h=[];if(g.append(c||e.html),this.append(g),e.buttons instanceof Object){for(d in e.buttons)e.buttons.hasOwnProperty(d)&&h.push('<button class="tbc-button" data-type="'+d+'">'+d+"</button>");h.length>0&&(a=b('<div style="text-align:right; padding:10px; background-color:#f6f6f6;"></div>'),a.html(h.join(""))),a.on("click","button",function(){var a=this.getAttribute("data-type"),c=e.buttons[a];b.isFunction(c)&&c.call(f)}),this.container.css({overflow:"hidden"}),this.append(a)}return this.container=g,this.show(),this.initModal(),this.addEvent({close:function(){var a=this.mask;a&&b.isFunction(a.fadeOut)&&a.fadeOut(function(){a.remove()})},resize:function(c){var d,e=this.part.header.height(),f=this.part.footer.height();d=a&&b.isFunction(a.height)?c.height-e-f-a.outerHeight():"100%",g.height(d)}}),this},initModal:function(){var a=this;e.modal&&(this.mask=b('<div class="tbc-mask"/>').css({position:"absolute",zIndex:(this.ui.css("zIndex")||1)-1,backgroundColor:"#000",opacity:.2,left:0,top:0,width:"100%",height:"100%"}).insertBefore(this.ui).bind("click",function(){a.flash()}))}}).initDialog().triggerEvent("resize",e),this},a.confirm=function(c,d,e){var f={};return e=e instanceof Object?e:{},f[e.verifyText||"确认"]=function(){b.isFunction(d)&&d.call(this),this.close()},f[e.cancelText||"取消"]=function(){this.close()},e.buttons=f,e.name=e.name||e.title||"请您确认",c=b('<div style="padding:24px;"></div>').empty().append(c),a.dialog(c,e)},a.alert=function(c,d,e){var f={};return e=e instanceof Object?e:{},f[e.verifyText||"确认"]=function(){b.isFunction(d)&&d.call(this),this.close()},e.buttons=f,e.name=e.name||e.title||"提示",c=b('<div style="padding:24px;"></div>').append(c),a.dialog(c,e)}}(window.tbc,window.jQuery,window.URLS),tbc.Button=function(a){var b=tbc.self(this,arguments);b.extend(tbc.Event),b.extend(tbc.ClassManager),b.packageName="tbc.Button";var c={border:!0,icon:null,text:"按钮",click:null,target:null},d=tbc.extend({},c,a);b.ui=$('<button class="">        <span class="tbc-icon icon-application_windows_add"><img src="" onerror="this.style.display=\'none\'" style="width:16px; height:16px;"/></span>        <span class="tbc-button-text"></span>    </button>').addClass(d.border?"tbc-button":"tbc-button-link");var e=b.ui.find("img"),f=b.ui.find(".tbc-button-text");b.icon=function(a){return a&&"string"==typeof a?(a.match(/\.(jpg|jpeg|gif|png|img|bmp|ico)$/)||-1!==a.indexOf("sf-server/file/getFile/")?e.show().attr("src",a).parent().removeAttr("class").addClass("tbc-icon"):e.hide().parent().removeAttr("class").addClass("tbc-icon").addClass(a),b):d.icon},b.text=function(a){return a&&"string"==typeof a?(f.html(a),d.text=a,b):d.text},b.disable=function(){return b.disabled=!0,b.ui.addClass("tbc-button-disabled"),b.triggerEvent("disable"),b},b.enable=function(){return b.disabled=!1,b.ui.removeClass("tbc-button-disabled"),b.triggerEvent("enable"),b},b.click=function(){return b.disabled||($.isFunction(d.click)&&d.click.call(b),b.triggerEvent("click")),b},b.appendTo=function(a){return a=a&&a.container?a.container:a,b.ui.appendTo(a),b.triggerEvent("append",a),b},b.remove=function(){b.ui.remove(),b.triggerEvent("remove")},b.icon(d.icon),b.text(d.text),b.appendTo(d.target),b.ui.click(function(){b.click()})},function(a,b){"use strict";b("html,body").css({overflow:"hidden",background:"transparent"}),a.blendSelector=function(c){function d(a,b){var c=h.ui.find(".searchKeywords");b&&0!==b.length&&b!==c[0].title?"0"===a?(h._ajaxDataAvailable.keyword=b,h._ajaxDataSelected.keyword=""):"1"===a&&g.itemSelectorOptions.autoSave!==!1&&g.itemSelectorOptions.lazy!==!0&&(h._ajaxDataAvailable.keyword="",h._ajaxDataSelected.keyword=b):(h._ajaxDataAvailable.keyword="",h._ajaxDataSelected.keyword=""),h.pageSelected(1),h.pageAvailable(1)}var e=a.self(this,arguments),f={max:0,title:"选择人员",verifyButton:!0,cancelButton:!0,verifyText:"确定",cancelText:"取消"},g=a.extend({},f,c);e.addEvent(g.event),e.packageName="tbc.blendSelector",e.ui=b('<div class="tbc-blendSelector"></div>').html('<div role="header" class="tbc-blendSelector-header"><h3>请选择人员</h3><span role="tips"><i class="tbc-icon icon-info"></i>友情提醒:转入”已选人员“的名单即时生效,系统自动保存</span> </div><div role="org" class="tbc-blendSelector-organize"></div><div role="items" class="tbc-blendSelector-items"></div><div style="clear:both;"></div><div role="footer" class="tbc-blendSelector-footer">    <a role="verify" class="tbc-button tbc-button-blue" type="button"><span class="tbc-text">'+(g.verifyText||"确定")+"</span></a>"+'    <a role="cancel" class="tbc-button tbc-button-blue" type="button"><span class="tbc-text">'+(g.cancelText||"取消")+"</span></a>"+"</div>"),e.container=e.ui,e.part={},e.ui.find("[role]").each(function(){var a=this.getAttribute("role");e.part[a]=b(this)}),g.itemSelectorOptions=b.extend({},g.itemSelectorOptions,{vauleSetFormater:function(a){var b,c={};for(b in a)if(a.hasOwnProperty(b))switch(b){case"nm":case"text":c.nm=a.nm||a.text,c.text=a.nm||a.text;break;case"selected":c[b]=a[b]||this._cache.selected.names[a.id]?" checked":"";break;case"rnm":c[b]=a[b]?" ("+a[b]+")":"";break;case"icn":c[b]=a[b]?" ("+a[b]+")":"";break;default:c[b]=a[b]}c.selected=a.selected||this._cache.selected.names[a.id]?" checked":"";try{return c}finally{c=null}}}),g.orgSelectorOptions=b.extend(g.orgSelectorOptions||{},{height:365});var h=new a.itemSelector(g.itemSelectorOptions),i=new a.accordionSelector(g.orgSelectorOptions);h.prepend('<div class="tbc-itemSelector-header">    <div class="padding">        <select name="accountStatus">            <option value="ALL" selected="selected">全部人员</option>            <option value="ENABLE">激活人员</option>            <option value="FORBIDDEN">冻结人员</option>        </select>        <div class="abs_right">            <input type="text" value="工号/姓名/用户名" title="工号/姓名/用户名" class="tbc-inputer searchKeywords">            <select name="which">                <option value="0">待选人员</option>                <option value="1">已选人员</option>            </select>            <a class="tbc-button searchButton" type="button">筛选</a>        </div>     </div></div>'),(g.itemSelectorOptions.autoSave===!1||g.itemSelectorOptions.lazy===!0)&&e.part.tips.hide(),h.addEvent({beforeSave:function(){return a.lock(e.ui),!1},afterSave:function(){return a.unlock(e.ui),!1}}),h.ui.find("select[name='accountStatus']").val(g.accountStatus).change(function(){h._ajaxDataAvailable.accountStatus=this.value,h._ajaxDataSelected.accountStatus=this.value,h.pageAvailable()}),g.accountStatus&&(h._ajaxDataAvailable.accountStatus=g.accountStatus,h._ajaxDataSelected.accountStatus=g.accountStatus),(g.accountStatus||g.accountStatus&&"all"!==g.accountStatus.toLowerCase())&&h.ui.find("select[name='accountStatus']").hide(),h.ui.find(".searchKeywords").keyup(function(a){var c=b.trim(this.value);c!==this.title&&(h._ajaxDataAvailable.keyword=c,h._ajaxDataSelected.keyword=c),13===a.keyCode&&h.ui.find(".searchButton").trigger("click")}).focus(function(){var a=b.trim(this.value);a===this.title&&(this.value="")}).blur(function(){var a=b.trim(this.value);""===a&&(this.value=this.title)}),h.ui.find("select[name='which']").change(function(){var a=this.value,b=h.ui.find(".searchKeywords").val();d(a,b)}),h.ui.find(".searchButton").click(function(a){a.preventDefault();var b=h.ui.find("select[name='which']").val(),c=h.ui.find(".searchKeywords").val();d(b,c)}),g.itemSelectorOptions.deletable===!1&&(b(h.part.removeAll).hide(),b(h.part.operaRemoveSelected).attr("disabled","disabled").addClass("tbc-button-disabled"),b(h.part.operaRemoveCurrPage).attr("disabled","disabled").addClass("tbc-button-disabled")),h.depend(e),i.depend(e),h.appendTo(e.part.items),i.appendTo(e.part.org),i.addEvent({select:function(a,b){h._ajaxDataAvailable.nodeType=b,h._ajaxDataAvailable.nodeId=a.id,h.pageAvailable(1)},includechild:function(a){h._ajaxDataAvailable.includeChild=a}}),e.extend({append:function(a){this.container.append(a)},prepend:function(a){this.container.prepend(a)},appendTo:function(a){this.ui.appendTo(a)},prependTo:function(a){this.ui.prependTo(a)},close:function(){e.triggerEvent("close"),this.DESTROY()},getSelected:function(){var a,b=h._cache.selected.names,c=[];for(a in b)b.hasOwnProperty(a)&&c.push(b[a]);return c}}),g.verifyButton||e.part.verify.hide(),g.cancelButton||e.part.cancel.hide(),e.part.verify.click(function(){var c=e.getSelected(),d=g.itemSelectorOptions.autoSave,f=g.itemSelectorOptions.lazy,h=[];if("undefined"!=typeof d&&d!==!0||f!==!0||!g.lazyUrl)e.triggerEvent("verify",c)!==!1&&(e.ui.remove(),e.close());else{b.each(c,function(){h.push(this.userId)});var i=g.itemSelectorOptions.post||{};i[g.itemSelectorOptions.postKey||"userIds"]=h.join(","),b.ajax({url:g.lazyUrl,data:i,type:"post",dataType:"json",beforeSend:function(){a.lock(e.ui)},complete:function(){a.unlock(e.ui)},success:function(){e.triggerEvent("verify",c)!==!1&&(e.ui.remove(),e.close())}}),i=null}}),e.part.cancel.click(function(){var a=e.getSelected();e.triggerEvent("cancel",a)!==!1&&(e.ui.remove(),e.close())})}}(tbc,jQuery),function(a,b){"use strict";a("html,body").css({overflow:"hidden",background:"transparent"}),b.CourseSelector=function(c){var d,e,f,g={selectButtons:function(){}},h=b.extend({},g,c),i=b.self(this,arguments);i.addEvent(h.event),i.packageName="tbc.CourseSelector",i.ui=a('<div class="tbc-blendSelector tbc-courseSelector"></div>').html('<div role="header" class="tbc-blendSelector-header"><h3>请选择资源</h3><span role="tips"><i class="tbc-icon icon-info"></i>友情提醒:转入”已选“栏的选项即时生效,系统自动保存</span> </div><div role="org" class="tbc-blendSelector-organize"></div><div role="items" class="tbc-blendSelector-items"></div><div style="clear:both;"></div><div role="footer" class="tbc-blendSelector-footer">    <a role="verify" class="tbc-button tbc-button-blue" type="button"><span class="tbc-text">'+(h.verifyText||"确定")+"</span></a>"+'    <a role="cancel" class="tbc-button tbc-button-blue" type="button"><span class="tbc-text">'+(h.cancelText||"取消")+"</span></a>"+"</div>"),i.container=i.ui,i.part={},i.ui.find("[role]").each(function(){var b=this.getAttribute("role");i.part[b]=a(this)}),(h.itemSelectorOptions.autoSave===!1||h.itemSelectorOptions.lazy===!0)&&i.part.tips.hide(),h.itemSelectorOptions=a.extend({},h.itemSelectorOptions,{isOrganize:!0,textTransform:{COURSE:"[课] ",SUBJECT:"[专题] "},post:h.post,itemTemplate:'<li data-id="{id}" title="{title}" class="{selected} {checked}"><i>{title}</i></li>',dataTemplate:{id:"id",text:"title",title:"title"},itemTemplateSelected:'<li data-id="{id}" title="{title}"><i>{type}{title}</i></li>',vauleSetFormater:function(a){var b,c=(e.getCurrent().container.data("options").nodeType,{});for(b in a)if(a.hasOwnProperty(b))switch(b){case"type":c.type=a.type||"COURSE";break;case"nm":case"text":case"title":c.nm=a.nm||a.text||a.title,c.text=a.nm||a.text||a.title,c.title=a.nm||a.text||a.title;break;case"selected":c[b]=a[b]||this._cache.selected.names[a.id]?" checked":"";break;default:c[b]=a[b]}try{return c}finally{c=null}},postFormater:function(a){var b,c,d,e=[];for(c=0,d=a.length;d>c;c+=1)b=a[c].tp||"COURSE",e.push([b,a[c].id].join(":"));return e.join(",")},itemDataFormater:function(a){var b,c,d=e.getCurrent().container.data("options").nodeType;for(e.getSelected()||{},b=0,c=a.length;c>b;b+=1)switch(a[b].tp||d){case"SUBJECT":a[b].tp=a[b].type||"SUBJECT",a[b].nm=a[b].title,delete a[b].rid,delete a[b].rnm;break;default:a[b].tp=a[b].type||"COURSE",a[b].nm=a[b].title}return a}}),h.orgSelectorOptions=a.extend({},h.orgSelectorOptions,{autoSelect:!1}),f=h.itemSelectorOptions.dataTemplate,h.orgSelectorOptions=a.extend(h.orgSelectorOptions||{},{height:365}),d=new b.itemSelector(h.itemSelectorOptions),e=new b.accordionSelector(h.orgSelectorOptions),d.prepend('<div class="tbc-itemSelector-header"><div class="padding">   <div class="abs_right">        <input type="text" value="输入课程编号或名称" title="输入课程编号或名称" class="tbc-inputer searchKeywords">        <select name="device" style="display:'+(h.itemSelectorOptions.device!==!1?"":"none")+';">'+'            <option value="">全部终端</option>'+'            <option value="COMPUTER">PC</option>'+'            <option value="IPHONE">iPhone</option>'+'            <option value="IPAD">iPad</option>'+'            <option value="ANDROIDPHONE">Android</option>'+'            <option value="ANDROIDPAD">Android Pad</option>'+"        </select>"+'        <a class="tbc-button searchButton" type="button">筛选</a>'+"    </div>"+"</div>"+"</div>"),d.addEvent({beforeSave:function(){return b.lock(i.ui),!1},afterSave:function(){return b.unlock(i.ui),!1}}),d.ui.on("click",".searchButton",function(){var b=d.ui.find("input.searchKeywords"),c=b.val(),e=d.ui.find("select[name='device']").val();a.trim(c)!==b.attr("title")?d._ajaxDataAvailable.keyword=c:delete d._ajaxDataAvailable.keyword,h.itemSelectorOptions.device!==!1?d._ajaxDataAvailable.device=e:delete d._ajaxDataAvailable.device,d.pageAvailable(1)}),d.ui.find("input.searchKeywords").bind({focus:function(){a.trim(this.value)===this.title&&(this.value="")},blur:function(){""===a.trim(this.value)&&(this.value=this.title)}}),i.extend({appendTo:function(){}}),d.depend(i),e.depend(i),a(d.part.addAll).hide(),h.itemSelectorOptions.deletable===!1&&(a(d.part.removeAll).hide(),a(d.part.operaRemoveSelected).attr("disabled","disabled").addClass("tbc-button-disabled"),a(d.part.operaRemoveCurrPage).attr("disabled","disabled").addClass("tbc-button-disabled")),d.appendTo(i.part.items),d.loadAvailableByPage(1),e.appendTo(i.part.org),e.addEvent({afterLoad:function(a){var c=(a.container.data("options"),a.container.data("treeId")),d=b.TASKS(c);d&&"function"==typeof d.setCurrent&&d.setCurrent()},active:function(a){var c=(a.container.data("options"),a.container.data("treeId")),d=b.TASKS(c);d&&"function"==typeof d.setCurrent&&d.setCurrent()},check:function(a){var b,c,f,g,h;for(this.getCurrent().container.data("options").nodeType,b=0,c=a.length;c>b;b+=1)f=e.includeChild?"含子类":"",g=a[b].property,h=[{id:g.id,tp:g.tp,nm:g.nm||g.text,ic:e.includeChild,icn:f,rnm:""}],g.id&&!d._cache.available.names[g.id]&&d.addAvailableItem(h)},deselect:function(a){var b,c;for(b=0,c=a.length;c>b;b+=1)d.removeAvailableItem(a[b].property.id)},select:function(a,b){d._ajaxDataAvailable.nodeType=b,d._ajaxDataAvailable.nodeId=a.id,d.loadAvailableByPage(1)},includechild:function(a){d._ajaxDataAvailable.includeChild=a}}),d.addEvent({select:function(){var a=e.getCurrent();a.container.data("options")},beforeAvailableLoad:function(){var a=e.getCurrent();a.container.data("options")}}),i.extend({append:function(a){this.container.append(a)},prepend:function(a){this.container.prepend(a)},appendTo:function(a){this.ui.appendTo(a)},prependTo:function(a){this.ui.prependTo(a)},close:function(){i.triggerEvent("close"),this.DESTROY()},getSelected:function(){var a,b=d._cache.selected.names,c=[];for(a in b)b.hasOwnProperty(a)&&b[a]&&c.push(b[a]);return c}}),h.verifyButton||i.part.verify.hide(),h.cancelButton||i.part.cancel.hide(),i.part.verify.click(function(){var c,d=i.getSelected(),e=h.itemSelectorOptions.autoSave,f=h.itemSelectorOptions.lazy;e!==!1&&f===!0&&h.lazyUrl?(c=h.itemSelectorOptions.post||{},c[h.itemSelectorOptions.postKey||"courseIds"]=h.itemSelectorOptions.postFormater(d),a.ajax({url:h.lazyUrl,data:c,type:"post",dataType:"json",beforeSend:function(){b.lock(i.ui)},complete:function(){b.unlock(i.ui)},success:function(){i.triggerEvent("verify",d)!==!1&&(i.ui.remove(),i.close())}}),c=null):i.triggerEvent("verify",d)!==!1&&(i.ui.remove(),i.close())}),i.part.cancel.click(function(){var a=i.getSelected();i.triggerEvent("cancel",a)!==!1&&(i.ui.remove(),i.close())})}}(jQuery,tbc),$("html,body").css({overflow:"hidden",background:"transparent"}),tbc.organizationSelector=function(a){var b=tbc.self(this,arguments),c={},d=tbc.extend({},c,a);b.addEvent(d.event),b.packageName="tbc.organizationSelector",b.ui=$('<div class="tbc-blendSelector tbc-organizationSelector"></div>').html('<div role="header" class="tbc-blendSelector-header"><h3>请选择组织</h3><span role="tips"><i class="tbc-icon icon-info"></i>友情提醒:转入”已选“栏的选项即时生效,系统自动保存</span> </div>		<div role="org" class="tbc-blendSelector-organize"></div>		<div role="items" class="tbc-blendSelector-items"></div>		<div style="clear:both;"></div>		<div role="footer" class="tbc-blendSelector-footer">			<a role="verify" class="tbc-button tbc-button-blue" type="button"><span class="tbc-text">'+(d.verifyText||"确定")+'</span></a>			<a role="cancel" class="tbc-button tbc-button-blue" type="button"><span class="tbc-text">'+(d.cancelText||"取消")+"</span></a>		</div>	"),b.container=b.ui,b.part={},b.ui.find("[role]").each(function(){var a=this.getAttribute("role");b.part[a]=$(this)}),(d.itemSelectorOptions.autoSave===!1||d.itemSelectorOptions.lazy===!0)&&b.part.tips.hide(),d.itemSelectorOptions=$.extend({},d.itemSelectorOptions,{isOrganize:!0,textTransform:{ORGANIZATION:"[部] ",POSITION:"[岗] ",POSITION_CATEGORY:" ",GROUP:"[群] ",GROUP_CATEGORY:" "},post:d.post,itemTemplate:'<li data-id="{id}" title="{np}"><i>{nm}</i></li>',itemTemplateSelected:'<li data-id="{id}" title="{np}"><i>{tp}{nm}{parentheses1}{rnm}{icn}{parentheses2}</i></li>',dataTemplate:{id:"id",text:"nm",title:"np"},vauleSetFormater:function(a){var b=(g.getCurrent().container.data("options").nodeType,{});for(var c in a)switch(c){case"nm":case"text":b.nm=a.nm||a.text,b.text=a.nm||a.text;break;case"selected":b[c]=a[c]||this._cache.selected.names[a.id]?" checked":"";break;case"rnm":b[c]=a[c]?a[c]:"";break;case"icn":b[c]=a[c]?a[c]:"";break;default:b[c]=a[c]}try{return b}finally{b=null}},postFormater:function(a){for(var b=[],c=0,d=a.length;d>c;c++)b.push([a[c].ic,a[c][e.id],a[c].tp||"ORGANIZATION",a[c].rid].join(":"));return b.join(",")},itemDataFormater:function(a){for(var b=g.getCurrent().container.data("options").nodeType,c=g.getSelected()||{},d=0,e=a.length;e>d;d++)switch(a[d].tp||b){case"POSITION":a[d].rnm=a[d].rnm||c.nm||c.text,a[d].rid=a[d].rid||c.id,a[d].tp=a[d].tp||"POSITION",a[d].rnm&&(a[d].parentheses1=" (",a[d].parentheses2=")"),a[d].ic=g.includeChild,a[d].ic&&(a[d].parentheses1=" (",a[d].parentheses2=")");break;case"ORGANIZATION":a[d].tp=a[d].tp||"ORGANIZATION",delete a[d].rid,delete a[d].rnm,a[d].ic&&(a[d].parentheses1=" (",a[d].parentheses2=")");break;case"GROUP":}return a}}),d.orgSelectorOptions=$.extend({},d.orgSelectorOptions,{autoSelect:!1,height:365});var e=d.itemSelectorOptions.dataTemplate,f=new tbc.itemSelector(d.itemSelectorOptions),g=new tbc.accordionSelector(d.orgSelectorOptions);f.addEvent({beforeSave:function(){return tbc.lock(b.ui),!1},afterSave:function(){return tbc.unlock(b.ui),!1}}),b.extend({appendTo:function(){}}),f.depend(b),g.depend(b),$(f.part.operaAddCurrPage).hide(),$(f.part.operaRemoveCurrPage).hide(),$(f.part.operaRemoveCurrPage).hide(),$(f.part.addAll).hide(),$(f.part.availContainer).parent().hide(),$(f.part.selectedContainer).parent().css({width:410}),d.itemSelectorOptions.deletable===!1&&($(f.part.removeAll).hide(),$(f.part.operaRemoveSelected).attr("disabled","disabled").addClass("tbc-button-disabled"),$(f.part.operaRemoveCurrPage).attr("disabled","disabled").addClass("tbc-button-disabled")),f.appendTo(b.part.items),f.loadAvailableByPage(1),g.appendTo(b.part.org),g.addEvent({afterLoad:function(a){var b=a.container.data("options");if("POSITION"===b.nodeType){var c=a.container.data("treeId"),d=tbc.TASKS(c);d&&d.setCurrent()}},active:function(a){var b=a.container.data("options");if("POSITION"===b.nodeType){var c=$(f.part.selectedContainer).parent();c.outerWidth(),$(f.part.selectedContainer).parent().css({width:203}),c.css({width:203}).show(),$(f.part.availContainer).parent().show()}else{var d=$(f.part.availContainer).parent();d.hide(),d.find("li.selected").removeClass("selected"),$(f.part.selectedContainer).parent().css({width:418})}if("POSITION"===b.nodeType){var e=a.container.data("treeId"),g=tbc.TASKS(e);g&&g.setCurrent()}f.clearAvailable()},check:function(a){this.getCurrent().container.data("options").nodeType;for(var b=0,c=a.length;c>b;b++){var d=g.includeChild?"含子类":"",e=a[b].property,h=[{id:e.id,tp:e.tp,nm:e.nm||e.text,ic:g.includeChild,icn:d,rnm:""}];e.id&&!f._cache.available.names[e.id]&&f.addAvailableItem(h)}},deselect:function(a){for(var b=0,c=a.length;c>b;b++)f.removeAvailableItem(a[b].property.id)},select:function(a,b){f._ajaxDataAvailable.nodeType=b,f._ajaxDataAvailable.nodeId=a.id;var c=this.getCurrent().container.data("options").nodeType;if(a.tp===c||!a.tp&&"POSITION"!==c||"ORGANIZATION"===c||"GROUP"===c&&"GROUP"===a.tp)if("POSITION"===a.tp);else{var d,e;a.tp&&"ORGANIZATION"!==a.tp?e=[{id:a.id,tp:a.tp,nm:a.nm||a.text,ic:g.includeChild,rnm:""}]:(d=g.includeChild?"含子类":"",e=[{id:a.id,tp:a.tp,nm:a.nm||a.text,ic:g.includeChild,icn:d,rnm:""}]),f.addAvailableItem(e)}else"POSITION"===c&&f.loadAvailableByPage(1)},includechild:function(a){f._ajaxDataAvailable.includeChild=a}}),f.addEvent({select:function(){var a=g.getCurrent(),b=a.container.data("options");"POSITION"!==b.nodeType&&this.clearAvailable()},beforeAvailableLoad:function(){var a=g.getCurrent(),b=a.container.data("options");return"POSITION"!==b.nodeType?!1:void 0}}),b.extend({append:function(a){this.container.append(a)},prepend:function(a){this.container.prepend(a)},appendTo:function(a){this.ui.appendTo(a)},prependTo:function(a){this.ui.prependTo(a)},close:function(){b.triggerEvent("close"),this.DESTROY()},getSelected:function(){var a=f._cache.selected.names,b=[];for(var c in a)c&&a[c]&&b.push(a[c]);return b}}),d.verifyButton||b.part.verify.hide(),d.cancelButton||b.part.cancel.hide(),b.part.verify.click(function(){var a=b.getSelected(),c=d.itemSelectorOptions.autoSave,e=d.itemSelectorOptions.lazy;if(c!==!1&&e===!0&&d.lazyUrl){var f=d.itemSelectorOptions.post||{};f[d.itemSelectorOptions.postKey||"orgIds"]=d.itemSelectorOptions.postFormater(a),$.ajax({url:d.lazyUrl,data:f,dataType:"json",type:"post",beforeSend:function(){tbc.lock(b.ui)},complete:function(){tbc.unlock(b.ui)},success:function(){b.triggerEvent("verify",a)!==!1&&(b.ui.remove(),b.close())}}),f=null}else b.triggerEvent("verify",a)!==!1&&(b.ui.remove(),b.close())}),b.part.cancel.click(function(){var a=b.getSelected();b.triggerEvent("cancel",a)!==!1&&(b.ui.remove(),b.close())})},function(a,b){"use strict";a.Drag=function(c){var d=a.self(this,arguments),e={nodes:null,selected:null,window:window,document:document,handle:null,cursor:"move",circles:null,circlesRound:{},targets:null,rangeMode:"y",disableInsertTargets:null,timeout:0,pauseTimeout:40},f=a.extend({},e,c),g=!!document.documentElement.ontouchstart,h=(b(f.handle,f.node),{left:0,top:0}),i={left:0,top:0},j=f.targets||b(f.node).parent(),k=[],l=null,m=null;d.packageName="tbc.Drag",d.pointer=b("<div></div>").css({position:"absolute",zIndex:100,background:"#fff",height:"1px",border:"1px solid #888",borderRadius:"10px",overflow:"hidden",lineHeight:"0",opacity:.5}),b(f.disableInsertTargets).data("tbc_drag_"+d.guid,!0),d.node=null,d.replica=[],d.a=function(){alert(f.targets.size())},d.addContainer=function(c){b(c).each(function(){k.push(this)}),f.targets=b(k),b(c).delegate(f.handle,"mousedown",{},function(c){return a.msie&&a.browserVersion<9&&1!==c.button||(a.msie&&a.browserVersion>8||!a.msie)&&0!==c.button?!1:(b("body").disableSelect(),d.node=b(this).parent(),h.left=c.pageX,h.top=c.pageY,d.init(c),c.disableSelectArea=!0,!1)})},d.addContainer(j),d.removeContainer=function(a){var c=[];f.targets.each(function(d,e){b(a).each(function(){e!==this&&c.push(e)})}),f.targets=b(c)},d.init=function(a){return b(document).bind({"mouseup.tbc_drag":function(a){d.stop(a,d.getPositionByEvent(a))}}),f.timeout?l=setTimeout(function(){d.start(a)},f.timeout):d.start(a),d},d.getPositionByEvent=function(a){return{left:a.pageX-i.left,top:a.pageY-i.top}},d.start=function(a){var c=d.node.offset();document.documentElement.scrollTop||document.body.scrollTop,document.documentElement.scrollLeft||document.body.scrollLeft,d.triggerEvent("start",a),d.createReplica(),"y"===f.rangeMode?d.pointer.css({width:d.node.width(),height:2}).appendTo("body"):d.pointer.css({width:2,height:d.node.height()}).appendTo("body"),i={left:a.pageX-c.left,top:a.pageY-c.top},b(document).bind("mousemove.tbc_drag",function(a){d.move(a)}),d.starting=!0},d.move=function(a){clearTimeout(m),m=setTimeout(function(){d.pause(a)},f.pauseTimeout);var b=d.getPositionByEvent(a);return b.right=b.left+1,b.bottom=b.top+1,d.replica&&d.moveReplica(b),d.triggerEvent("move",b),d},d.pause=function(c,e){if(f.targets&&b(f.targets).size()>0&&(!a.msie||a.msie&&a.browserVersion>7)&&d.starting===!0){var g=d.locateInsertPosition(c),h=g.offset;g.marks.size()?d.pointer.show().css({width:"y"===f.rangeMode?h.width:2,height:"y"===f.rangeMode?2:h.height,left:h.left,top:g.replica.top<h.halfY?h.top:h.bottom}):d.pointer.hide()}return d.triggerEvent("pause",c,e),d},d.stop=function(a){if(clearTimeout(l),clearTimeout(m),b(document).unbind(".tbc_drag"),b("body").enableSelect(),d.starting!==!0)return d;var c=d.locateInsertPosition(a);return d.insertTo(c),d.starting=!1,d.triggerEvent("stop",a),d},d.createReplica=function(){var c,e=d.node.offset(),g=[],h={node:d.node,clone:d.node.clone().appendTo("body").css({position:"absolute",zIndex:"100",left:e.left,top:e.top,opacity:.5})};return g.push(h),f.selected&&(c=d.node.siblings(f.selected),c.each(function(c,d){var e=b(this),f=e.offset(),i="rotate("+a.random(-15,15)+"deg)",j={node:e,clone:e.clone().appendTo("body").css({position:"absolute",zIndex:"99",left:f.left,top:f.top,opacity:.5,MozTransform:i,WebkitTransform:i,OTransform:i,msTransform:i,transform:i})};
g.push(j),j.clone.animate(h.clone.offset(),800),d=null})),d.replica=g,e=g=h=null,d.replica},d.moveReplica=function(a){return b.each(d.replica,function(b,c){c.clone.stop().css({left:a.left,top:a.top})}),d},d.deleteReplica=function(){return b.each(d.replica,function(a,c){var d=c.transfer?b(c.transfer).offset():b(c.node).offset(),e=d.left,f=d.top;c.clone.animate({top:f,left:e,opacity:0},400,function(){c.clone.remove(),delete c.clone})}),delete d.replica,d},d.isOpenFor=function(a){var c=!0;return b(f.disableInsertTargets).each(function(){return b(a)[0]===this?(c=!1,!1):void 0}),c},d.insertTo=function(a){if(!a)return d;var c,e,g,h=d.node,i=h.siblings(f.selected),j={node:h,selected:i,marks:a.marks,from:h.parent(),to:a.transfer||a.dropBox,offset:a.offset},k=j.to,l=window.desktop;b(a.dropBox).removeClass("tbc-dragin").parent().removeClass("tbc-dragin-parent"),d.isOpenFor(k)&&(a.marks.size()?(c=a.marks,e=a.offset,g=d.triggerEvent("beforeInsert",j),g===!1?(b.each(d.replica,function(a){d.replica[a].transfer=j.transfer}),a.marks[0]!==h[0]&&(d.triggerEvent("afterInsert",j),l.current().layout())):a.marks[0]!==h[0]&&(a.replica.top<e.halfY?h.insertBefore(c):h.insertAfter(c),i.insertAfter(h),l.current().layout(),d.triggerEvent("afterInsert",j)),c=e=null):k.size()&&d.triggerEvent("beforeInsert",j)!==!1&&(h.appendTo(k),i.insertAfter(h),l.current().layout(),d.triggerEvent("afterInsert",j))),d.pointer.remove(),d.deleteReplica(),h=i=j=null},d.locateTarget=function(c,d){var e,g,h,i,j,k,l=[],m={},n=b(f.targets);for(k=0;k<n.size();k+=1)j=n[k],i=b(j).offset().left,e=b(j).offset().top,g=i+j.offsetWidth,h=e+j.offsetHeight,b(j).filter(":visible").size()>0&&a.isOverlap({left:i,top:e,bottom:h,right:g},d)&&l.push(j);return b.each(l,function(c,d){m.self=m.self||d,m.self=-1!==b(m.self).find("*").index(d)?d:a.getElementByMaxZIndex(m.self,d)[0]}),n.not(m.self).removeClass("tbc-dragin").trigger("dragout").parent().removeClass("tbc-dragin-parent"),m.self&&b(m.self).addClass("tbc-dragin").trigger("dragin",m).parent().addClass("tbc-dragin-parent"),m},d.locateInsertPosition=function(c){var e={left:c.pageX,top:c.pageY,right:c.pageX+1,bottom:c.pageY+1},g=d.locateTarget(c,e),h=null,i={};return b(g.self).children(f.node).each(function(c,d){var f=b(d).offset().left,g=b(d).offset().top,j=d.offsetWidth,k=d.offsetHeight,l=f+j,m=g+k,n=f+j/2,o=g+k/2,p={left:f,top:g,right:l,bottom:m+10,width:j,height:k,halfX:n,halfY:o};return a.isOverlap(p,e)?(h=d,i=p,!1):void 0}),{dropBox:b(g.self),transfer:g.transfer,offset:i,marks:b(h),replica:e}},d.disable=function(){b(f.node).unbind(".tbc_drag"),d.triggerEvent("disable")},d.enable=function(){var a=b(f.node);return a.each(function(a,c){var e=f.handle?b(f.handle,c):b(this);g?e.bind("touchstart.tbc_drag",function(a){d.start(a,c)}):e.bind("mousedown.tbc_drag",function(a){d.start(a,c)})}),d},d.maskDoc=function(){var a=b(f.document.body).children(".tbc-drag-mask");a=0!==a.size()?a:b('<div class="tbc-drag-mask" />').appendTo(f.document.body),a.show()},d.unmaskDoc=function(){var a=b(f.document.body).children(".tbc-drag-mask");a.hide()},d.addEvent({start:function(){this.maskDoc()},stop:function(){this.unmaskDoc()}})}}(window.tbc,jQuery),function(a,b){a.itemSelector=function(c){var d=a.self(this,arguments),e={availableUrl:null,selectedUrl:null,selectUrl:null,deselectUrl:null,selectAllUrl:null,deselectAllUrl:null,itemTemplate:null,itemTemplateSelected:null,dataTemplate:{id:"userId",text:"employeeCode",depict:"userName",title:""},htmlFormater:null,resultFormater:null,max:0,lazy:!1,postKey:"userIds",autoSave:!0,multiple:!0,dataType:"html",cleanable:!0,resettable:!0,event:{selected:function(){},unselected:function(){},complete:function(){}}},f=a.extend({},e,c);f.autoSave="undefined"==typeof f.autoSave?!0:f.autoSave,d.packageName="tbc.itemSelector";var g=b('<div class="tbc-itemSelector '+(f.multiple?"":"tbc-itemSelector-single")+'"></div>').html('<div class="tbc-itemSelector-panel availableBox">        <div class="tbc-itemSelector-title">            <span role="availTitle">待选</span> [<i class="" role="availNum">0</i>]            <a role="addAll" class="tbc-button tbc-itemSelector-btnAddAll" type="button">添加全部</a>        </div>        <div role="availContainer" class="tbc-itemSelector-list"></div>        <div class="tbc-itemSelector-pagination">            <div class="border">                <select role="availPageSize" id="fromPageSize" name="fromPageSize" class="inputxt">                    <option value="10">10</option>                    <option value="20">20</option>                    <option value="50">50</option>                    <option value="100">100</option>                    <option value="500">500</option>                </select>                <div class="abs_right">                    <a  role="availPrevPage" href="javascript:void(0);" id="fromPrev" class="tbc-buttons prev"><i class="tbc-icon icon-arrow-left"></i></a>                    <input role="availPageTyper" type="text" value="1" id="fromPageNO" name="fromPageNo" class="inputxt tbc-inputer" norender="true">                    <i>/</i>                    <span role="availPageTotal">1</span>                    <a role="availNextPage" href="javascript:void(0);" class="tbc-buttons next"><i class="tbc-icon icon-arrow-right"></i></a>                </div>            </div>        </div>    </div>    <div role="operaList" class="tbc-itemSelector-panel tbc-itemSelector-operation">        <button role="operaAddSelected" class="tbc-button normalBtn addSelected" type="button"><i class="tbc-icon icon-arrow-right"></i></button>        <button role="operaRemoveSelected" class="tbc-button normalBtn removeSelected" type="button"><i class="tbc-icon icon-arrow-left"></i></button>        <button role="operaAddCurrPage" class="tbc-button bigBtn addCurrPage" type="button"><i class="tbc-icon icon-arrow-dblright"></i></button>        <button role="operaRemoveCurrPage" class="tbc-button bigBtn removeCurrPage" type="button"><i class="tbc-icon icon-arrow-dblleft"></i></button>    </div>    <div class="tbc-itemSelector-panel selectedBox">        <div class="tbc-itemSelector-title">            <span role="selectedTitle">已选</span> <span> [ <i class="" role="selectedNum">0</i><b role="maxSelected"></b> ]</span>            <a role="removeAll" class="tbc-button tbc-itemSelector-btnRemoveAll">移除全部</a>        </div>        <div role="selectedContainer" class="tbc-itemSelector-list"><ul></ul></div>        <div class="tbc-itemSelector-pagination">            <div class="border">                <select role="selectedPageSize" name="toPageSize" class="inputxt">                    <option value="10">10</option>                    <option value="20">20</option>                    <option value="50">50</option>                    <option value="100">100</option>                    <option value="500">500</option>                </select>                <div class="abs_right">                    <a role="selectedPrevPage" href="javascript:void(0);" class="tbc-buttons prev"><i class="tbc-icon icon-arrow-left"></i></a>                    <input role="selectedPageTyper" type="text" value="1" name="toPageNo" class="inputxt tbc-inputer" norender="true">                    <i>/</i>                    <span role="selectedPageTotal">1</span>                    <a role="selectedNextPage" href="javascript:void(0);" class="tbc-buttons next"><i class="tbc-icon icon-arrow-right"></i></a>                </div>            </div>        </div>    </div></div>').css({position:"relative",zIndex:1});if(d.part={},g.find("[role]").each(function(){var a=this.getAttribute("role");d.part[a]=this,a=null}),d._cache={selected:{total:0,list:[],names:{},page:{"page.pageSize":10,"page.pageNo":1,totalPages:1,total:0},selected:{}},available:{total:0,list:[],names:{},page:{"page.pageSize":10,"page.pageNo":1,totalPages:1,total:0}}},d._ajaxDataAvailable=a.extend({},this._cache.selected.page,{includeChild:!0,keyword:""}),d._ajaxDataSelected=a.extend({},this._cache.available.page,{keyword:""}),f.max&&(1===f.max&&b(d.part.operaAddCurrPage).attr("disabled","disabled").addClass("tbc-button-disabled"),b(d.part.maxSelected).append('/<b title="最多只能选择'+f.max+'项" style="font-weight:bold; color:red; cursor:default; text-decoration:underline;">'+f.max+"</b>")),d.extend({ui:g,container:g,append:function(a){this.container.append(a)},prepend:function(a){this.container.prepend(a)},appendTo:function(a){this.ui.appendTo(a)},prependTo:function(a){this.ui.prependTo(a)},formatPage:function(a){var c={};b("input[type='hidden']",a).each(function(){switch(this.name){case"totalPages":c.totalPages=this.value||0;break;case"totalRecords":c.totalRecords=this.value||0;break;case"pageNo":c["page.pageNo"]=this.value||0;break;case"pageSize":c["page.pageSize"]=this.value||0}}),c.prev=Math.max(c["page.pageNo"]-=1,1),c.next=Math.min(c["page.pageNo"]+=1,c.totalPages);try{return c}finally{c=null}},getPages:function(a){var b={},c=this.part,d=this._cache.available.page||{},e=this._cache.selected||{};switch(a){case"available":b["page.pageSize"]=d["page.pageSize"]||c.availPageSize.value||10,b["page.pageNo"]=d["page.pageNo"]||c.availPageTyper.value||1,b.totalPages=d.totalPages||c.availPageTotal.value||1,b.total=d.total||c.availNum.value||0;break;case"selected":b["page.pageSize"]=e["page.pageSize"]||c.selectedPageSize.value||10,b["page.pageNo"]=e["page.pageNo"]||c.selectedPageTyper.value||1,b.totalPages=e.totalPages||c.selectedPageTotal.value||1,b.total=e.total||c.selectedNum.value||0}try{return b}finally{b=null}},formatList:function(a){var c=[];a&&"object"==typeof a&&b.isFunction(a.size)?b("li",a).each(function(){var a={},d=f.dataTemplate;b("input",this).val()||this.getAttribute("data-id"),a[d.id]=b("input",this).val()||this.getAttribute("data-id"),a[d.text]=b("i",this).text()||b("span:first",this).text(),a[d.depict]=b("span:last",this).text(),a[d.title]=this.getAttribute("title"),c.push(a),a=null}):a&&(c=a);try{return c}finally{c=null}},setPagination:function(c,d){var e=d.total?d.total:"0";switch(c){case"available":this.part.availPageTyper.value=d["page.pageNo"],this.part.availPageTotal.innerHTML=d.totalPages,b(this.part.availPageSize).val(d["page.pageSize"]),b(this.part.availNum).html(e),a.extend(this._cache.available.page,d);break;case"selected":this.part.selectedPageTyper.value=d["page.pageNo"],this.part.selectedPageTotal.innerHTML=d.totalPages,b(this.part.selectedPageSize).val(d["page.pageSize"]),b(this.part.selectedNum).html(e),a.extend(this._cache.selected.page,d)}},loadAvailableByPage:function(a){var c=this;if(f.availableUrl&&this.triggerEvent("beforeAvailableLoad")!==!1){var e=(f.autoSave!==!1&&f.lazy===!0?!0:!1)+"";a=a||this.getPages("available")["page.PageNo"]||1,this._ajaxDataAvailable,this._cache.available.page,a=Math.max(0,Math.min(this._cache.available.page.totalPages,a)),b.ajax({url:f.availableUrl,dataType:f.dataType,data:b.extend({},f.post,this._ajaxDataAvailable,this._cache.available.page,{"page.pageNo":a,lazy:e}),type:"post",beforeSend:function(){c.triggerEvent("beforeAvailableLoad")},complete:function(){},error:function(){},success:function(e){e&&e.rows&&(f.itemDataFormater&&(e.rows=f.itemDataFormater(e.rows)),b.each(e.rows,function(){!this.id&&(this.id=this.userId),!this.text&&(this.text=this.userName||this.nm),!this.nm&&(this.nm=this.text),d._cache.available.names[this[f.dataTemplate.id]]=this}));var g=c.formatResult(e,f.itemTemplate);c.updateAvailablePage(g),c.triggerEvent("afterAvailableLoad"),c=g=a=null}})}},loadSelectedByPage:function(a){var c=this;if(f.selectedUrl&&f.autoSave&&this.triggerEvent("beforeSelectedLoad")!==!1){var e=(f.autoSave!==!1&&f.lazy===!0?!0:!1)+"";a=a||this.getPages("selected")["page.PageNo"]||1,b.ajax({url:f.selectedUrl,dataType:f.dataType,type:"post",data:b.extend({},f.post,d._ajaxDataSelected,this._cache.selected.page,{"page.pageNo":a,lazy:e}),beforeSend:function(){},complete:function(){},error:function(){var a=b(c.part.selectedContainer);0===a.find("ul").size()&&a.html("<ul></ul>")},success:function(a){if(a&&a.rows){f.itemDataFormater&&(a.rows=f.itemDataFormater(a.rows));for(var e in d._cache.selected.names)delete d._cache.selected.names[e];b.each(a.rows,function(){!this.id&&(this.id=this.userId),!this.text&&(this.text=this.userName),!this.nm&&(this.nm=this.text),d._cache.selected.names[this[f.dataTemplate.id]]=this})}var g=c.formatResult(a,f.itemTemplateSelected);c.updateSelectedPage(g),c._cache.selected.list=g.list,g.list=null,c=g=null}})}else{var g=b(c.part.selectedContainer);0===g.find("ul").size()&&g.html("<ul></ul>")}},updateAvailablePage:function(a){var c=this;b(c.part.availContainer).empty().append(a.html),c.setPagination("available",a.page),c._cache.available.page=a.page,c._cache.available.list=[].concat(a.list),a.page["page.pageNo"]<=1?b(c.part.availPrevPage).addClass("tbc-button-disabled"):b(c.part.availPrevPage).removeClass("tbc-button-disabled"),a.page["page.pageNo"]>=a.page.totalPages?b(c.part.availNextPage).addClass("tbc-button-disabled"):b(c.part.availNextPage).removeClass("tbc-button-disabled")},updateSelectedPage:function(a){var c=this;b(c.part.selectedContainer).empty().append(a.html),c.setPagination("selected",a.page),c._cache.selected.page=a.page,f.autoSave!==!1,a.page["page.pageNo"]<=1?b(c.part.selectedPrevPage).addClass("tbc-button-disabled"):b(c.part.selectedPrevPage).removeClass("tbc-button-disabled"),a.page["page.pageNo"]>=a.page.totalPages?b(c.part.selectedNextPage).addClass("tbc-button-disabled"):b(c.part.selectedNextPage).removeClass("tbc-button-disabled")},pageAvailable:function(){this.loadAvailableByPage.apply(this,arguments)},pageSelected:function(a){var a=a||d._cache.selected.page["page.pageNo"],b=d._cache.selected.page.totalPages;a=Math.max(1,Math.min(b,a)),f.autoSave===!1||f.lazy===!0?this.sliceSelectedByPage.apply(this,arguments):this.loadSelectedByPage(a)},sliceSelectedByPage:function(a){var b=a||this._cache.selected.page["page.pageNo"],c=this._cache.selected.page.totalPages,d=this._cache.selected.page["page.pageSize"],e=this.sliceListByPage(this._cache.selected.list,Math.max(1,Math.min(c,b)),d||10),g=this.formatResult(e,f.itemTemplateSelected);this.updateSelectedPage(g)},sliceListByPage:function(a,b,c){c=c||10;var d=a.length,e=Math.floor(d/c)+(d%c>0?1:0),f=Math.max(0,(b-1)*c),g=Math.min(d,b*c),h=a.slice(f,g);return{totalRecords:d,totalPages:e,total:a.length,rows:h,pageSize:c,pageNo:b}},formatResult:function(a,c){var d={html:"<ul></ul>",page:{"page.pageSize":10,"page.pageNo":1,totalPages:0,total:0},list:[]};if(a){f.dataType="string"==typeof f.dataType?f.dataType.toLowerCase():f.dataType;var e="html"!==f.dataType&&"text"!==f.dataType||"string"!=typeof a&&!a.jQuery?"json"===f.dataType||"object"==typeof a?"json":"xml"===f.dataType?"xml":f.dataType:"html";switch(e){case"html":var g=b("<div/>").html(a);d.html=b(a),d.page=this.formatPage(g),d.list=this.formatList(g),g.remove(),g=null;break;case"json":var h=a.rows?a.rows.length>a.pageSize?this.sliceListByPage(a.rows,a.pageNo,a.pageSize).rows:a.rows:null;d.html=h?this.createHtmlByJSON(h,c):"",d.page={"page.pageSize":a.pageSize,"page.pageNo":a.pageNo,totalPages:a.totalPages,total:a.total},d.list=a.rows||this.formatList(d.html)}}try{return d}finally{d=null}},createHtmlByJSON:function(c,d){if(!c)return"";for(var e,g=b("<ul/>"),h=a.isArray(c)?c:c.list||[],i=h.length,j=d||f.itemTemplate||'<li data-id="{userId}" class="{selected} {checked}"><i>{employeeCode}</i><span>{userName}</span></li>',k=[],l=0;i>l;l++)e=f.vauleSetFormater?f.vauleSetFormater.call(this,h[l]):h[l],k.push(a.stringTemplate(j,e,f.textTransform));g.html(k.join(""));try{return g}finally{g=h=i=j=k=null}},createHtmlByXML:function(){},getAvailablePage:function(){return this._cahce.available.page},selectItems:function(a){b(a),a=b(a).filter(function(){var a=this.getAttribute("data-id"),c=b(d.part.selectedContainer).find("li[data-id='"+a+"']").size()>0;return!c}).addClass("checked"),d.setNextSelected(a),a.clone().prependTo(b("ul",d.part.selectedContainer))},saveSelected:function(c,e){if(f.autoSave!==!1&&f.lazy!==!0&&c.length>0){var g,h=f.post||{};if(f.postFormater)g=f.postFormater(c),h[f.postKey]=g;else{for(var i=[],j=0,k=c.length;k>j;j++)i.push(c[j][f.dataTemplate.id]);h[f.postKey]=i.join(",")}b.ajax({url:f.addUrl,type:"post",data:h,dataType:"json",beforeSend:function(){d.triggerEvent("beforeSave")!==!1&&a.lock(d.ui)},complete:function(){a.unlock(d.ui),b.isFunction(e)&&e.call(d),d.triggerEvent("afterSave")},success:function(a){a.success!==!0&&a.message&&alert(a.message)}}),h=null}else d.pageAvailable(),d.pageSelected()},deselectItems:function(a){a=b(a),d.setNextSelected(a),a.remove()},saveDeselected:function(c,e){if(f.autoSave&&!f.lazy&&c.length>0){var g,h=f.post||{};if(f.postFormater)g=f.postFormater(c),h[f.postKey]=g;else{for(var i=[],j=0,k=c.length;k>j;j++)i.push(c[j][f.dataTemplate.id]);h[f.postKey]=i.join(",")}b.ajax({url:f.removeUrl,type:"post",data:h,dataType:"json",beforeSend:function(){d.triggerEvent("beforeSave")!==!1&&a.lock(d.ui)},complete:function(){a.unlock(d.ui),b.isFunction(e)&&e.call(d),d.triggerEvent("afterSave")},success:function(a){a.success!==!0&&a.message&&alert(a.message)}}),h=null}else d.pageSelected(),d.pageAvailable()},setNextSelected:function(a){if(1===a.size()){var b=a.next();b.size()?b.addClass("selected"):a.prev().addClass("selected"),b=null}},checkSelect:function(a,b){if(0===a.length)return!1;if(f.max&&!isNaN(f.max)){if(this._cache.selected.page.total>=f.max)return alert("您最多只能选择"+f.max+"条."),!1;var c=a.length,d=0;this._cache.selected.page.total+c>f.max&&(d=f.max-this._cache.selected.page.total,a=a.slice(0,d),alert("数量已经超过限制, 仅前面的"+d+"个被添加到了已选栏."))}var e=this.getAvailableItems(a),g=this;f.itemDataFormater&&(e=f.itemDataFormater(e));var h=this._cache.available.page["page.pageNo"];h+=b?1:0,this.selectItems(a),this.selectToCache(e),this.saveSelected(e,function(){this.pageAvailable(h),this.pageSelected(h)}),e.length=0,e=a=g=null},checkDeselect:function(a){if(0===a.length)return!1;var b=this.getSelectedItems(a),c=this;this.deselectToCache(b),this.deselectItems(a),this.saveDeselected(b,function(){this.pageAvailable(),this.pageSelected()}),b.length=0,b=a=c=null},selectAll:function(){f.autoSave!==!1&&f.lazy!==!0?b.ajax({url:f.selectAllUrl,type:"post",dataType:"json",data:b.extend({},f.post,this._ajaxDataAvailable,this._cache.available.page),beforeSend:function(){d.triggerEvent("beforeSave")!==!1&&a.lock(d.ui)},complete:function(){a.unlock(d.ui),d.pageSelected(),d.pageAvailable(),d.triggerEvent("afterSave")},success:function(a){a.success!==!0&&a.message&&alert(a.message)}}):(this.pageSelected(),this.pageAvailable())},removeAll:function(){this._cache.selected.list.length=0,this._cache.selected.names={},f.autoSave!==!1&&f.lazy!==!0?b.ajax({url:f.deselectAllUrl,type:"post",dataType:"json",data:b.extend({},f.post,this._ajaxDataAvailable,this._cache.available.page),beforeSend:function(){d.triggerEvent("beforeSave")!==!1&&a.lock(d.ui)},complete:function(){a.unlock(d.ui),d.pageSelected(1),d.pageAvailable(1),d.triggerEvent("afterSave")},success:function(a){a.success!==!0&&a.message&&alert(a.message)}}):(this.pageSelected(1),this.pageAvailable(1))},selectCurrentPage:function(){var a=b("li",this.part.availContainer).not(".checked");this.checkSelect(a,"goNextPage"),a=null},deselectCurrentPage:function(a){var c=b("li",this.part.selectedContainer);this.checkDeselect(c,a),c=null},getSelectedItems:function(a){var c=[];b(a).each(function(){var a=this.getAttribute("data-id"),b=d._cache.selected.names[a];b&&c.push(b)});try{return c}finally{c=null}},getAvailableItems:function(a){var c=[];b(a).each(function(){var a=this.getAttribute("data-id"),b=d._cache.available.names[a];b&&c.push(b)});try{return c}finally{c=null}},selectChecked:function(){var a=b("li.selected",this.part.availContainer).not(".checked");this.checkSelect(a),a=null},addAvailableItem:function(a,c){var d=this.createHtmlByJSON(a).find("li").addClass("selected"),e=b(this.part.availContainer).children("ul");c&&e.empty(),e=0!==e.size()?e:b("<ul/>").appendTo(this.part.availContainer),e.append(d),this.deselectToCache(a)},removeAvailableItem:function(a){b(this.part.availContainer).find("li[data-id='"+a+"']").remove(),delete this._cache.available.names[a]},clearAvailable:function(){b(this.part.availContainer).children("ul").empty();var a=this._cache.selected.names[id];for(var c in a)delete a[c];a=null,this._cache.selected.list.length=0},deselectChecked:function(){var a=b("li.selected",this.part.selectedContainer);this.checkDeselect(a),a=null},selectToCache:function(a){var c=this,d=[];b.each(a,function(a,b){if(b){var e=this[f.dataTemplate.id];c._cache.selected.names[e]||(c._cache.selected.names[e]=this,c._cache.selected.list.push(this),d.push(this)),delete c._cache.available.names[e]}}),this.triggerEvent("select",d),d=c=null},deselectToCache:function(c){var e,g=this;b.each(c,function(){var a=this[f.dataTemplate.id];g._cache.available.names[a]||(g._cache.available.names[a]=this,g._cache.available.list.push(this)),delete g._cache.selected.names[a],b(g.part.availContainer).find("li[data-id='"+a+"']").removeClass("checked")}),g._cache.selected.list.length=0;for(var h in g._cache.selected.names)e++,g._cache.selected.list.push(g._cache.selected.names[h]),e>5e3&&a.lock(d.ui);a.unlock(d.ui),this.triggerEvent("deselect",c),g=null},getPropertiesById:function(a){var c=this,d=f.post||{};d[f.postKey]=a.join(","),b.ajax({url:f.propertiesUrl,type:"post",dataType:"json",data:d,success:function(a){a&&c.setSelected(a)}})},setSelected:function(c){var d=this;c&&b.isArray(c)&&c.length>0&&(a.lock(d.ui),d._cache.selected.list=d._cache.selected.list||[],a.batch(c,1e4,0,0,function(a){for(var b,c,e=0,g=a.length;g>e;e++)b=a[e][f.dataTemplate.id],c=d._cache.selected.names[b],c||(d._cache.selected.names[b]=a[e],d._cache.selected.list.push(a[e])),d._cache.selected.names[b].selected=!0},function(){a.unlock(d.ui);var c=d.sliceListByPage(d._cache.selected.list,1,10),e=d.formatResult(c,f.itemTemplateSelected);b(d.part.selectedContainer).empty().append(e.html),d.setPagination("selected",e.page)}))}}),f.autoSave||"string"!=typeof f.selectedData)!f.autoSave&&b.isArray(f.selectedData)?setTimeout(function(){d.setSelected(f.selectedData)},100):d.loadSelectedByPage(1);else{var h=f.selectedData.split(",");h.length>0&&d.getPropertiesById(h)}(f.autoSave===!1||f.lazy===!0)&&b(d.part.addAll).hide(),b(d.part.availContainer).add(d.part.selectedContainer).delegate("li","click",function(a){var c=b(this);if(a.shiftKey){var d;c.siblings().add(c).each(function(){d?b(this).addClass("selected"):b(this).removeClass("selected"),(this===c[0]||b(this).hasClass("lastClicked"))&&(d=!d,b(this).addClass("selected"))})}else c.addClass("lastClicked").siblings().removeClass("lastClicked"),a.ctrlKey&&f.multiple&&1!==f.max?c.hasClass("selected")?c.removeClass("selected"):c.addClass("selected"):c.addClass("selected").siblings().removeClass("selected")}),b(d.part.availContainer).add(d.part.selectedContainer).delegate("li","dblclick",function(){}),b(d.part.operaAddCurrPage).click(function(){d.selectCurrentPage()}),b(d.part.operaRemoveCurrPage).click(function(){d.deselectCurrentPage()}),b(d.part.operaAddSelected).click(function(){d.selectChecked()}),b(d.part.operaRemoveSelected).click(function(){d.deselectChecked()}),b(d.part.availPageTyper).keyup(function(a){if(!this.value.match(/^\d+$/),13===a.keyCode){var b=parseInt(this.value);d.pageAvailable(b)}}),b(d.part.selectedPageTyper).keyup(function(a){if(!this.value.match(/^\d+$/),13===a.keyCode){var b=parseInt(this.value);d.pageSelected(b)}}),b(d.part.availPageSize).change(function(){d._cache.available.page["page.pageSize"]=this.value,d.pageAvailable()}),b(d.part.selectedPageSize).change(function(){d._cache.selected.page["page.pageSize"]=this.value,d.pageSelected()}),b(d.part.availPrevPage).click(function(){var a=d._cache.available.page["page.pageNo"]-1;d.pageAvailable(a)}),b(d.part.availNextPage).click(function(){var a=d._cache.available.page["page.pageNo"]+1;d.pageAvailable(a)}),b(d.part.selectedPrevPage).click(function(){var a=d._cache.selected.page["page.pageNo"]-1;return d.pageSelected(a)}),b(d.part.selectedNextPage).click(function(){var a=d._cache.selected.page["page.pageNo"]+1;return d.pageSelected(a)}),b(d.part.addAll).click(function(){d.selectAll()}),b(d.part.removeAll).click(function(){d.removeAll()})}}(tbc,jQuery),tbc.jdc=new function(){var a=tbc.self(this);a.extend(tbc.Event),a.extend(tbc.ClassManager),a.packageName="tbc",a.db={store:{},key:function(a){return isNaN(parseInt(a))?null:this.store[a]},getItem:function(a){return this.store[a]},setItem:function(a,b){return b&&(this.store[a]=b),b.KEY=a,b},removeItem:function(a){this.store[a]=null,delete this.store[a]}};var b={};a.db.setItem("tables",b),a.getTable=function(a){return b[a]},a.createTable=function(a){return a&&!b[a]?(b[a]=new tbc.jdc.Table(a),b[a]):void 0},a.dropTable=function(a){b[a]&&(b[a].del("all"),b[a].DESTROY(),delete b[a])},a.select=function(a,c){var d="string"==typeof a?b[a]:a;if(d){var e=d.get(c);return d=null,e||null}return null},a.set=function(c,d,e){var f=b[c];if(f||(f=a.createTable(c)),f)if("object"==typeof d)for(var g in d)f.set(g,d[g]);else f.set(d,e);f=null},a.del=function(a,c){var d=b[a];d&&d.del(c),d=null}},tbc.jdc.Table=function(){var a=tbc.self(this);a.extend(tbc.Event),a.extend(tbc.ClassManager),a.packageName="tbc.jdc.Table",a.count=0,a.store={},a.get=function(b){var c=[];if("all"===b.toLowerCase()||"*"===b){for(var d in a.store)c.push(a.store[d]);return c}return a.store[b]||null},a.set=function(b,c){a.store[b]&&a.count++,a.store[b]=c},a.del=function(b){if("string"==typeof b&&"all"===b.toLowerCase())for(var c in a.store)delete a.store[c];else b&&delete a.store[b]}},function(a,b){"use strict";a.Panel=function(c){var d={window:window,opener:null,title:null,name:null,icon:"",html:"",area:"body",width:400,height:300,top:"auto",left:"auto",target:null,modal:!0,enable3D:!0,sizeType:"restore",minWidth:180,autoShow:!0,minHeight:100,autoClose:!1,draggable:!0,resizable:!0,minimizable:!1,maximizable:!1,defaultSate:"restore",autoCloseTimeout:5,event:{}},e=b.extend({},d,c);e.window=e.window||window,a.self(this,arguments).extend({packageName:"tbc.Panel",part:{},ui:null,container:null,lastSize:{width:0,height:0,left:0,top:0,right:"auto",bottom:"auto"},initUi:function(){var c=a.getMaxZIndex(b(".tbc-slide-scene.current")[0]),d=a.msie&&a.browserVersion<9?"div":"dialog";return this.ui=b("<"+d+' class="tbc-panel closeable shadow" style="filter:alpha(opacity=0); opacity:0; z-index:'+(c+1)+';"></'+d+">").attr("tbc",this.guid).html('<div role="header" class="tbc-panel-header" unselectable="on" onselectstart="return false;">    <div class="tbc-panel-top-left resize-handle" role="north-west"></div>    <div class="tbc-panel-top-right resize-handle" role="north-east"></div>    <div role="controls" class="tbc-panel-controls">        <div class="tbc-switch-role" role="roleBox">            <span class="tbc-switch-role-roleName" role="roleName"></span>            <span class="tbc-switch-role-handle tbc-icon icon-arrow_state_blue_expanded" role="roleHandle"></span>            <ul class="tbc-switch-role-list" role="roleList"><li>1111</li><li>2222</li></ul>        </div>        <span class="tbc-panel-controls-box">            <a role="close" class="tbc-panel-btn-close" href="javascript:void(null);" hidefocus="true" title="关闭">×</a>            <a role="restore" class="tbc-panel-btn-max" href="javascript:void(null);" hidefocus="true" title="最大化/还原">■</a>            <a role="min" class="tbc-panel-btn-min" href="javascript:void(null);" hidefocus="true" title="最小化">▁</a>            <!--a role="refresh" class="tbc-panel-btn-refresh" href="javascript:void(null);" hidefocus="true" title="刷新">&hArr;</a-->            <a role="reset" class="tbc-panel-btn-reset" href="javascript:void(null);" hidefocus="true" title="重新打开">&otimes;</a>            <a role="help" class="tbc-panel-btn-help" href="javascript:void(null);" hidefocus="true" title="">?</a>        </span>    </div>    <div class="tbc-panel-top-center">        <div class="tbc-panel-top-center-handle resize-handle" role="north"></div>        <span class="tbc-panel-icon"><img role="icon" height="16" onerror="this.style.display=\'none\';" /></span>        <div role="title" class="tbc-panel-title">            <!--标题区域-->窗体基类        </div>    </div></div><div class="tbc-panel-body">    <div class="tbc-panel-middle-left resize-handle" role="west"></div>    <div class="tbc-panel-middle-right resize-handle" role="east"></div>    <div class="tbc-panel-middle-center tbc-panel-main">        <div role="container" class="tbc-panel-container">            <!--内容区域-->        </div>        <div role="mask" class="tbc-panel-locked-layer" style="display:none;">            <div role="maskTips" class="tbc-panel-locked-layertips"></div>        </div>    </div></div><div role="footer" class="tbc-panel-footer">    <div class="tbc-panel-footer-left resize-handle" role="south-west"></div>    <div class="tbc-panel-footer-right resize-handle" role="south-east"></div>    <div class="tbc-panel-footer-center resize-handle" role="south"></div></div>'),this.ui.bind("click",function(c){var d=c.target,e=d.tagName.toLowerCase(),f=a.getTaskByElement(this);f&&b.isFunction(f.focus)&&f.focus(),("input"===e||"textarea"===e||"button"===e||"a"===e||d.contenteditable)&&setTimeout(function(){d.focus(),d=null},0),f=null}),a.Panel.cacheid++,this.cacheid=a.Panel.cacheid,this.ui.attr("iid",this.iid),this.ui.attr("cacheid",this.cacheid),a.Panel.cache[this.cacheid]=this,a.Panel.cache_length+=1,e.minimizable&&this.ui.addClass("minimizable"),e.maximizable&&this.ui.addClass("maximizable"),e.refreshable&&this.ui.addClass("refreshable"),e.resettable&&this.ui.addClass("resettable"),e.helpable&&this.ui.addClass("helpable"),this},initPart:function(){var c=this;if(this.ui.find("[role]").each(function(a,c){var d=c.getAttribute("role");this.part[d]=b(c)}.bind(this)),this.container=this.part.container,this.part.form&&this.part.form.submit(function(a){a.preventDefault(),this.triggerEvent("submit")}.bind(this)),this.part.controls.bind("mousedown",function(a){a.disableSelectArea=!0,a.stopPropagation()}).delegate("a","click",null,function(a){a.preventDefault();var b=a.currentTarget,c=b.getAttribute("role");switch(c){case"close":a.stopPropagation(),this.close();break;case"min":e.minimizable&&this.min();break;case"max":e.maximizable&&this.max();break;case"restore":e.maximizable&&("max"===this.sizeType?this.restore():this.max());break;case"refresh":e.refreshable&&this.refresh&&this.refresh();break;case"reset":e.resettable&&this.reset&&this.reset();break;case"help":e.helpable&&this.help()}}.bind(this)),this.part.title.dblclick(function(){"max"!==c.sizeType&&e.maximizable?c.max():c.restore()}),a.msie&&a.browserVersion<8){var d=24*c.part.controls.children(".tbc-panel-controls-box").children().size()+2;c.part.controls.width(d)}return this},init:function(){return this.packageName="tbc.Panel",this.initUi(),this.initPart(),this.initDrag(),this.initResize(),this.initContextmenu(),this},initForOpen:function(){var b,c,d,f,g,h;return"FULL"===e.windowInitialType||"MAX"===e.windowInitialType?(b="100%",c="100%",d=f=g=h=0):(b=a.system?Math.min(a.system.getDesktopWidth(),e.width||e.minWidth):e.width||e.minWidth,c=a.system?Math.min(a.system.getDesktopHeight()-24-taskbar.ui.height(),e.height||e.minHeight):e.height||e.minHeight,d=e.left,f=e.right,h=e.bottom,g=e.top),this.appendTo(e.target||a.Panel.parent||"body").name(e.name||"窗口").icon(e.icon||a.Panel.defaultIcon||(window.DEFAULT_ICONS?DEFAULT_ICONS.window_icon:null)||"").resize(b,c,g,f,h,d,!1),"FULL"===e.windowInitialType||"MAX"===e.windowInitialType?this.resize("max").rememberSize(e.width,e.height,e.top,e.left):this.rememberSize(),this.opened=!0,this.triggerEvent("open"),this},initDrag:function(){var c=this;try{if(e.draggable)c.addEvent("drop",function(){c.rememberSize()}),b.fn.drag&&c.ui.addClass("draggable").drag({document:document,area:"body",areaMargin:{top:-6,left:"-80%",bottom:"80%",right:"80%"},handle:c.part.title,enabled:function(){return c.ui.hasClass("draggable")
},timeout:1,event:{dragStart:function(){var d=c.ui.css("zIndex")||2;a.lock("body",{zIndex:9999999,opacity:.001,cursor:"move"}),c.dragSaveOnIframe=b("<div />").insertAfter(c.ui).css({position:"absolute",z:d-1,background:"#fff",opacity:.01,width:"100%",height:"100%",left:0,top:0}),c.triggerEvent("dragStart")},drag:function(){c.triggerEvent("drag")},drop:function(){c.dragSaveOnIframe&&c.dragSaveOnIframe.remove(),a.unlock("body"),c.triggerEvent("drop")}}}),c.part.title.mousedown(function(){c.focus()});else if(e.draggable&&!b.fn.drag)throw"jQuery plugins 'jQuery.fn.drag' was not found! jQuery.fn.dialog Dependent on the plugin."}catch(d){a.log(d)}return this},initResize:function(){var c=this;try{if(e.resizable&&b.fn.resizableForTbc)c.ui.addClass("resizable").resizableForTbc({handle:".resize-handle",vector:"normal",document:document,margin:{top:7,left:7,right:9,bottom:9},minWidth:e.minWidth,minHeight:e.minHeight,enabled:function(){return c.ui.hasClass("resizable")},onResizeStart:function(){c.focus().lock()},onResize:function(){},onResizeEnd:function(a){c.resize(a),c.unlock()}});else if(e.resizable&&!b.fn.resizableForTbc)throw"jQuery plugins 'jQuery.fn.resizableForTbc' was not found! jQuery.fn.dialog Dependent on the plugin."}catch(d){a.log(d)}return this},initContextmenu:function(){var a=this;return b.isFunction(b.fn.contextmenu)&&this.ui.contextmenu({items:[{text:"最小化",icon:"",click:function(){a.min()},disabled:!e.minimizable,inheritable:!0},{text:function(){return"max"===a.sizeType?"还原":"最大化"},icon:"",click:function(){"max"===a.sizeType?a.restore():a.max()},disabled:!e.maximizable,inheritable:!0},{text:"关闭",icon:"",click:function(){a.close()},inheritable:!0}]}),this},panelLayout:function(){var a=this;try{var c=a.ui,d=c.innerHeight()-a.part.header.height()-a.part.footer.height(),e=c.width()-b(".tbc-panel-middle-left",c).width()-b(".tbc-panel-middle-right",c).width();b(".tbc-panel-body",c).height(d),a.part.container.height(d).width(e)}catch(f){}return a=null,this},show:function(){var a=this;return this.opened||this.initForOpen(),this.minimize=!1,this.ui.css({opacity:0,display:"block"}).animate({opacity:1},200),this.facade(),setTimeout(function(){a.focus(),a=null},0),this.triggerEvent("show"),this},hide:function(){var b=this;return a.msie&&a.browserVersion<8?this.ui.css({opacity:0,display:"none"}):this.ui.animate({opacity:0,display:"none"},200,function(){b.ui.hide(),b=null}),this.evert(),this.triggerEvent("hide"),this},html:function(a){return this.triggerEvent("beforeChange"),a?(this.container.html(a),this.triggerEvent("afterChange"),this):this.container.html()},append:function(a){return this.triggerEvent("beforeChange"),this.container.append(a),this.triggerEvent("afterChange"),this},appendTo:function(a){return this.ui.appendTo(a),this},prepend:function(a){return this.triggerEvent("beforeChange"),a.ui?this.container.prepend(a.ui):this.container.prepend(a),this.triggerEvent("afterChange"),this},prependTo:function(a){return a.container?this.ui.prependTo(a.container):this.ui.prependTo(a),this},titleModel:"{0}<span style='filter:alpha(opacity=70); opacity:0.7; font-weight:lighter;' title='{0} {1}'>{1}</span>",title:function(b){if(b){e.title=b;var c,d=e.name,f=e.title,g=f&&f!==d?a.formatString(this.titleModel||"",f?d+" > ":d,f):e.name;return c=f?d+" > "+f:d||"",this.part.title.html(g).attr("title",c),this.triggerEvent("changeTitle",b,d),this}return e.title},name:function(b){if(b){e.name=b;var c,d=b,f=e.title,g=f&&f!==d?a.formatString(SELF.titleModel,f?d+" > ":d,f):e.name;return c=f?d+" > "+f:d||"",this.part.title.html(g).attr("title",c),this.triggerEvent("changeTitle",f,b),this}return e.name},icon:function(b){var c=a.system.isImg(b);return c||!b||"null"===b?(b=c?b:DEFAULT_ICONS.window_icon,this.part.icon.attr("src",b).show().parent().css({backgroundPosition:"center center"}),this.triggerEvent("changeIcon",b),this):(this.part.icon.parent().addClass("tbc-icon "+b).css({backgroundImage:""}),this.part.icon.hide(),this)},close:function(b){function c(){if(f){var a;f.ui.empty().remove();for(a in f.part)f.part.hasOwnProperty(a)&&delete f.part[a];f.triggerEvent("afterClose",f.returnValue),f.DESTROY()}e=d=f=null}var f=this;if(this.modalWindow)try{if(!b)return this.modalWindow.show().focus().flash(),this;this.modalWindow.close(b)}catch(g){}return this.triggerEvent("beforeClose")===!1?this:(this.triggerEvent("close",this.returnValue),a.Panel.cache_length-=1,delete a.Panel.cache[this.cacheid],a.Panel.removeSequence(this.cacheid),this.opener&&this.opener.modalWindow&&delete this.opener.modalWindow,b||setTimeout(function(){var b,c,d,e,f=window.desktop.current().container[0];for(d=a.Panel.sequence,e=d.length;e>=0;e-=1)if(c=a.Panel.cache[d[e]],c&&(b=a.Panel.cache[d[e]].ui.parent()[0],f===b||b===document.body)){a.Panel.cache[d[e]].focus();break}f=b=c=null},0),a.msie&&a.browserVersion<8?c():(this.evert(),this.ui.animate({opacity:0,marginTop:"-=20px"},300,c)),void 0)},closeOther:function(){},min:function(){return this.blur(),this.ui.hide(),this.minimize=!0,this.maximize=!1,this.triggerEvent("min"),this},max:function(){return this.minimize&&this.show(),this.disableResize().disableDrag(),this.resize("100%","100%",null,null,null,null,!1),this.sizeType="max",this.maximize=!0,this.minimize=!1,this.ui.addClass("maximize"),this.triggerEvent("max"),this},restore:function(){this.minimize&&this.show();var a=this.lastSize||{},b=a.left||0,c=a.top||0,d=a.width||this.ui.width(),e=a.height||this.ui.height();return this.enableResize().enableDrag(),this.resize(d,e,c,null,null,b,!1),this.sizeType="restore",this.minimize=!1,this.maximize=!1,this.ui.removeClass("maximize"),this.triggerEvent("restore"),this},sizeType:e.sizeType||"restore",rememberSize:function(a,b,c,d){return this.lastSize={top:c||this.ui.css("top"),left:d||this.ui.css("left"),width:a||this.ui.width(),height:b||this.ui.height()},this},openModalDialog:function(b,c){var d=this,e=c||d.constructor||a.Panel;return this.modalWindow=new e(b),this.modalWindow.opener=this,this.modalWindow.addEvent({afterClose:function(){d.modalWindow=null,d.show().focus()}}),e=null,this.modalWindow},focused:!1,focus:function(){var b,c,d,e,f,g,h,i=this.ui.parent();if(i.hasClass("current")||(c=a.system?a.system.getTaskByElement(i):null,c&&(d=c.index,desktop.show(d)),i=c=null),this.modalWindow)return b=a.getMaxZIndex(this.ui.parent()[0]),this.ui.css({zIndex:b}),this.modalWindow.focused?this.modalWindow.focus().flash():this.modalWindow.focus(),this;if(this.focused===!0)return this;this.focused=!0,a.Panel.removeSequence(this.cacheid),a.Panel.sequence.push(this.cacheid),this.unlock("blur"),e=a.getMaxZIndex(this.ui.parent()[0]),f=Math.max(window.parseInt(this.ui.css("top")),-6),this.ui.addClass("shadow").css({zIndex:e+1,top:f}),this.triggerEvent("focus"),g=a.Panel.cache;for(h in g)g.hasOwnProperty(h)&&g[h]!==this&&g[h].blur&&g[h].focused&&g[h].blur(!0);return g=null,this},blur:function(b){var c,d,e;if(b!==!0){for(d=a.Panel.sequence,c=d.length-2;c>-1;c--)if(e=a.Panel.cache[d[c]],this.ui&&e.ui&&this.ui.parent()[0]===e.ui.parent()[0]&&e&&!e.minimize&&!e.focused){e.focus();break}e=d=null}return this.focused=!1,this.ui.removeClass("shadow"),this.lock("blur","",.1),this.triggerEvent("blur"),this},resize:function(a){var c,d;switch(a){case"min":this.min();break;case"max":this.max();break;case"restore":this.restore();break;default:if(a){var f=b(e.area).size()?b(e.area):this.ui.parent(),g=!0;"object"!=typeof a?(d=arguments,c={width:d[0],height:d[1],top:d[2],right:d[3],bottom:d[4],left:d[5]}):(c=a,d=[c.width,c.height,c.top,c.right,c.bottom,c.left]),g=arguments[arguments.length-1]===!1?!1:g,c.width="auto"===c.width?f.innerWidth()-((isNaN(c.left)?20:c.left)+(isNaN(c.right)?20:c.right)):"100%"===c.width?f.innerWidth()+12:c.width,c.height="auto"===c.height?f.innerHeight()-((isNaN(c.top)?20:c.top)+(isNaN(c.bottom)?20:c.bottom)):"100%"===c.height?f.innerHeight()+12:c.height;var h=Math.max(c.width,e.minWidth),i=Math.max(c.height,e.minHeight),j="100%"===d[0]?-6:"auto"===c.left?Math.max(0,(f.width()-h)/2):c.left,k="auto"===c.right?Math.max(0,(f.width()-h)/2):c.right,l="100%"===d[1]?-6:"auto"===c.top?Math.max(0,(f.height()-i)/2):c.top,m="auto"===c.bottom?Math.max(0,(f.height()-i)/2):c.bottom;g!==!1&&b.extend(this.lastSize,{left:parseInt(this.ui.css("left")),top:parseInt(this.ui.css("top")),width:this.ui.width(),height:this.ui.height()}),this.ui.css({width:h,height:i,left:j,right:k,top:l,bottom:m}),this.panelLayout(),this.triggerEvent("resize",{width:h,height:i})}}return this},resizeWidth:function(a,b){return a=isNaN(a)?{width:a,left:b,right:b}:a,this.resize(a),this},resizeHeight:function(a,b){return a=isNaN(a)?{height:a,top:b,bottom:b}:a,this.resize(a),this},disableResize:function(){return this.ui.removeClass("resizable"),this},enableResize:function(){return this.ui.addClass("resizable"),this},disableDrag:function(){return this.ui.removeClass("draggable"),this},enableDrag:function(){return this.ui.addClass("draggable"),this},center:function(a,c,d){var f=c&&!isNaN(c)?c:this.ui.width(),g=d&&!isNaN(d)?d:this.ui.height(),h=e.left,i=e.top,j=document.documentElement.clientWidth||document.documentElement.offsetWidth,k=document.documentElement.clientHeight||document.documentElement.offsetHeight;return h=f>j?Math.max(document.documentElement.scrollLeft,document.body.scrollLeft):j/2+Math.max(document.documentElement.scrollLeft,document.body.scrollLeft)-f/2,i=g>k?Math.max(document.documentElement.scrollTop,document.body.scrollTop):k/2+Math.max(document.documentElement.scrollTop,document.body.scrollTop)-g/2,this.ui.css({top:i,left:h,width:f,height:g}),b.isFunction(a)&&a.call(this),this.triggerEvent("center"),this},lock:function(a,c,d){var e=b(".tbc-panel-locked-layer",this.ui);return e.css({display:"block"}),d&&e.css({opacity:d}),a&&e.addClass(a),this.part.maskTips.html(c),this.triggerEvent("lock"),this},unlock:function(a){var c=b(".tbc-panel-locked-layer",this.ui);return a&&c.removeClass(a),"tbc-panel-locked-layer"===b.trim(c.attr("class"))&&(c.css({display:"none"}),c.css({opacity:""})),this.part.maskTips.html(""),this.triggerEvent("unlock"),this},fling:function(){return this.shake()},shake:function(a){var c=this,d=this.ui;return d.animate({left:"-=5px"},40),d.animate({left:"+=10px"},40),d.animate({left:"-=5px"},40),d.animate({left:"+=4px"},40),d.animate({left:"-=4px"},40),d.animate({left:"+=2px"},40),d.animate({left:"-=2px"},40,function(){b.isFunction(a)&&a.call(c)}),d=null,this.triggerEvent("shake"),this.triggerEvent("fling"),this},scaleTo:function(a,c){var d=this,e=d.ui,f=e.width(),g=e.height(),h=e.css("left"),i=e.css("top"),j=b.isPlainObject(a)?a:b.extend({},b(a).offset(),{width:b(a).width(),height:b(a).height(),opacity:0});return e.animate(j,1200,"easeOutBounce",function(){d.ui.css({display:"none",width:f,height:g,left:h,top:i,opacity:1}),b.isFunction(c)&&c.call(d),d=null}),e=null,this},evert:function(){return(!a.msie||a.browserVersion>9)&&this.ui.css({"-moz-transform":"translateZ(-1000px) rotateY(180deg) rotateX(0deg) translateX(1000px)","-webkit-transform":"translateZ(-1000px) rotateY(180deg) rotateX(0deg) translateX(1000px)","-o-transform":"translateZ(-1000px) rotateY(180deg) rotateX(0deg) translateX(1000px)","-ms-transform":"translateZ(-1000px) rotateY(180deg) rotateX(0deg) translateX(1000px)",transform:"translateZ(-1000px) rotateY(180deg) rotateX(0deg) translateX(1000px)"}),this.triggerEvent("evert"),this},facade:function(){return(!a.msie||a.browserVersion>9)&&this.ui.css({"-moz-transform":"none","-webkit-transform":"none","-o-transform":"none","-ms-transform":"none",transform:"none"}),this.triggerEvent("facade"),this},enable3D:function(){return this.ui.parent().css({"-moz-transform-style":"preserve-3d","-webkit-transform-styles":"preserve-3d","-ms-transform-style":"preserve-3d","-o-transform-style":"preserve-3d","transform-style":"preserve-3d","-webkit-transform-style":"perspective"}),this.triggerEvent("enable3D"),this},disable3D:function(){return this.ui.parent().css({"-moz-transform-style":"none","-webkit-transform-style":"none","-ms-transform-style":"none","-o-transform-style":"none","transform-style":"none"}),this.triggerEvent("disable3D"),this},enableAnimate:function(a,b,c){var d=a||".4s",e=c||"ease",f=b||"0s",g=[d,e,f].join(" ");return this.ui.css({"-moz-transition":"-moz-transform "+g,"-webkit-transition":"-web-transform "+g,"-o-transition":"-o-transform "+g,"-ms-transition":"-ms-transform "+g,transition:"transform "+g}),this.triggerEvent("enableAnimate"),this},disableAnimate:function(){return this.ui.css({"-moz-transition":"","-webkit-transition":"","-o-transition":"","-ms-transition":"",transition:""}),this.triggerEvent("disableAnimate"),this},active:function(a){return a?this.ui.addClass("active"):this.ui.removeClass("active"),this.triggerEvent("active"),this},flash:function(a){var c=this.ui,d=function(){c.dequeue("flash")},e=40;return this.ui.queue("flash",[function(){c.css({opacity:.5}).removeClass("shadow"),setTimeout(d,e)},function(){c.css({opacity:1}).addClass("shadow"),setTimeout(d,e)},function(){c.css({opacity:.5}).removeClass("shadow"),setTimeout(d,e)},function(){c.css({opacity:1}).addClass("shadow"),setTimeout(d,e)},function(){c.css({opacity:.5}).removeClass("shadow"),setTimeout(d,e)},function(){c.css({opacity:1}).addClass("shadow"),setTimeout(function(){d(),c.verifyButton?c.verifyButton.focus():c.cancelButton&&c.cancelButton.focus(),b.isFunction(a)&&a.call(c)},e)}]).dequeue("flash"),this.triggerEvent("flash"),this},offset:function(){var a=this.ui,c=a.offset(),d=this.part.container;return b.extend(c,{offsetWidth:a.outerWidth(),offsetHeight:a.outerHeight(),containerWidth:d.innerWidth(),containerHeight:d.innerHeight(),width:a.width(),height:a.height(),scrollWidth:d[0].scrollWidth,scrollHeight:d[0].scrollHeight}),c}}).addEvent({afterClose:function(){var c,d,e=!1;for(d in a.Panel.cache)a.Panel.cache.hasOwnProperty(d)&&(c=a.Panel.cache[d],e=e||c.maximize);e||(taskbar&&taskbar.show(),desktop.setDockZindex(),b(".tbc-desktop-nav").css({zIndex:5})),c=null},max:function(){taskbar&&taskbar.hide(),b(".tbc-desktop-dock").css({zIndex:3}),b(".tbc-desktop-nav").css({zIndex:3})},min:function(){var c,d;for(d in a.Panel.cache)if(a.Panel.cache.hasOwnProperty(d)&&(c=a.Panel.cache[d],"max"===c.sizeType&&!c.minimize))return;c=null,taskbar&&taskbar.show(),desktop.setDockZindex(),b(".tbc-desktop-nav").css({zIndex:5})},restore:function(){var c,d;for(d in a.Panel.cache)if(c=a.Panel.cache[d],"max"===c.sizeType&&!c.minimize)return;c=null,taskbar&&taskbar.show(),desktop.setDockZindex(),b(".tbc-desktop-nav").css({zIndex:5})},destroy:function(){try{e=c=null}catch(a){}}}).init()},a.Panel.cache=a.Panel.cache||{},a.Panel.cacheid=isNaN(a.Panel.cacheid)||!a.Panel.cacheid?0:a.Panel.cacheid,a.Panel.cache_length=isNaN(a.Panel.cache_length)?0:a.Panel.cache_length,a.Panel.sequence=a.Panel.sequence||[],a.Panel.parent=".tbc-slide-scene.current",a.Panel.removeSequence=a.Panel.removeSequence||function(b){a.Panel.sequence=a.array.remove(a.Panel.sequence,b)}}(tbc,jQuery),tbc.Pop=function(a){var b=tbc.self(this,arguments);b.extend(tbc.Event,tbc.ClassManager),b.packageName="tbc.Pop";var c={width:320,height:180,icon:null,autoClose:!1,timeout:3,locate:null,parent:null,counter:".tbc-pop-close i"},d=tbc.extend({},c,a),e=null,f=d.timeout||5,g=tbc.getMaxZIndex()+1,h='<div class="tbc-pop" style="opacity:0.001; filter:alpha(opacity=0.01); z-index:'+g+';">'+'    <div class="tbc-pop-arrow">&diams;</div>'+'    <div class="tbc-pop-close"><i></i><a href="#">&times;</a></div>'+'    <div class="tbc-pop-inner">'+'        <div class="tbc-pop-icon"></div>'+'        <div class="tbc-pop-container"></div>'+"    </div>"+"</div>";b.ui=$(h).css({width:d.width,height:d.height}).attr("tbc",b.guid).appendTo(d.parent||"body").bind(function(){b.focus()}),b.container=b.ui.find(".tbc-pop-container"),b.arrow=b.ui.find(".tbc-pop-arrow"),b.counter=$(d.counter,b.ui),b.extend({html:function(a){return b.container.html(a),b},focus:function(){var a=tbc.getMaxZIndex();return b.ui.css({zIndex:a+1}),b},show:function(){return b.ui.show(),b},hide:function(){return b.hide(),b},addCounter:function(a){return b.counter.add(a),b},countDown:function(a){return b.triggerEvent("beforeCountdown"),b.ui.find(".tbc-pop-close i").html(a),b.triggerEvent("countdown"),b},stop:function(){return b.triggerEvent("beforeStop"),clearInterval(e),f=0,b.triggerEvent("stop"),b},start:function(){return e=setInterval(function(){return 0>=f?(b.close(),void 0):(f--,b.countDown(f),void 0)},1e3),b.triggerEvent("start"),b},pause:function(){return clearInterval(e),b},resume:function(){return this.start(),b},close:function(){return b.triggerEvent("beforeClose")!==!1&&(clearInterval(e),b.ui.empty().remove(),b.triggerEvent("close"),b.DESTROY(),b=null),b},append:function(a){return b.triggerEvent("beforeAppend")!==!1&&(b.container.append(a.ui||a),b.triggerEvent("append")),b},prepend:function(a){return b.triggerEvent("beforeAppend")!==!1&&(b.container.prepend(a.ui||a),b.triggerEvent("append")),b},appendTo:function(a){return b.ui.appendTo(a.container||a),b},prependTo:function(a){return b.ui.prependTo(a.container||a),b},setArrowX:function(a,c){var d=b.ui.offset(),e=c||$(a).offset(),f=a.width()/2-14,g=e.left+f-d.left;return 0>g&&b.ui.css({left:"-="+Math.abs(g)+"px"}),b.arrow.css({top:"",left:Math.max(1,g)+"px"}),b},setArrowY:function(a,c){var d=b.ui.offset(),e=c||$(a).offset(),f=a.height()/2-14,g=e.top+f-d.top;return 0>g&&b.ui.css({top:"-="+Math.abs(g)+"px"}),b.arrow.css({left:"",top:Math.max(g,1)+"px"}),b},locate:function(a,c){if(a=a||d.locate?$(a||d.locate):b.lastLocate,b.lastLocate=a,!(a.size<0)){var e=b.getPosition(a,c),f=b.ui.data("lastClass")||"tbc-pop-left",g="",h="y";return"auto"===e.left?e.parent.height<e.locate.bottom?(g="tbc-pop-bottom",e.right-=e.locate.width,e.bottom+=e.parent.height+e.parent.scrollTop-e.locate.bottom+e.locate.height+20,h="x"):e.locate.top<0?(g="tbc-pop-top",e.right-=e.locate.width,e.top+=e.locate.height+4,h="x"):(g="tbc-pop-right",e.right+=4):e.parent.height<e.locate.bottom?(g="tbc-pop-bottom",e.left-=e.locate.width,e.bottom+=e.parent.height+e.parent.scrollTop-e.locate.bottom+e.locate.height+20,h="x"):e.locate.top<0?(g="tbc-pop-top",e.left-=e.locate.width,e.top+=e.locate.height+4,h="x"):(g="tbc-pop-left",e.left+=4),e.left="auto"===e.left?e.left:e.left+"px",e.bottom="auto"===e.bottom?e.bottom:e.bottom+"px",e.top="auto"===e.top?e.top:e.top+"px",e.right="auto"===e.right?e.right:e.right+"px",b.arrow.removeClass(f).addClass(g).data("lastClass",g),b.ui.css({left:e.left,right:e.right,top:e.top,bottom:e.bottom,opacity:1}),"x"===h?b.setArrowX(a,c):b.setArrowY(a,c),b}},getPosition:function(a,c){var e,f,g=$(a||d.locate),h=c?c.left:0,i=c?c.top:0,j=g.offset(),k=g.width(),l=g.height(),m=h||j.left,n=i||j.top,o=m+k,p=n+l,q=b.ui.width(),r=b.ui.height(),s=b.ui.offsetParent()[0].offsetHeight,t=b.ui.offsetParent()[0].offsetWidth,u="0",v="auto";return o+q>t&&m>q?(e=t-j.left,f="auto"):(e="auto",f=o),n+r>s?(u="auto",v=0):(u=n,v="auto"),{top:u,bottom:v,left:f,right:e,width:q,height:r,locate:{left:m,top:n,right:o,bottom:p,width:k,height:l},parent:{height:s,width:t,scrollTop:b.ui.offsetParent()[0].scrollTop,scrollLeft:b.ui.offsetParent()[0].scrollLeft}}}}),b.ui.find(".tbc-pop-close a").bind({click:function(){b.close()}}),d.autoClose===!0&&b.start(),b.addEvent({destroy:function(){b=c=d=e=f=g=h=null}})},function(a,b){"use strict";a.Tabpage=function(c){var d={title:null,icon:null,closable:!1,closeNode:null,handleNode:"",titleNode:null,iconNode:null,container:null,content:null,duration:300,easing:null,autoShow:!0},e=a.extend({},d,c),f=b(e.handleNode),g=b(e.iconNode,f),h=b(e.titleNode,f),i=b(e.container);a.self(this,arguments).extend({init:function(){this.packageName="tbc.Tabpage",e.group&&(this.group=e.group,this.appendTo(this.group)),e.autoShow&&this.show()},handle:f,container:i,ui:i,title:function(a){var c;a?(h.html(a),c=this):c=b.trim(h.html());try{return c}finally{c=null}},icon:function(a){var b;a?(g.attr("src",a),b=this):b=g.attr("src");try{return b}finally{b=null}},outToBottom:function(a){this.triggerEvent("beforeHide");var c=this,d=i.parent(),f=d.height();i.animate({top:f},e.duration,"swing",function(){b.isFunction(a)&&a(),c.triggerEvent("hide")})},outToTop:function(a){this.triggerEvent("beforeHide");var c=this,d=i.height();i.animate({top:-d},e.duration,"swing",function(){b.isFunction(a)&&a(),c.triggerEvent("hide")})},outToRight:function(a){this.triggerEvent("beforeHide");var c=this,d=i.parent(),f=d.width();i.animate({left:f},e.duration,"swing",function(){b.isFunction(a)&&a(),c.triggerEvent("hide")})},outToLeft:function(a){this.triggerEvent("beforeHide");var c=this,d=i.width();i.animate({left:-d},e.duration,"swing",function(){b.isFunction(a)&&a(),c.triggerEvent("hide")})},inFromTop:function(a){this.triggerEvent("beforeShow");var c=this,d=i.height();i.css({top:-d}).show().animate({top:0,left:0},e.duration,e.easing,function(){b.isFunction(a)&&a(),c.triggerEvent("show")})},inFromBottom:function(a){this.triggerEvent("beforeShow");var c=this,d=i.parent(),f=d.height();i.css({top:f}).show().animate({top:0,left:0},e.duration,e.easing,function(){b.isFunction(a)&&a(),c.triggerEvent("show")})},inFromLeft:function(a){var c=this,d=i.width();this.triggerEvent("beforeShow"),i.css({left:-d}).show().animate({top:0,left:0},e.duration,e.easing,function(){b.isFunction(a)&&a(),c.triggerEvent("show")})},inFromRight:function(a){var c=this,d=i.parent(),f=d.width();this.triggerEvent("beforeShow"),i.css({left:f}).show().animate({top:0,left:0},e.duration,e.easing,function(){b.isFunction(a)&&a(),c.triggerEvent("show")})},fadeOut:function(a){var c=this;this.triggerEvent("beforeHide"),i.css({top:0,left:0}).animate({opacity:0},e.duration,e.easing,function(){b.isFunction(a)&&a(),c.triggerEvent("hide")})},fadeIn:function(a){var c=this;this.triggerEvent("beforeShow"),i.css({top:0,left:0}).show().animate({opacity:1},e.duration,e.easing,function(){b.isFunction(a)&&a(),c.triggerEvent("show")})},show:function(a){this.triggerEvent("beforeShow"),i.css({top:0,left:0,opacity:1}).show(),b.isFunction(a)&&a(),this.triggerEvent("show")},hide:function(a){this.triggerEvent("beforeHide"),i.css({top:0,left:0}).hide(),b.isFunction(a)&&a(),this.triggerEvent("hide")},close:function(){e.closable&&this.triggerEvent("beforeClose")!==!1&&(b(e.handleNode).empty().remove(),i.empty().remove(),this.triggerEvent("close"),delete this.group,this.DESTROY(),d=e=f=g=h=i=null)},appendTo:function(a){return this.group&&this.group.remove(this.index),a.append(this),this.group=a,this},prependTo:function(a){return this.group&&this.group.remove(this.index),a.prepend(this),this.group=a,this}}).addEvent({beforeShow:function(){this.handle.addClass(e.currentClass||"current"),this.container.addClass(e.currentClass||"current")},beforeHide:function(){this.handle.removeClass(e.currentClass||"current"),this.container.removeClass(e.currentClass||"current")},hide:function(){i.hide()},destroy:function(){d=e=c=f=g=h=i=null}}).init()}}(tbc,jQuery),function(a,b){"use strict";a.Tabset=function(c){var d={container:".tbc-tabset",header:".tbc-desktop-nav",prevHandle:".tbc-tabset-prev",nextHandle:".tbc-tabset-next",effects:"slide-x",easing:"swing",loop:!0,auto:!0,timeout:5e3,speed:800},e=b.extend({},d,c);a.self(this,arguments).extend({init:function(){var c=this;if(this.packageName="tbc.Tabset",this.header=b(e.header),this.container=b(e.container),this.tabs=[],this.currIndex=0,a.touchable){var d,f=0,g=0;this.container[0].addEventListener("touchstart",function(a){f=a.touches[0].pageX,g=a.touches[0].pageY,d=(new Date).getTime()}),this.container[0].addEventListener("touchmove",function(a){var b=a.touches[0].pageX,d=a.touches[0].pageY;c.current().ui.css({left:b-f}),b=d=null}),this.container[0].addEventListener("touchend",function(a){var b=a.changedTouches[0].pageX,e=a.changedTouches[0].pageY,g=(new Date).getTime(),h=Math.abs(b-f),i=c.container.width();h>i/2||h>i/2/(1e3/(g-d))?f>b&&!c.isLast()?c.next():b>f&&!c.isFirst()?c.prev():c.current().ui.animate({left:0}):c.current().ui.animate({left:0}),b=e=i=null})}},isFirst:function(){return 0===this.currIndex},isLast:function(){return this.currIndex===this.tabs.length-1},current:function(){return this.tabs[this.currIndex]},next:function(a){var b=this.tabs[this.currIndex],c=isNaN(a)?this.currIndex+1>=this.tabs.length?0:this.currIndex+1:a;switch(this.effect()){case"slide-x":b&&b.outToLeft(),this.tabs[c].inFromRight();break;case"slide-y":b&&b.outToTop(),this.tabs[c].inFromBottom();break;case"fade":b&&b.fadeOut(),this.tabs[c].fadeIn();break;default:b&&b.hide(),this.tabs[c].show()}return this.currIndex=c,this},prev:function(a){var b,c,d=this.tabs[this.currIndex],e=isNaN(a)?this.currIndex-1<0?this.tabs.length-1:this.currIndex-1:a,f=this.tabs[e];switch(this.effect()){case"slide-x":b="inFromLeft",c="outToRight";break;case"slide-y":b="inFromTop",c="outToBottom";break;case"fade":b="fadeIn",c="fadeOut";break;default:b="show",c="hide"}return d&&"function"==typeof d[c]&&d[c](),f&&"function"==typeof f[b]&&f[b](),this.currIndex=e,this},show:function(a){var b,c=this.currIndex;return a=a||0,c>a?this.prev(a):a>c?this.next(a):(b=this.tabs[this.currIndex],b&&b.fadeIn()),this},append:function(a){var c=this;return this.header.append(a.handle),this.container.append(a.container),this.tabs.push(a),a.handle.bind("click",function(){c.show(a.index)}),a.autoShow&&this.show(this.tabs.length-1),a.index=this.tabs.length-1,a.group=this,a.addEvent({close:function(){c.remove(a.index)},beforeShow:function(){var a=this.index;b.each(c.tabs,function(b,d){b!==c.currIndex&&b!==a&&d.hide()})}}),this},prepend:function(a){var b=this;return this.header.prepend(a.title),this.container.prepend(a.content),this.tabs=[a].concat(this.tabs),a.autoShow&&this.show(0),a.index=0,a.group=this,a.addEvent({close:function(){b.remove(a.index)}}),this},effect:function(a){return"string"!=typeof a?e.effects:(e.effects=a,this)},easing:function(a){return"string"!=typeof a?e.easing:(e.easing=a,this)},remove:function(a){return a===this.currIndex?a<this.tabs.length-1?(this.excludeTab(a),this.next()):a>0&&(this.excludeTab(a),this.prev()):a<this.currIndex?(this.excludeTab(a),this.currIndex-=1,this.show(this.currIndex)):this.excludeTab(a),this},excludeTab:function(a){var b,c,d,e=[];for(c=0,d=this.tabs.length;d>c;c++)b=this.tabs[c],b&&b.index!==a&&(b.index=e.length,e.push(b));return b=null,this.tabs=e,this}}).addEvent({destroy:function(){d=e=c=null}}).init()}}(tbc,jQuery),tbc.namespace("tbc.tree"),tbc.tree.Editor=tbc.tree.Editor||function(a){var b=tbc.self(this,arguments),c={editUrl:"",addible:!0,editable:!0,deletable:!0},d=$.extend({},c,a);b.extend([tbc.Tree,a],{packageName:"tbc.tree.Editor",isDeletable:function(a){return this.hasChildren(a)},hoverTools:function(a){var b=[],c="string"==typeof a?this.cache(a):a;!d.level||c.level<d.level?b.push('<a href="javascript:void(0);" class="stree-add">新增</a>'):b.push('<span style="color:#888; text-decoration:line-through;">新增</span>');var e=this.isRoot(a);e||(b.push('<a href="javascript:void(0);" class="stree-edit">编辑</a>'),this.isFirst(a)?b.push('<span style="color:#888; text-decoration:line-through;">上移</span>'):b.push('<a href="javascript:void(0);" class="stree-moveup">上移</a>'),this.isLast(a)?b.push('<span style="color:#888; text-decoration:line-through;">下移</span>'):b.push('<a href="javascript:void(0);" class="stree-movedown">下移</a>'),this.isDeletable(a)?b.push('<span style="color:#888; text-decoration:line-through;">删除</span>'):b.push('<a href="javascript:void(0);" class="stree-delete">删除</a>'));try{return b.join("&nbsp;&nbsp;|&nbsp;&nbsp;")}finally{c=b=""}},nodeAddHandle:function(a){var c="string"==typeof a?this.cache(a):a;c&&this.triggerEvent("beforeAdd",c)!==!1&&(this.addbox?(this.addbox.show(),this.addbox.locate($(".stree-text",c.html)),this.addbox.container.find("._cont").empty().load(d.addUrl)):(this.addbox=new tbc.Pop({name:"新增",width:400,height:340}),this.addbox.appendTo("body"),this.addbox.show(),this.addbox.locate($(".stree-text",c.html)),this.addbox.addEvent({close:function(){b.addbox=null}}),this.addbox.append('<div class="tbc-titleBar"><b>新增</b> &nbsp;<i style="color:#aaa;">(双击标题关闭)</i></div><div class="_cont"><div style="text-align:center;">Loading...</div></div>'),this.addbox.container.delegate(".tbc-titleBar","dblclick",function(){b.addbox.close()}).find("._cont").load(d.addUrl,{id:c.property.id})),this.addbox.__nodeid=c.property.id)},nodeEditHandle:function(a){var c="string"==typeof a?this.cache(a):a;c&&this.triggerEvent("beforeEdit",c)!==!1&&(this.editbox?(this.editbox.show(),this.editbox.locate($(".stree-text",c.html)),this.editbox.container.find("._cont").empty().load(d.editUrl)):(this.editbox=new tbc.Pop({width:400,height:340}),this.editbox.appendTo("body"),this.editbox.show(),this.editbox.locate($(".stree-text",c.html)),this.editbox.addEvent({close:function(){b.editbox=null}}),this.editbox.append('<div class="tbc-titleBar"><b>编辑:</b><i>'+(c.property.nm||c.property.text||"")+'</i> &nbsp;<i style="color:#aaa;">(双击标题关闭)</i></div><div class="_cont"></div>'),this.editbox.container.delegate(".tbc-titleBar","dblclick",function(){b.editbox.close()}).find("._cont").load(d.editUrl,{id:c.property.id})),this.editbox.__nodeid=c.property.id)},nodeDeleteCheck:function(){},nodeDelete:function(a){a="string"==typeof a?this.cache(a):a;var c=$(a.html).css({background:"yellow"});if(c.hasClass("disabled"))return c=null,!1;c.addClass("disabled");var d=b,e=c.find(".stree-delete"),f=e.offset(),g=$('<div class="tbc-tips">确定删除吗?&nbsp;&nbsp;<a class="_dle" href="javascript:void(0);">删除</a>&nbsp;<a class="_cancel" href="javascript:void(0);">取消</a></div>').css({left:f.left,top:f.top-12,opacity:0,background:"#fff",border:"1px solid #ccc",padding:"6px",position:"absolute",zIndex:"10000"}).appendTo("body").animate({left:"+=24px",opacity:1},200),h=function(){g&&g.stop().animate({left:"-=64px",opacity:0},200,function(){c&&c.css({background:""}).removeClass("disabled"),g&&g.remove(),a=d=c=e=f=g=h=null})};g.delegate("a._dle","click",function(){d.nodeDeleteAjax(a),h()}),g.delegate("a._cancel","click",function(){h()}),g.animate({opacity:0},1e4,h)},removeNode:function(a){for(var b,c="string"==typeof a?this.cache(a):a,d=c.parents[c.parents.length-1],e=this.cache(d).property.sn,f=c.html,g=0,h=e.length;h>g;g++)if(e[g].id===a){b=g;break}this.cache(d).property.sn=e.slice(0,b).concat(e.slice(b+1,h)),f.parentNode.removeChild(f),c=d=e=b=f=h=null},nodeDeleteAjax:function(a){a="string"==typeof a?a:a.property?a.property.id:null;var c=b;d.deleteUrl&&a&&$.ajax({url:d.deleteUrl,type:"post",dataType:"json",data:{id:a,action:"delete"},beforeSend:function(){},complete:function(){},error:function(){},success:function(b){b.success?(c.deleteNode(a),c.triggerEvent("delete",a),c=null):alert(b.message||"删除失败")}})},nodeMoveup:function(a){if(a&&!this.isFirst(a)){for(var b,c=this.cache(a),d=c.parents[c.parents.length-1],e=this.cache(d).property.sn,f=0,g=e.length;g>f;f++)if(e[f].id===a){b=e[f-1],e[f-1]=e[f],e[f]=b;break}var h=$(c.html).parent();h.insertBefore(h.prev()),this.nodeMoveAjax(a,"up"),c=h=paren=e=next=null}},nodeMovedown:function(a){if(a&&!this.isLast(a)){for(var b,c=this.cache(a),d=c.parents[c.parents.length-1],e=this.cache(d).property.sn,f=0,g=e.length;g>f;f++)if(e[f].id===a){b=e[f+1],e[f+1]=e[f],e[f]=b;break}var h=$(c.html).parent();h.insertAfter(h.next()),this.nodeMoveAjax(a,"down"),c=h=paren=e=b=null}},nodeMoveAjax:function(a,c){a="string"==typeof a?a:a.property?a.property.id:null;var e=b;d.moveUrl&&a&&c&&$.ajax({url:d.moveUrl,type:"post",data:{id:a,type:c},dataType:"html",beforeSend:function(){},complete:function(){},error:function(){},success:function(){e.triggerEvent("move",a,c),e=null}})}}),b.ui.delegate(".stree-node","mouseenter",function(){var a=this.getAttribute("data-id"),c=b.hoverTools(a);$(this).addClass("stree-node-hover").find(".stree-node-tools").css({display:"inline"}).html(c)}),b.ui.delegate(".stree-node","mouseleave",function(){$(this).removeClass("stree-node-hover").find(".stree-node-tools").hide().html("")}),b.ui.delegate(".stree-add","click",function(a){a.stopPropagation();
var c=this.parentNode.parentNode.getAttribute("data-id");b.nodeAddHandle(c)}),b.ui.delegate(".stree-moveup","click",function(a){a.stopPropagation();var c=this.parentNode.parentNode.getAttribute("data-id");b.nodeMoveup(c)}),b.ui.delegate(".stree-movedown","click",function(a){a.stopPropagation();var c=this.parentNode.parentNode.getAttribute("data-id");b.nodeMovedown(c)}),b.ui.delegate(".stree-edit","click",function(a){a.stopPropagation();var c=this.parentNode.parentNode.getAttribute("data-id");b.nodeEditHandle(c)}),b.ui.delegate(".stree-delete","click",function(a){a.stopPropagation();var c=this.parentNode.parentNode.getAttribute("data-id");b.nodeDelete(c)})},function(a,b){window.tbc=a||{},a.Tree=function(c){"use strict";var d=a.self(this,arguments),e={width:"auto",height:"auto",url:null,level:1,lazyLevel:4,deleteNode:!0,upNode:!0,downNode:!0,cascadeCheck:!0,singleCheck:!1,multiple:!1,editable:!0,addUrl:null,deleteUrl:null,editUrl:null,moveUrl:null,data:null,addNode:!0,extool:[],confirmmsg:"确定要删除{name}吗?",exconfirmmsg:"删除后将无法恢复,确定要删除吗?",errormsg:"无法删除",formatExtool:function(){},isRetracted:!0,renderTo:""},f=b.extend({},e,c);f.container=f.ui?b(f.ui).find(f.container):b(f.container),f.ui=f.ui?b(f.ui):f.container,d.addEvent(f.event),d.addEvent({afterRender:function(){b.isFunction(f.onLoad)&&f.onLoad.apply(this,arguments)},select:function(){b.isFunction(f.onSelect)&&f.onSelect.apply(this,arguments)},deleteNode:function(){b.isFunction(f.onDelete)&&f.onDelete.apply(this,arguments)},check:function(){b.isFunction(f.onCheck)&&f.onCheck.apply(this,arguments)},move:function(){b.isFunction(f.onMove)&&f.onMove.apply(this,arguments)},addNode:function(){b.isFunction(f.onAdd)&&f.onAdd.apply(this,arguments)}}),d.packageName="tbc.Tree",d.extend({ui:f.ui,container:f.container,appendTo:function(a){b(a).size()&&this.container.appendTo(a)},data:null,init:function(){switch(f.dataType){case"json":this.render(f.data);break;case"ajax":this.load();break;default:this.load()}},load:function(){var a=b.ajax({url:f.url,type:f.param?"post":"get",data:b.extend({},f.param,{noDepPath:f.noDepPath}),dataType:"json",beforeSend:function(){d.triggerEvent("beforeLoad")},complete:function(){d.triggerEvent("afterLoad")},error:function(){d.triggerEvent("error","loading failed!")},success:function(a){d.render(a)}});this.addEvent({destroy:function(){a.abort&&a.abort(),a=null}})},render:function(a){this.triggerEvent("beforeRender"),(new Date).getTime(),this.container.html(this.createChild(a)),this.addHtmlCache(),this.triggerEvent("afterRender")},addHtmlCache:function(a){a=a?b(a):this.container.find("dt.stree-node");var c=d;b(a).each(function(){var a=this.getAttribute("data-id");c.cache(a,"html",this)}),c=a=null},cache:function(a,b,c){if("index"===a)return this._cacheIndex;if(!a)return this._cacheData;var d=this._cacheData[a];if(d||(d=this._cacheData[a]={}),b)void 0!==c&&(d[b]=c);else try{return d}finally{d=null}try{return d[b]}finally{d=null}},_cacheData:{},_cacheIndex:[],createChild:function(a,b,c,d){b=b||0,c=c||[];var e,f,g,h,i,j=a.length;for(i=0;j>i;i+=1)if(h=a[i],g=h.id,h.children&&!h.sn&&(h.sn=h.children),this.cache(g,"property",h),this.cache(g,"level",b),this.cache(g,"parents",c),this._cacheIndex.push(g),d===!0){if(!this._delayCreateNode)break;this._delayCreateNode(h,b,c.concat([g]),f,d)}else 0===i&&(f="first"),i===j-1&&(f="last"),e||(e=["<ul>"]),e.push(this.createNode(h,b,c.concat([g]),f,d)),"last"===f&&e.push("</ul>");try{return e?e.join(""):""}finally{e=null}},_delayCreateNode:function(a,b,c,d,e){var f=this;setTimeout(function(){f.createNode&&f.createNode(a,b,c,d,e),f=null},0)},createNode:function(b,c,d,e,g){var h,i,j,k,l,m,n,o,p,q=b.id,r=b.sn||b.children;if(g===!0&&r&&r.length>0)return this.createChild(r,c+1,d,g),r=null,"";h=f.lazyLevel||2,i=this.cache(q),j=b.nm||b.text,k="",l="first"===e?" tbc-tree stree-node-first":"last"===e?" stree-node-last":"",m="stree-node stree-level-{3}"+l+(r&&0!==r.length?"":" stree-leaf"),n='<div class="stree-node-tools" style="display:none; float:none;"></div>',o=f.checkbox?'<span class="tbc-checkbox stree-checkbox" data-id="{0}" data-text="{1}">    <input type="checkbox" name="'+f.checkboxName+'" value="{0}" title="{1}" '+(i&&i.checked?' checked="checked" ':"")+"/>"+"</span>":"",p='<li>    <dt data-id="{0}" data-text="{1}" title="{1}" class="{2}">        <span class="stree-space" style="width:'+16*c+'px;"></span>'+'        <span class="stree-handle" level="{3}"></span>'+o+'        <span class="stree-icon stree-icon-{3}"></span>'+'        <span class="stree-text">{1}</span>'+"       {4}"+"    </dt>"+"    {5}"+"</li>",r&&r.length>0&&(h>c?(k=this.createChild(r,c+1,d),this.cache(q,"rendered",!0)):r&&(this.createChild(r,c+1,d,!0),m+=" stree-node-retracted")),p=a.formatString(p,q,j,m,c,n,k);try{return p}finally{m=r=p=q=j=null}},addNode:function(a,c,d,e){var f,g="string"==typeof a?{id:a,pr:d,nm:c,sg:e}:a,h=this.cache(d),i=b(h.html).removeClass("stree-leaf");switch(e){case"prepend":this.prependNode.apply(this,arguments);break;case"append":this.appendNode.apply(this,arguments);break;default:this.insertNode.apply(this,arguments)}g=h=i=f=null},appendNode:function(a,c,d){var e,f,g="string"==typeof a?{id:a,pr:d,nm:c}:a,h=this.cache(d),i=b(h.html).removeClass("stree-leaf");g&&(f=h.parents.concat([g.pr]),e=b(this.createChild([g],h.level+1,f)),i.next("ul").size()?i.next("ul").append(e.html()):i.after(e),this.addHtmlCache(i.next("ul").find(".stree-node")),h.rendered=!0),h.property.sn=h.property.sn||[],h.property.sn.push(g),this.triggerEvent("addNode",g),g=h=i=e=f=null},prependNode:function(a,c,d){var e,f,g="string"==typeof a?{id:a,pr:d,nm:c}:a,h=this.cache(d),i=b(h.html).removeClass("stree-leaf");g&&(f=h.parents.concat([g.pr]),e=b(this.createChild([g],h.level+1,f)),i.next("ul").size()?i.next("ul").prepend(e.html()):i.after(e),this.addHtmlCache(i.next("ul").find(".stree-node")),h.rendered=!0),h.property.sn=[g].concat(h.property.sn||[]),this.triggerEvent("addNode",g),g=h=i=e=f=null},adjustNode:function(){},insertNode:function(a,c,d,e){var f,g,h,i,j="string"==typeof a?{id:a,pr:d,nm:c,sg:e}:a,k=this.cache(d),l=b(k.html).removeClass("stree-leaf"),m=k.property.sn||[];if(e="string"==typeof e?this.cache(e):e){for(g=k.parents.concat([j.pr]),f=b(this.createChild([j],k.level+1,g)),h=0,i=m.length;i>h;h+=1)if(m[h].id===e.property.id){k.property.sn=m.slice(0,h).concat([j]).concat(m.slice(h,i)),l.next("ul").size()?b(this.cache(m[h].id,"html")).after(f.html()):l.after(f);break}this.addHtmlCache(l.next("ul").find(".stree-node[data-id='"+j.id+"']")),k.rendered=!0}else this.appendNode(a,c,d);this.triggerEvent("addNode",j),j=k=l=m=f=g=null},renameNode:function(a,c){if(a="string"==typeof a?this.cache(a):a,a&&c){var d=b(a.html).find(".stree-text"),e=d.text();a.property&&(a.property.nm=c),d.html(c),this.triggerEvent("rename",a,c,e),d=e=null}},deleteNode:function(a){if(a="string"==typeof a?this.cache(a):a,!this.hasChildren(a)){var c,d,e,f,g,h=a.parents;if(h&&h.length>0){for(c=this.cache(h[h.length-1]),d=c.property.sn||[],e=[],f=0,g=d.length;g>f;f+=1)d[f].id!==a.property.id&&e.push(d[f]);c.property.sn=e}b(a.html).remove(),this.triggerEvent("deleteNode",a,h),d=e=null}},toggleNode:function(a){var c="string"==typeof a?this.container.find("div[data-id='"+a+"']"):b(a);0!==c.size()&&(c.hasClass("stree-node-retracted")?this.unfoldNode(c):this.foldNode(c))},unfoldNode:function(a){var c="string"==typeof a?this.container.find("div[data-id='"+a+"']"):b(a);0!==c.size()&&(c.removeClass("stree-node-retracted"),c.next("ul").removeClass("hide")),this.triggerEvent("unfold",c)},foldNode:function(a){var c="string"==typeof a?this.container.find("div[data-id='"+a+"']"):b(a);0!==c.size()&&(c.addClass("stree-node-retracted"),c.next("ul").addClass("hide")),this.triggerEvent("fold",c)},getChecked:function(){var a,b,c,d=[],e=this._cacheIndex;for(b=0,c=e.length;c>b;b+=1)a=this.cache(e[b]),a.checked&&d.push(a);try{return d}finally{d=a=e=null}},getChildNodes:function(a,b){var c,d,e,f,g="string"==typeof a?this.cache(a):a,h=g&&g.property?g.property.sn||g.property.children||[]:[],i=[];for(e=0,f=h.length;f>e;e+=1)c=h[e],d=this.cache(c.id),d&&i.push(d),b&&(c.sn||c.children)&&(i=i.concat(this.getChildNodes(c.id,b)));try{return i}finally{g=h=i=c=d=a=null}},isRoot:function(a){var b="string"==typeof a?this.cache(a):a;try{return b&&0===b.level}finally{b=null}},getSiblings:function(a){var b,c,d,e,f="string"==typeof a?this.cache(a):a,g=f.parents?f.parents[f.parents.length-1]:null,h=g&&g.property?g.property.sn||g.property.children||[]:[],i=[];for(g&&(g=this.cache(g)),d=0,e=h.length;e>d;d+=1)b=h[d],c=this.cache(b.id),c&&b.id!==a&&i.push(c);try{return i}finally{f=g=h=i=b=c=a=null}},checkNode:function(c,e){return a.isArray(c)?(!1!==this.triggerEvent("beforeCheck",c)&&c.length>0&&a.batch(c,1e3,0,10,function(g,h,i){var j,k,l;for(k=0,l=g.length;l>k;k+=1)j=g[k],"string"==typeof j&&(j=d.cache(j)),j.checked=!0,b(j.html).addClass(f.checkedCss||"stree-node-checked").find("input[type='checkbox']").attr("checked",!0);!h||a.isFunction(e)&&e.call(d,c)===!1||d.triggerEvent("check",c),4===i&&a.lock(d.ui)},function(){a.unlock(d.ui)}),void 0):a.log("Error at tbc.Tree().checkNode(list): arguments[0]:list must be an array;")},uncheckNode:function(c,e){return a.isArray(c)?(!1!==this.triggerEvent("beforeUncheck",c)&&c.length>0&&a.batch(c,1e3,0,10,function(g,h,i){var j,k,l;for(k=0,l=g.length;l>k;k+=1)j=g[k],"string"==typeof j&&(j=d.cache(j)),j.checked=!1,b(j.html).removeClass(f.checkedCss||"stree-node-checked").find("input[type='checkbox']").removeAttr("checked");!h||a.isFunction(e)&&e.call(d,c)===!1||d.triggerEvent("uncheck",c),4===i&&a.lock(d.ui)},function(){a.unlock(d.ui)}),void 0):a.log("Error at tbc.Tree().uncheckNode(list): arguments[0]:list must be an array;")},chooseNode:function(a,b){a="string"==typeof a?this.cache(a):a;var c=f,d=this.getWillBeChecked(a);c.singleCheck?(!b&&c.singleCheck&&this.uncheckNode(this.getWillBeUnchecked(a)),a.checked?this.uncheckNode(d):this.checkNode(d)):a.checked?this.uncheckNode(d):this.checkNode(d),a=d=c=null},getWillBeChecked:function(a){a="string"==typeof a?this.cache(a):a;var b=[a];f.cascadeCheck&&(b=b.concat(this.getChildNodes(a,!0)));try{return b}finally{b=a=null}},getWillBeUnchecked:function(b){b="string"==typeof b?this.cache(b):b;var c,d,e,g=this.cache(),h=this.cache("index"),i=[];for(d=0,e=h.length;e>d;d+=1)c=h[d],!f.cascadeCheck&&b&&b.property.id!==c&&g[c].checked?i.push(g[c]):b&&b.property.id!==c&&g[c].checked&&-1===a.array.indexOf(b.property.id,g[c].parents)&&i.push(g[c]);try{return i}finally{i=g=h=c=null}},hasChildren:function(a){var b="string"==typeof a?this.cache(a):a;try{return b&&b.property.sn&&b.property.sn.length>0}finally{b=null}},isFirst:function(a){var b="string"==typeof a?this.cache(a):a,c=b.parents[b.parents.length-1],d=c?this.cache(c).property.sn:null,e=d&&d[0].id===a?!0:!1;try{return e}finally{b=c=d=null}},isLast:function(a){var b="string"==typeof a?this.cache(a):a,c=b.parents[b.parents.length-1],d=c?this.cache(c).property.sn:null,e=d&&d[d.length-1].id===a;try{return e}finally{b=c=d=null}},setCurrent:function(a){a="string"==typeof a?this.cache(a):a||this.getCurrent();var c,d=f.currentCss||"stree-node-selected",e=a.property,g=a.html,h=e&&e.sn&&e.sn.length>0;return e&&(e.tp=e.tp||"ORGANIZATION"),b(a.html).hasClass(d)?(this.triggerEvent("select",e,b(g),h),d=e=g=h=null,void 0):(c=this.container.find("dt."+d).removeClass(d).attr("data-id"),this.cache(c,"current",!1),b(a.html).addClass(d),a.current=!0,this.triggerEvent("select",e,b(g),h),d=e=g=h=null,void 0)},selectNode:function(a,c,d){var e="string"==typeof a?this.cache(a):a||this.getCurrent(),g=f.currentCss||"stree-node-selected",h=e.property,i=e.html,j=h&&h.sn&&h.sn.length>0;h&&(h.tp=h.tp||"ORGANIZATION"),e.current===!0?c!==!0?this.deselectNode(this.getSelectedList()):(b(e.html).removeClass(g),e.current=!1):(b(e.html).addClass(g),e.current=!0,this.triggerEvent("select",h,b(i),j,d),c!==!0&&this.deselectNode(this.getSelectedList([e.property.id]))),g=h=i=j=null},deselectNode:function(a){var c,d,e=f.currentCss||"stree-node-selected";for(c=0,d=a.length;d>c;c+=1)b(a[c].html).removeClass(e),a[c].current=!1;this.triggerEvent("deselect",a)},getCurrent:function(){var a,b,c,d;for(c=0,d=this._cacheIndex.length;d>c;c+=1)if(b=this._cacheIndex[c],a=this.cache(b),a.current===!0)try{return a}finally{b=a=null}b=this.container.children("ul:first").children("li:first").children(".stree-node").attr("data-id");try{return this.cache(b)}finally{b=a=null}},getSelectedList:function(a){a=b.isArray(a)?a:[a];var c,d,e,f,g,h,i=[];for(d=0,e=this._cacheIndex.length;e>d;d+=1)if(c=this._cacheIndex[d],this.cache(c).current){for(f=!1,g=0,h=a.length;h>g;g+=1)if(a[g]===c){f=!0;break}f||i.push(this.cache(c))}try{return i}finally{c=i=null}},getFirstNode:function(){var a=this.container.children("ul:first").children("li:first").children(".stree-node").attr("data-id");try{return this.cache(a)}finally{a=null}}}),d.ui.delegate(".stree-handle","click",function(a){a.stopPropagation();var c,e,f,g,h=d,i=this.parentNode,j=i.getAttribute("data-id"),k=h.cache(j),l=k.property,m=l.sn||l.children;h.toggleNode(i),l&&m&&!k.rendered&&(c=window.parseInt(k.level)+1,e=h.createChild(m,c,k.parents.concat([j])),k.rendered=!0,h.cache(j,"rendered",!0),f=b(this.parentNode.parentNode).append(e),g=f.find("dt.stree-node"),h.addHtmlCache(g),h.triggerEvent("itemRender",m),m=c=e=null),h=i=j=k=null}),d.ui.delegate(".stree-node","click",function(a){var b=this.getAttribute("data-id");d.selectNode(b,a.ctrlKey&&f.multiple)}),d.ui.delegate(".stree-node","dblclick",function(a){var b=this.getAttribute("data-id"),c=!0;d.selectNode(b,a.ctrlKey&&f.multiple,c)}),f.checkbox&&d.ui.delegate("input[type='checkbox']","click",function(a){d.chooseNode(this.value,a.ctrlKey||!f.singleCheck),a.stopPropagation()})}}(tbc,jQuery),tbc.namespace("tbc.tree"),tbc.tree.Online=function(a){var b,c=tbc.self(this,arguments),d={},e=$.extend({},d,a);c.extend([tbc.Tree,a],{packageName:"tbc.tree.Online",renderOnlineNumber:function(){this.batch(this._cacheIndex,1e3,0,10,function(a,c){for(var d,e=0,f=a.length;f>e;e++)d=a[e],this.render2Html(d,this.cache(d,"amount"));if(a=d=null,c){var g=this;b=setTimeout(function(){g.request(),g=null},this.interval||18e4)}})},singleRender:function(a){var b,c,d;for(a=$.isArray(a)?a:[a],b=0,c=a.length;c>b;b++)d=a[b],this.render2Html(d,this.cache(d,"amount"))},render2Html:function(a,b){b=!b||isNaN(b)?0:b;var c=$(this.cache(a,"html")),d=c.find(".stree-count");c.size()&&(d.size()?d.html("&nbsp;["+b+"]"):c.append('<i class="stree-count">&nbsp;['+b+"]</i>"))},countOnlineNumber:function(a,b){b=b||[];for(var c,d,e,f,g,h=0,i=a.length;i>h;h++)f=a[h],c=f.id,d=f.n,e=f.sn||f.c,this.cache(c,"amount",d),e&&e.length>0&&this.countOnlineNumber(e,b.concat([c])),this.updateParents(b,d);c=d=e=f=g=null},updateParents:function(a,b){for(var c=0,d=a.length;d>c;c++){var e=this.cache(a[c],"amount");this.cache(a[c],"amount",b+e)}},request:function(){var a=c;$.ajax({url:e.onlineUrl,type:"get",dataType:"json",success:function(b){a.countOnlineNumber(b),a.renderOnlineNumber(),a=null}})},start:function(){this.request()},stop:function(){clearTimeout(b)}}),c.addEvent({itemRender:function(a){try{for(var b=0,c=a.length,d=[];c>b;b++)d.push(a[b].id);this.singleRender(d)}catch(e){alert(e.line)}}})},tbc.Translator=function(a,b){var c=a instanceof Object?a:{};this.result=[],this.cache={},this.getRules=function(){return c},this.getKey=function(a,d){var e,f;switch(d){case"fresh":return b===!0?c[a]||a:c[a];case"antique":default:for(e in c)null!==c[e]&&c[e]===a&&(f=e);return b===!0?f||a:f}return null},this.setRules=function(){var a,b;if(arguments[0]instanceof Object?a=arguments[0]:(a={},a[arguments[0]]=arguments[1]),c=c instanceof Object?c:{},a instanceof Object)for(b in a)c[b]=a[b];return!0},this.clear=function(){this.result=[],c=null},this.transformList=function(a,b){if(!$.isArray(a))return a;var c,d,e,f=[];for(c=0,d=a.length;d>c;c++)e=this.transform(a[c],b),f.push(e);try{return f}finally{f=null}return a},this.transform=function(a,b){var c,d,e;if(a instanceof Object){e={};for(c in a)d=this.getKey(c,b),"string"==typeof d&&(e[d]="function"==typeof this.valueTranslator?this.valueTranslator(d,a[c],b):a[c]);try{return e}finally{e=null}}return a},this.toFresh=function(a){return list instanceof Object?this.transform(a,"fresh"):this.transformList(a,"fresh")},this.toAntique=function(a){return list instanceof Object?this.transform(a,"antique"):this.transformList(a,"antique")}},function(a,b){"use strict";a.appManager=function(){this.appStore={}},a.App=function(c,d){var e,f=a.extend({width:c.preferredWidth||900,height:c.preferredHeight||400,name:c.userDeskItemName||c.applicationName,icon:c.applicationIconUrl,homepage:c.homePageUrl,minWidth:480,minHeight:320},c,d);e=f.homePageUrl+(-1===f.homePageUrl.indexOf("current_app_id")?(-1!==f.homePageUrl.indexOf("?")?"&":"?")+"current_app_id="+d.applicationId:""),b.extend(f,{homePageUrl:e,homepage:e,refreshable:!0,resettable:!0,helpable:!0,autoLoad:!0,scrolling:!1}),a.self(this,arguments).extend([a.Window,f],{initApp:function(){return this.packageName="tbc.App",this.ui.addClass("helpable refreshable"),this}}).addEvent({destroy:function(){f=c=d=null}}).initApp()}}(tbc,jQuery),function(a,b){"use strict";b.AppSelector=function(c){var d={name:"选择应用",icon:"icon-zoom_in",width:500,height:600,loadType:"html",multipleSelect:!1},e=a.extend({},d,c);e.buttons={"选择":function(){this.returnValue=this.getSelected(),this.close()},"取消":function(){this.close()}},b.self(this,arguments).extend([b.dialog,e],{layout:function(){var b=this,c=['<div style="padding:1em;">'];a.each(window.applicationMap,function(){c.push('<a class="app-icon-item" href="javascript:void(null);" onclick="return false;" data-id="'+this.applicationId+'">'+'   <img class="app-icon-img" title="'+this.applicationName+'" src="'+this.applicationIconUrl+'" />'+'   <i class="app-icon-text">'+this.applicationName+"</i>"+"</a>")}),c.push("</div>"),this.append(c.join("")),this.ui.on("click","a.app-icon-item",function(c){c.preventDefault(),a(this).addClass("app-icon-selected"),c.ctrlKey&&b.options.multipleSelect||a(this).siblings("a.app-icon-item").removeClass("app-icon-selected")}).on("dblclick","a.app-icon-item",function(){b.returnValue=b.getSelected(),b.close()})},getSelected:function(){var a=[];return this.ui.find("a.app-icon-selected").each(function(){a.push(window.applicationMap[this.getAttribute("data-id")])}),a}}).addEvent({show:function(){this.layout()}})}}(jQuery,tbc),function(a,b){"use strict";a.AppTray=function(c){var d={container:".tbc-appsTray",ui:".tbc-appsTray",invisible:".tbc-task-invisible",invisibleHandle:".tbc-task-invisible-handle"},e=b.extend({},d,c),f='<span class="tbc-button-link" title="{0}"><i class="tbc-imgicon tbc-icon icon-18"><img src="{1}"/></i><span class="tbc-button-text">{0}</span></span>';a.self(this,arguments).extend({init:function(){var a=this;this.cache={},this.cache_length=0,this.packageName="tbc.AppTray",this.ui=b(e.ui),this.handle=b(e.invisibleHandle,this.ui),this.container=b(e.container,this.ui),this.invisible=b(e.invisible,this.ui),this.container=this.container.size()?this.container:this.ui,this.handle.click(function(b){return a.toggleInvisible(),b.stopPropagation(),!1})},append:function(c){var d={guid:null,icon:"",title:"",click:null},e=b.extend({},d,c),g=b(a.formatString(f,e.title,e.icon||""));return a.system.isImg(e.icon)?g.find("img").show().attr("src",e.icon):g.find("img").hide().parent().addClass(e.icon),e.showTitle||g.children(".tbc-button-text").html(""),e.guid?(g.appendTo(this.container),g.attr("guid",e.guid).bind({click:e.click}),this.cache[e.guid]||(this.cache[e.guid]=g,this.cache_length+=1,this.toggleHandle()),window.taskbar.resize(),d=e=c=g=null,void 0):alert("缺少配置项: {guid:undefined}")},drop:function(a){var b=this.cache[a];b&&(b.remove(),delete this.cache[a],this.cache_length-=1,this.toggleHandle()),b=null},icon:function(b){a.system.isImg(b)?this.handle.find(".tbc-icon").children("img").show().attr("src",b):this.handle.find(".tbc-icon").addClass(b).children().hide()},tips:function(a){this.handle.find(".tbc-button-text").attr("title",a).html(a)},hasSpace:function(){var a=this.container[0].clientWidth,b=18*this.cache_length;return a>b},showInvisible:function(a){var c=this;this.invisible.stop().slideDown(200),a!==!1&&(this.invisibleState="show"),b(document).bind({"click.hideQuicklaunch":function(){c.hideInvisible()}})},hideInvisible:function(a){this.invisible.stop().slideUp(200),a!==!1&&(this.invisibleState="hide"),b(document).unbind(".hideQuicklaunch")},toggleInvisible:function(){"hide"===this.invisibleState?this.showInvisible():this.hideInvisible()},toggleHandle:function(){this.container[0].clientWidth/18>this.cache_length?this.handle.show():this.handle.hide()},isExist:function(a){return this.cache[a]?!0:!1},open:function(){}}).init()}}(tbc,jQuery),function(a,b,c){"use strict";a.Desktop=function(d){var e={prevHandle:".tbc-tabset-prev",nextHandle:".tbc-tabset-next",container:".tbc-tabset",header:".tbc-desktop-nav",effects:"slide-x",easing:"swing",loop:!0,auto:!0,timeout:5e3,speed:400},f=b.extend({},e,d);a.self(this,arguments).extend([a.Tabset,d],{manager:new a.DesktopManager,loadScene:function(){var d=this;b.ajax({url:c.getSceneSettings,type:"get",datas:{deskindex:0,loadDockItem:!0},dataType:"json",cache:!1,complete:function(){},error:function(){var c,d,e;e=b("<Div/>").css({textAlign:"center",padding:"10px 32px"}),d=new a.Button({text:"立即刷新",icon:"tbc-icon-close",click:function(){c.close()}}).appendTo(e),c=new a.Panel({width:300,height:180,name:"提示"}).append('<div style="padding:30px 30px 10px; color:red;">加载桌面数据失败,请刷新页面...</div>').append(e).appendTo("body").show().addEvent({close:function(){c.DESTROY(),d.DESTROY(),b("body").fadeOut(function(){window.onbeforeunload=null,document.location.reload()})}})},success:function(a){a&&d.onDataLoad(a)}})},isAdmin:function(){var a,b,c,d,e=this.userinfo.roles,f=this.rolelist;for(a=0,b=e.length;b>a;a+=1)for(c=0,d=f.length;d>c;c+=1)if(e[a]===f[c].id&&"ADMIN"===f[c].type)return!0;return!1},isSysAdmin:function(){return this.userinfo&&this.userinfo.isHasAdmin},onDataLoad:function(b){b=b||{};var c,d=a.webdesk.data.translator,e=a.webdesk.data.apps;if(window.applicationMap||b.applicationMap)window.applicationMap=window.applicationMap||b.applicationMap;else{window.applicationMap={};for(c in b.apps)b.apps.hasOwnProperty(c)&&(window.applicationMap[c]=e[c]=d.apps.transform(b.apps[c],"antique"));e=null}a.system.settings=this.systemSettings=b.settings||b.setting||{},this.userinfo=b.user,this.corpinfo=b.company,this.rolelist=b.roles,window.corpCode=b.company.corpCode,this.initScene(b.scenes),this.initDock(b.tools),this.initWidget(b.autoruns),this.initContextmenu()},initScene:function(a){var b,c,d;for(b=0,c=a.length;c>b;b+=1)this.addScene(b,a[b]),a[b].isDef&&(d=b);this.effect("slide-x"),this.show(d||0)},initAppTray:function(b){if(b instanceof Array){var c,d,e=a.webdesk.data,f=e.translator.tools.transformList(b,"antique");for(e.trays=f,c=0,d=f.length;d>c;c+=1)new a.Shortcut(f[c]).appendTo(".tbc-desktop-dock");e=f=null}return this},initDock:function(c){if(b.isArray(c)){var d,e,f=a.webdesk.data,g=f.translator.tools.transformList(c,"antique");for(f.tools=g,d=0,e=g.length;e>d;d+=1)new a.Shortcut(g[d]).appendTo(".tbc-desktop-dock");f=g=null}},initWidget:function(c){if(b.isArray(c)){var d,e,f,g;for(f=0,g=this.tabs.length;g>f;f+=1){switch(this.tabs[f].options.type){case"USER":case"ADMIN":case"OTHER":case"DESKTOP":case"APP":case"APPLICATION":case null:d=this.tabs[f]}if(d)break}d&&(e=a.webdesk.data.translator.autoruns.transformList(c,"antique"),d.appendWidgets(e))}},dataTranslate:function(b){var c,d,e=a.webdesk.data,f=e.translator,g=b.requestUserDesk,h=g.userDeskItemList,i=g.autoRunItemList,j=b.applicationMap,k=b.userDeskDock.userDeskDockItemList,l=[];for(c in j)j.hasOwnProperty(c)&&(e.apps[c]=f.apps.transform(j[c],"fresh"));for(e.shortcuts=f.shortcuts.transformList(h,"fresh"),e.autoruns=f.autoruns.transformList(i,"fresh"),d=0;d<k.length;d+=1)e.tools.push(f.shortcuts.transform(k[d].userDeskItem,"fresh"));e.trays=f.shortcuts.transformList(l,"fresh"),e.apps=f.apps.to},startShortcutsManager:function(){var b=this;this.shortcutsManager instanceof a.Window||(this.shortcutsManager=new a.Window({name:"管理快捷方式",icon:"icon-add_small",width:848,height:460,minWidth:830,minHeight:460,scrolling:!1,resizables:!1,maximizable:!0,minimizable:!0,loadType:"ajax",homepage:c.startShortcutManager}),this.shortcutsManager.addEvent({close:function(){b.shortcutsManager=null,delete b.shortcutsManager}})),this.shortcutsManager.show()},startSimpleShortcutsAdd:function(){var b=this;b.simpleShortcutsManager instanceof a.Window||(b.simpleShortcutsManager=new a.Window({name:"新增快捷方式",icon:"icon-add_small",width:640,height:320,loadType:"ajax",homepage:c.startShortcutAdd,scrolling:!1,resizables:!1,maximizable:!0,minimizable:!0}),b.simpleShortcutsManager.addEvent({close:function(){b.simpleShortcutsManager=null,delete b.simpleShortcutsManager}})),b.simpleShortcutsManager.show()},addScene:function(c,d){var e,g,h=b('<span title="" class="tbc-scene-title scene_title_'+(c+1)+" "+("ADMIN"===d.type?"scene_title_admin":"")+'" hidefocus="true">'+'    <i class="tbc-icon">'+("ADMIN"!==d.type?c+1:"")+"</i>"+"</span>"),i=h.find("img"),j=b('<div style="display:none;" class="tbc-slide-scene"></div>');j.scroll(function(){this.scrollTop=0,this.scrollLeft=0}),g=new a.Scene(b.extend({title:null,icon:null,closable:!1,closeNode:null,content:null,type:d.type,url:d.url,duration:f.speed,easing:f.easing,autoShow:0===c,id:d.id},d,{handleNode:h,titleNode:e,iconNode:i,container:j})),h.attr("title",g.nameTranslator(d.name||d.title)),this.append(g),g.ui.attr({tbc:g.guid,svid:d.id}),"LINK"!==d.type&&"APPLICATION"!==d.type&&(g.container.selectArea({item:".tbc-shortcut",exclude:".tbc-folder-shortcut",classSelected:"tbc-shortcut-selected",event:{select:function(){},unselect:function(){}}}),this.iconsDrager.addContainer(g.container),this.iconsDrager.addContainer(g.handle));try{return g}finally{g=h=null}},saveDockShortcuts:function(a){a=b.isArray(a)?a.join(","):a,a||(a=[],b(".tbc-desktop-dock .tbc-shortcut").each(function(){a.push(this.getAttribute("_shortcutid"))}),a=a.join(",")),b.ajax({url:c.saveDockShortcuts,type:"post",data:{items:a},dataType:"json",success:function(){}})},setBackgroundMode:function(a){function c(){var c,d,e,f=document.body.offsetWidth,g=document.body.offsetHeight,h=this.width,i=this.height,j={x:f/h,y:g/i},k=0,l=0;switch(a){case"cover":j.x>j.y?(d=f,e="auto",k=-(i*j.x-g)/2):(d="auto",e=g,l=-(h*j.y-f)/2),b(".tbc-wallpaper img").show().css({width:d,height:e,left:l,top:k}).parent().css({background:""});break;case"contain":j.x<j.y?(d=f,e="auto",k=-(i*j.x-g)/2):(d="auto",e=g,l=-(h*j.y-f)/2),b(".tbc-wallpaper img").show().css({width:d,height:e,left:l,top:k}).parent().css({background:""});break;case"extrude":b(".tbc-wallpaper img").show().css({width:f,height:g,left:0,top:0}).parent().css({background:""});break;case"repeat":c=b(".tbc-wallpaper img").hide().attr("src"),b(".tbc-wallpaper").css({background:"url("+c+") center center repeat"});break;case"center":c=b(".tbc-wallpaper img").hide().attr("src"),b(".tbc-wallpaper").css({background:"url("+c+") center center no-repeat"});break;default:c=b(".tbc-wallpaper img").hide().attr("src"),b(".tbc-wallpaper").css({background:"url("+c+") center center no-repeat"})}b(".tbc-wallpaper img").attr("src")}a=a||this.bgMode||"center",this.bgMode=a;var d=new Image;d.onload=c,d.src=b(".tbc-wallpaper img").attr("src"),d=null},setBackground:function(a,c){if(a){try{if(window.screen){var d=window.screen.width,e=window.screen.height;a+=800>=d?"/big":1024>=d?"/big":1280>=d?e>800?"/square":"/bigger":1366>=d?"/large":1440>=d?"/larger":""}}catch(f){}b(".tbc-wallpaper img").attr("src",a)}return this.setBackgroundMode(c),this},loadBackgorund:function(){var a=this;b.get(c.getCurrentBg,function(b){a.setBackground(b.url,b.backgroundSpreadType||b.mode)})},selectBg:function(b){var d=this;return d.selecting=!0,this.bgSelector=this.bgSelector?this.bgSelector.focus().flash():new a.Window({name:"设置桌面背景"+(b?"(管理员)":""),homepage:b?c.selectBgAdmin:c.selectBg,loadType:"ajax",icon:"icon-image_cultured",width:564,height:490,resizable:!0,minimizable:!0,maximizable:!0,scrolling:!0}).addEvent({setBackground:function(a){d.setBackground(a)},close:function(){delete d.bgSelector,d.selecting=!1}}).show(),this},createFolder:function(a){this.creatFolder(a)},creatFolder:function(c){var d,e=this,f=b('<div title="最多5个汉字或10个英文字符." style="clear:both; margin-bottom:2em; color:#888;">最多5个汉字或10个英文字符.</div>'),g=b('<div style="margin:32px;">    <label>输入文件夹名称:<br/></label><br/></div>'),h=new a.Button({text:"创建",icon:"icon-check",click:function(){var h=b.trim(g.find(".tbc-inputer").val()),i=a.substr(h,10);i+"("+h.replace(i,"")+")",i.length<h.length?f.shake().html("文件夹名过长,最多5个汉字或10个英文字符.").css({color:"red"}):e.creatFolderFromServer(i,c,d,f)}}),i=b('<input class="tbc-inputer" value="新文件夹" type="text" style="width:200px; height:26px; line-height:26px; margin-bottom:4px;" length="5" onclick="this.focus();" />').bind({click:function(){this.focus()},focus:function(){f.html(f.attr("title")).css({color:"#888"})},keyup:function(a){13===a.keyCode&&h.click()}}),j=new a.Button({text:"取消",icon:"icon-close",click:function(){d.close()}});h.ui.css({marginRight:"10px"}),d=new a.Window({name:"创建文件夹",loadType:"html",icon:"icon-folder_modernist_add_simple",width:369,height:240}).addEvent({focus:function(){i.focus()},close:function(){h=i=d=j=null}}).show(),j.depend(d),h.depend(d),i.appendTo(g.find("label")),f.appendTo(g),h.appendTo(g),j.appendTo(g),d.append(g)},creatFolderFromServer:function(d,e,f,g){b.ajax({url:c.saveNewFolder,data:{folderName:d||"新文件夹",userDeskId:e.svid||e.id},type:"post",dataType:"json",beforeSend:function(){f.lock("loading","正在保存...")},complete:function(){f.unlock("loading","正在保存...")},error:function(){},success:function(b){var c,d;b?(c=a.webdesk.data.translator.shortcuts,b=c.transform(b,"antique"),d=new a.Shortcut(b).appendTo(e),e.layout(),f.close()):g.html("创建失败,可能文件夹已存在.").css({color:"red"})}})},minAll:function(){var b;for(b in a.Panel.cache)a.Panel.cache.hasOwnProperty(b)&&a.Panel.cache[b].min()},setDockZindex:function(){var a=document.body.offsetWidth;1e3>a?b(".tbc-desktop-dock").css({zIndex:3}):b(".tbc-desktop-dock").css({zIndex:4})},setDockPosition:function(){var a=document.body.offsetHeight,c=b(".tbc-desktop-dock"),d=c.height(),e=Math.max(document.documentElement.scrollTop,document.body.scrollTop);this.setDockZindex(),c.css({top:(a-d)/2+e})},initDrager:function(){this.iconsDrager=new a.Drag({node:".tbc-shortcut",handle:".tbc-shortcut-inner",targets:".tbc-desktop-dock",timeout:300,selected:".tbc-shortcut-selected",disableInsertTargets:".disableInsertTargets,.tbc-scene-title"}).addEvent({move:function(){},beforeInsert:function(b){try{return a.system.getTaskByElement(b.node).triggerEvent("beforeMove",b)}catch(c){return!1}},afterInsert:function(b){try{return a.system.getTaskByElement(b.node).triggerEvent("afterMove",b)}catch(c){return!1}}})},initContextmenu:function(){var c=this,d=[{role:"user,admin",disabled:!1,icon:"icon-folder_modernist_add_simple",text:function(){return c.isSysAdmin()||a.system.settings.allowCreateFolder!==!1?"新建文件夹":null},click:function(){c.creatFolder(c.current())}},{role:"user,admin",text:function(){return c.isSysAdmin()||a.system.settings.allowCreateShortcut!==!1?"新建快捷方式":null},icon:"icon-heart_add",click:function(){c.startSimpleShortcutsAdd()}},{role:"user,admin",text:"管理快捷方式",icon:"icon-heart_edit",click:function(){c.startShortcutsManager()}},{role:"user",text:function(){return c.isSysAdmin()||a.system.settings.allowChangeBg!==!1?"设置桌面背景 ":!1},icon:"icon-image_cultured",click:function(){c.selectBg()},disabled:function(){return c.selecting===!0},inheritable:!1},{role:"admin",text:function(){return c.isSysAdmin()?"设置、背景管理  (管理员)":!1},icon:"icon-image_cultured",click:function(){c.selectBg(c.isSysAdmin())},disabled:function(){return c.selecting===!0
},inheritable:!1},"line",{role:"user,admin",text:"屏幕切换",icon:"",disabled:function(){return c.tabs.length<2},inheritable:!0,submenu:function(){if(c.tabs.length>1){var a=[];return b.each(c.tabs,function(b,d){a.push({text:"第"+(b+1)+"屏  ("+this.nameTranslator(this.options.name||this.options.title)+")",icon:d.icon(),click:function(){c.show(b)},disabled:d===c.current()})}),a}}},{role:"user,admin",text:"前一屏",icon:"icon-arrow_medium_left",click:function(){c.prev()},disabled:function(){return c.isFirst()}},{role:"user,admin",text:"后一屏",icon:"icon-arrow_medium_right",click:function(){c.next()},disabled:function(){return c.isLast()}}];this.container.contextmenu({items:d})},init:function(){var c=this;return this.packageName="tbc.Desktop",this.loadBackgorund(),this.initDrager(),b(document).ready(function(){c.setDockPosition()}),b(window,document).bind("resize.desktop"+this.guid,function(){var b=c.current();b instanceof a.Scene&&"function"==typeof b.layout&&b.layout(),c.setBackgroundMode(),c.setDockPosition()}),this}}).init()}}(window.tbc,window.jQuery,window.URLS),function(a,b){"use strict";a.ns("tbc.desktop"),a.desktop.Wallpaper=function(){var c=a.self(this,arguments);c.extend({setUploadButton:function(){b("#bgUploadSelector").uploadify({formData:{},buttonText:b("#bgUpload").attr("data-text")||"上传图片",buttonClass:"tbc-button-blue",width:80,fileTypeExts:"*.png;*.jpg;*.jpeg;",fileTypeDesc:"图片",swf:"/webdesk/js/jQuery/plugins/uploadify/uploadify.swf",uploader:"/webdesk/js/jQuery/plugins/uploadify/uploadify.php",onUploadError:function(){},onUploadSuccess:function(c,d){d=b.parseJSON(d);var e=d.id,f=d.filepath;a.desktop.wallpaper.addImageToList(e,f)}})},addImageToList:function(a,c){var d=b('<figure data-id="'+(new Date).getTime()+'"></figure>');d.html('<i><img src="/webdesk'+c+'" /></i> <a class="bg-image-delete" href="javascript:void(0);">&times;</a>'),b(".bg-image-list").prepend(d)},deleteImage:function(a,c,d){"string"==typeof a&&(a={corpImageId:a,corpCode:window.corpCode}),b.ajax({url:d||"/webdesk/html/wallpaper/ajax/delete.json",type:"post",dataType:"json",data:a,success:function(d){d.success&&b("figure[data-id='"+a.corpImageId+"']").remove(),b.isFunction(c)&&c(d)}})},applyImage:function(a,c,d){"string"==typeof a&&(a={corpImageId:a,corpCode:window.corpCode}),b.ajax({url:d||"/webdesk/html/wallpaper/ajax/apply.json",type:"post",dataType:"json",data:a,success:function(d){if(d.success){var e=b("figure[data-id='"+a.corpImageId+"']").addClass("current"),f=e.find("img").attr("data-src")+"#";e.siblings().removeClass("current"),window.desktop.setBackground(f)}b.isFunction(c)&&c(d)}})},changeMode:function(a,c,d){b.ajax({url:d||"/webdesk/html/wallpaper/ajax/change-mode.json",type:"post",dataType:"json",data:{mode:a,corpCode:window.corpCode},success:function(d){d.success&&window.desktop.setBackgroundMode(a),b.isFunction(c)&&c(d)}})}})}}(tbc,jQuery),tbc.namespace("tbc.desktop"),tbc.desktop.Widget=function(a){var b=tbc.self(this,arguments);b.packageName="tbc.desktop.Widget";var c={url:null,id:null,width:230,height:260,target:".tbc-slide-scene.current"},d=$.extend({},c,a),e=$('<div widgetid="" class="tbc-widget" _widgetId="'+d.id+'"></div>').html('<div class="tbc-widget-tools">	<a role="close" class="tbc-widgets-close" href="#" title="关闭">&times;</a>	<a role="refresh" class="tbc-widgets-refresh" href="#" title="刷新">&times;</a>	<a role="fix" class="tbc-widgets-fix" href="#" title="固定">&times;</a></div><div class="tbc-widget-msg"></div><div class="tbc-widget-inner">	<iframe frameborder="0;" src="about:blank" border="0" allowtransparency="true"></iframe></div><div class="tbc-widget-locklayer"></div><div class="clear"></div>').css({left:"auto",right:d.right,top:d.top}),f=e.find("iframe")[0],g=$(".tbc-widget-msg",e),h=$(".tbc-widget-tools",e);e.attr("tbc",b.guid),b.ui=e,b.id=d.id,h.delegate("a","click",function(){var a=this.getAttribute("role");switch(a){case"fix":b.triggerFix();break;case"refresh":b.reload();break;case"close":b.toggle()}}),onload=function(){var a,c,g,i=f.contentWindow.document;i.oncontextmenu=null,$(i.body).css({"-moz-user-select":"none","-webkit-user-select":"none","-o-user-select":"none","-ms-user-select":"none","user-select":"none"}).bind("selectstart",function(){return!1}),$("body",i).css({cursor:"move"});var j,k;d.control&&(h.unbind("mouseenter").unbind("mouseleave").bind({mouseenter:function(){clearTimeout(j),h.stop().slideDown()},mouseleave:function(){j=setTimeout(function(){h.stop().slideUp()},200)}}),$(i).unbind("mouseenter").unbind("mouseleave").bind({mouseenter:function(){clearTimeout(j),k=setTimeout(function(){h.slideDown()},500)},mouseleave:function(){clearTimeout(k),j=setTimeout(function(){h.slideUp()},500)}})),$(i).unbind("mousedown").unbind("mouseup").unbind("contextmenu").bind({mouseup:function(){clearTimeout(g),$("body",this).unbind("selectstart")},contextmenu:function(a){try{var b=$(f),c=b.offset(),d=c.top+a.pageY,e=c.left+a.pageX;$(b).trigger("contextmenu",{top:d,left:e})}catch(g){}finally{b=b[0]=c=d=e=null}return!1},mousedown:function(d){if($(this).trigger("click.hideContextmenu"),$("body",this).bind({selectstart:function(){return!1}}),(!tbc.msie||tbc.browserVersion>8)&&d.preventDefault&&d.preventDefault(),a=d.pageX-i.documentElement.scrollLeft+f.offsetLeft,c=d.pageY-i.documentElement.scrollTop+f.offsetTop,tbc.mozilla||tbc.opera){var j=(d.pageX+f.offsetLeft,d.pageY+f.offsetTop,{});j.left=d.pageX,j.top=d.pageY,e.css({right:document.documentElement.scrollLeft+document.body.offsetWidth-e[0].offsetLeft-e.width(),left:"auto",top:e[0].offsetTop});var k;g=setTimeout(function(){e.css({zIndex:7}),$(i).bind({"mousemove.drag":function(a){b.fixed||(h.hide(),clearTimeout(k),k=setTimeout(function(){var b={left:a.pageX,top:a.pageY};e.stop().animate({left:"auto",right:"-="+(b.left-j.left)+"px",top:"+="+(b.top-j.top)+"px"})},30))},"mouseup.drag":function(){h.show(),$(i).unbind(".drag"),clearTimeout(g),e.css({zIndex:""}),b.triggerEvent("drop",{top:e.css("top"),right:e.css("right")})}})},0)}else g=setTimeout(function(){e.css({zIndex:7}),b.dragMask=$('<div><input type="text" /></div>').css({background:"#fff",display:"none",opacity:.005,width:"100%",height:"100%",position:"absolute",left:0,top:0,zIndex:1e5}).bind({"mouseup.drag":function(){h.show(),this.style.display="none",e.css({zIndex:""}),b.dragMask.unbind(".drag").remove(),b.triggerEvent("drop",{top:e.css("top"),right:e.css("right")}),clearTimeout(g)},"mousemove.drag":function(d){b.fixed||(h.hide(),e.css({right:document.body.offsetWidth-d.pageX-e.width()+a,left:"auto",top:d.pageY-c}))}}),b.dragMask.appendTo("body").show(),b.dragMask.find("input").focus(),window.focus()},200)}}),b.triggerEvent("load")},b.addEvent("load",function(){b.unlock()}),e.css({width:d.width,height:d.height}).appendTo(d.target),f.attachEvent?f.attachEvent("onload",onload):f.onload=onload,d.iframe?f.src=d.url:$.ajax({url:d.url,dataType:"html",error:function(){var a=f;a.src=d.url,a=null},success:function(a){a=$(a);var c=a.filter("iframe");c=c.size()?c:a.find("iframe");var e=c.size()?c.attr("src"):null,g=c.css("width"),h=c.css("height");f.src=e||d.url,b.ui.css({width:g,height:h})}}),f.execute=function(a){for(var c=[],d=1;d<arguments.length;d++)c.push(arguments[d]);tbc.isFunction(b[a])&&b[a].apply(b,c)},f.trigger=function(a,c){b.triggerEvent(a,c)},e.contextmenu({items:[{text:function(){return b.fixed?"不固定":"固定"},disabled:!1,icon:function(){return b.fixed?"icon-marker_rounded_remove":"icon-marker_rounded_red"},click:function(){b.fixed?b.unfix():b.fix()}},{text:"刷新",icon:"icon-refresh",click:function(){b.reload()},disabled:function(){return b.locked}},{text:"移除插件",icon:"icon-tag_remove",click:function(){b.toggle()}}]}),b.appendTo=function(a){return e.appendTo(a),b},b.toggle=function(){b.visible===!1?b.show():b.hide()},b.hide=function(){b.visible=!1,b.ui.hide()},b.show=function(){b.visible=!0,b.ui.show()},b.close=function(){b.triggerEvent("close")!==!1&&e.fadeOut(300,function(){try{f.contentWindow.document.write(""),f.src=null,f=null}catch(a){}e.remove(),e=null,b.DESTROY()})},b.remove=function(){b.lock(),$.ajax({url:"",type:"post",data:{},dataType:"json",complete:function(){},error:function(){},success:function(){e.fadeOut(300,function(){b.close(),b.triggerEvent("remove")})}})},b.reload=function(){try{b.lock(),f.contentWindow.document.location.reload()}catch(a){}return b},b.lock=function(){return e.find(".tbc-widget-locklayer").hide(),b.locked=!0,b.triggerEvent("lock"),b},b.unlock=function(){return e.find(".tbc-widget-locklayer").hide(),b.locked=!1,b.triggerEvent("unlock"),b},b.triggerFix=function(){b.fixed?b.unfix():b.fix()},b.fix=function(){return b.fixed=!0,h.children("a[role='fix']").addClass("tbc-widgets-fix-disabled"),b.triggerEvent("fix"),b},b.unfix=function(){return b.fixed=!1,h.children("a[role='fix']").removeClass("tbc-widgets-fix-disabled"),b.triggerEvent("unfix"),b},b.addEvent({drop:function(a){e.css(tbc.extend(a,{zIndex:""})),$.ajax({url:URLS.saveWidgetPosition,data:tbc.extend(a,{id:"40288059360aeabc01360af9cce20076"}),type:"post",dataType:"json",complete:function(){},error:function(){},success:function(a){"success"===a.state}})},startDrag:function(){e.css({zIndex:"7"})}}),b.msg=function(a){g.html(a||"").stop().slideDown(),setTimeout(function(){g.slideUp()},2e3)},b.addMsg=function(){}},function(a,b,c){"use strict";a.DesktopManager=function(d){a.self(this,arguments).extend({options:a.extend({},d),init:function(){return this},editHtmlTemplate:function(a){a=a instanceof Object?a:{};var b=window.desktop.isAdmin(),c={DESKTOP:"空白桌面",LINK:"网站",APPLICATION:"应用"},d='<div class="tbc-add-scene">        <div class="tbc-add-scene-inner">            <div class="tbc-add-scene-box">                <div class="add-scene-type">                    <label>桌面类型</label>                    <select class="add-scene-type-select">                        <option value="'+a.type+'" selected="selected">'+c[a.type]+"</option>"+"                    </select>"+"                </div>"+("DESKTOP"===a.type?'<ul style="display:block;" class="add-scene-type-opera add-scene-info-DESKTOP">     <li><label>标题</label><input type="text" value="'+(a.name||a.title||"")+'" class="add-scene-normal-title" /><span class="msg">(必填)</span></li>'+"</ul>":"APPLICATION"===a.type?'<ul style="display:block;" class="add-scene-type-opera add-scene-info-APP clearFloat">    <li class="add-scene-app-selected">         <span class="app-preview">             <img class="add-scene-app-selected-icon" src="'+a.icon+'" style="width:48px; display:block;" onerror="this.style.display=\'none\';"/>'+'             <span class="add-scene-app-selected-name">'+(a.name||a.title||"选择应用")+"</span>"+"         </span>"+"     </li>"+(b?'<li>   <label>&nbsp;</label>   <label class="label-for-alluser">       <input value="true" '+(a.isTem?' checked="checked"':"")+'" type="checkbox" class="for-alluser add-scene-app-alluser" />'+"       分配给所有用户</label>"+"</li>":"")+'    <input type="hidden" value="'+(a.url||"")+'" class="add-scene-app-url" />'+'    <input type="hidden" value="'+(a.name||a.title||"")+'" class="add-scene-app-title" />'+'    <input type="hidden" value="'+(a.icon||"")+'" class="add-scene-app-icon" />'+'    <input type="hidden" value="'+(a.appCode||"")+'" class="add-scene-app-appCode" />'+"</ul>":"LINK"===a.type?'<ul style="display:block;" class="add-scene-type-opera add-scene-info-LINK">    <li><label>标题</label><input value="'+(a.name||a.title||"")+'" type="text" class="add-scene-site-title" /><span class="msg">(必填)</span></li>'+'    <li><label>地址</label><input value="'+(a.url||"")+'" type="text" class="add-scene-site-url" /><span class="msg">(必填)</span></li>'+(b?'<li>   <label>&nbsp;</label>   <label class="label-for-alluser">       <input value="true" '+(a.isTem?' checked="checked"':"")+' type="checkbox" class="for-alluser add-scene-site-alluser" name="add-scene-site-alluser" />'+"       分配给所有用户</label>"+"</li>":"")+"</ul>":'<div style="display:block;" class="add-scene-type-opera no-changed">您没有权限编辑此桌面。</div>')+"            </div>"+"        </div>"+'        <div class="add-scene-bottom-tools">'+'            <input type="submit" value="确定" class="save-button tbc-button tbc-button-blue" />'+'            <input type="button" value="取消" class="cancel-button tbc-button" />'+"        </div>"+"</div>";return d},addHtmlTemplate:function(){var a=window.desktop.isAdmin(),b='<div class="tbc-add-scene">        <div class="tbc-add-scene-inner">            <div class="tbc-add-scene-box">                <div class="add-scene-type">                    <label>桌面类型</label>                        <select class="add-scene-type-select">                            <option value="DESKTOP" selected="selected">空白桌面</option>                            <option value="APPLICATION">应用</option>                            <option value="LINK">网站</option>                        </select>                </div>                <ul style="display:block;" class="add-scene-type-opera add-scene-info-DESKTOP">                    <li><label>标题</label><input type="text" value="" class="add-scene-normal-title" /> <span class="msg">(必填)</span></li>                </ul>                <ul class="add-scene-type-opera add-scene-info-APPLICATION clearFloat">                    <li class="add-scene-app-selected" title="打开应用选择器">                        <img class="add-scene-app-selected-icon" style="width:48px; display:none;" onerror="this.style.display=\'none\';"/>                        <span class="add-scene-app-selected-name">点击选择应用</span>                    </li>'+(a?'<li><label>&nbsp;</label> <label class="label-for-alluser"><input value="true" type="checkbox" class="add-scene-app-alluser" name="add-scene-app-alluser" /> 分配给所有用户</label></li>':"")+'                    <input type="hidden" value="" class="add-scene-app-url" />'+'                    <input type="hidden" value="" class="add-scene-app-title" />'+'                    <input type="hidden" value="" class="add-scene-app-icon" />'+'                    <input type="hidden" value="" class="add-scene-app-appCode" />'+"                </ul>"+'                <ul class="add-scene-type-opera add-scene-info-LINK">'+'                    <li><label>标题</label><input value="" type="text" class="add-scene-site-title" /> <span class="msg">(必填)</span></li>'+'                    <li><label>地址</label><input value="" type="text" class="add-scene-site-url" /> <span class="msg">(必填), 以“http(s)://”开头.</span></li>'+(a?'<li><label>&nbsp;</label> <label class="label-for-alluser"><input value="true" name="add-scene-site-alluser" type="checkbox" class="add-scene-site-alluser" /> 分配给所有用户</label></li>':"")+"                </ul>"+"                <div></div>"+"            </div>"+"        </div>"+'        <div class="add-scene-bottom-tools">'+'            <input type="submit" value="保存" class="save-button tbc-button tbc-button-blue" />'+'            <input type="button" value="取消" class="cancel-button tbc-button" />'+"        </div>"+"</div>";return b},saveDesktop:function(a,c,d){var e,f=this,g=a.ui.find(".add-scene-type-select").val(),h={title:"",icon:"",appCode:null,url:"",closable:!0,id:a.editId,active:!0,type:g,own:!0},i=a.ui,j={};switch(g){case"DESKTOP":j.title=i.find(".add-scene-normal-title"),h.title=j.title.val();break;case"APPLICATION":j.title=i.find(".add-scene-app-title"),j.icon=i.find(".add-scene-app-icon"),j.appCode=i.find(".add-scene-app-appCode"),j.url=i.find(".add-scene-app-url"),j.alluser=i.find(".add-scene-app-alluser:checked"),h.title=j.title.val(),h.icon=j.icon.val(),h.appCode=j.appCode.val(),h.url=j.url.val(),h.alluser=j.alluser.val();break;case"LINK":j.title=i.find(".add-scene-site-title"),j.url=i.find(".add-scene-site-url"),j.alluser=i.find(".add-scene-site-alluser:checked"),h.title=j.title.val(),h.url=j.url.val(),h.alluser=j.alluser.val()}e=this.validate(g,h,j),e===!0&&b.ajax({url:c,type:"post",data:{id:h.id,type:g,title:h.title,originalTitle:a.sceneOptions?a.sceneOptions.name||a.sceneOptions.title:null,icon:h.icon,appCode:h.appCode,url:h.url,alluser:h.alluser},dataType:"json",success:function(a){b.isFunction(d)&&d.call(f,a,h)}})},validate:function(a,c,d){var e;switch(a){case"APPLICATION":c.title&&c.appCode&&c.url||(d.title.siblings(".add-scene-app-selected").fadeOut(100).fadeIn(200).css({background:"#D93C33",color:"#fff"}).one("click",function(){b(this).css({background:"",color:""})}),e=!1);break;case"LINK":"string"!=typeof c.url||0===b.trim(c.url).length?(d.url.one("focusin",function(){b(this).siblings(".msg").html("(必填),以“http(s)://”开头.").css({color:""})}).siblings(".msg").html("(不能为空)").css({color:"red"}),e=!1):c.url.match(/^https?:\/\//)||(d.url.one("focusin",function(){b(this).siblings(".msg").html("(必填),以“http(s)://”开头.").css({color:""})}).siblings(".msg").html("(不是正确的网址)").css({color:"red"}),e=!1);case"DESKTOP":case"LINK":("string"!=typeof c.title||0===b.trim(c.title).length)&&(d.title.one("focusin",function(){b(this).siblings(".msg").html("(必填)").css({color:""})}).siblings(".msg").html("(不能为空)").css({color:"red"}),e=!1)}return e!==!1},addDesktop:function(){var d,e=this,f=this.addWin;f&&b.isFunction(f.focus)?this.addWin.focus():(d=b(".tbc-desktop-nav").offset(),f=this.addWin=new a.Window({name:"增加桌面",icon:"icon-add_small",left:d.left-12,top:d.top+24,width:480,height:320,minWidth:480,minHeight:320,loadType:"html",scrolling:!1,minimizable:!0,maximizable:!0}).addEvent({close:function(){delete e.addWin},resize:function(a){var b=this.ui.find(".add-scene-bottom-tools").outerHeight()||0,c=this.part.header.outerHeight()||0,d=a.height-b-c-10;this.ui.find(".tbc-add-scene-inner").height(d)}}).show().append(this.addHtmlTemplate()),f.ui.on("click",".cancel-button",function(){f.close()}).on("click",".save-button",function(){e.saveDesktop(f,c.sceneAdd,function(a,b){a.success?(b.isTem=!!b.alluser,b.id=a.data.id,window.desktop.addScene(window.desktop.tabs.length,b),f.close()):alert(a.message||"添加失败")})}).on("click",".add-scene-app-selected",function(){f.openModalDialog({width:680,height:450},a.AppSelector).addEvent({close:function(a){var b=f.ui;a&&0!==a.length&&(b.find(".add-scene-app-title").val(a[0].applicationName),b.find(".add-scene-app-icon").val(a[0].applicationIconUrl),b.find(".add-scene-app-appCode").val(a[0].appCode),b.find(".add-scene-app-url").val(a[0].homePageUrl),b.find(".add-scene-app-selected-name").html(a[0].applicationName),b.find(".add-scene-app-selected-icon").css({display:"block"}).attr("src",a[0].applicationIconUrl))}}).show()}).find(".add-scene-type-select").change(function(){b(".add-scene-type-opera").hide(),b(".add-scene-info-"+this.value).show()}))},editDesktop:function(d){this.editWin=this.editWin||{};var e,f=this,g=d.options.id,h=this.editWin[g];h&&b.isFunction(h.focus)?h.focus():(e=b(".tbc-desktop-nav").offset(),h=this.editWin[g]=new a.Window({name:"修改桌面",icon:"icon-pencil",left:e.left-12,top:e.top+24,width:480,height:320,minWidth:480,minHeight:320,loadType:"html",minimizable:!0,maximizable:!0,scrolling:!1}).addEvent({close:function(){delete f.editWin[g]}}).show(),h.editId=g,h.sceneOptions=d.options,h.append(this.editHtmlTemplate(d.options)),h.ui.on("click",".cancel-button",function(){h.close()}).on("click",".save-button",function(){0===h.ui.find("no-changed").size()?f.saveDesktop(h,c.sceneUpdate,function(a,b){a.success?(d.options.name=b.title,d.options.type=b.type||d.options.type,d.options.icon=b.icon,d.options.url=b.url,d.options.isTem=!!b.alluser,d.handle.attr("title",b.title),("LINK"===b.type||"APPLICATION"===b.type)&&d.loadContentAsIframe(),h.close()):alert(a.message||"保存失败")}):h.close()}).on("click",".add-scene-app-selected",function(){h.openModalDialog({},a.AppSelector).addEvent({close:function(a){a&&0!==a.length&&(h.ui.find(".add-scene-app-title").val(a[0].applicationName),h.ui.find(".add-scene-app-icon").val(a[0].applicationIconUrl),h.ui.find(".add-scene-app-appCode").val(a[0].appCode),h.ui.find(".add-scene-app-url").val(a[0].homePageUrl),h.ui.find(".add-scene-app-selected-name").html(a[0].applicationName).siblings(".add-scene-app-selected-icon").css({display:"block"}).attr("src",a[0].applicationIconUrl))}}).show()}))},deleteDesktop:function(d){var e=window.desktop,f={deskId:d.options.id};b.ajax({url:c.sceneDelete,type:"post",dataType:"json",data:f,success:function(b){var c,f,g,h=d.index;if(b&&b.success){for(d.close(),c=e.tabs.length,f=h;c>f;f+=1)g=e.tabs[f],g&&g.handle.find("i").html(f+1);g=null}else a.alert(b.message)}})},setDefault:function(d,e,f){var g={deskId:d};e===!0&&(g.forAllUser="true"),f=f||(b.isFunction(e)?e:null),b.ajax({url:c.setDefaultDesktop,type:"post",dataType:"json",data:g,success:function(c){b.isFunction(f)&&f()===!1||a.alert(c.message)}})}})}}(window.tbc,window.jQuery,URLS),tbc.Folder=function(a){"use strict";var b=tbc.self(this,arguments);a&&(a.icon="icon-folder_classic_opened",a.minimizable=!0,a.refreshable=!0,a.helpable=!0,a.minWidth=520,a.minHeight=380),a.loadType="html",b.extend([tbc.Window,a]),b.packageName="tbc.Folder";var c={orderBy:"name",name:"",id:"",viewState:"list"},d=tbc.extend({},c,a),e=$('<div class="tbc-folder-viewer">    <div class="tbc-folder-directory" _title="目录结构"></div>    <div class="tbc-folder-container" _title="文件夹内容"></div>    <div class="tbc-folder-previewer" _title="文件预览"></div></div>'),f=$(".tbc-folder-directory",e),g=$(".tbc-folder-container",e),h=$(".tbc-folder-previewer",e);b.append(e),b.classType="folder",b.svid=d.userDeskItemId,b.data=d.data,b.container=g;var i=["shortcuts",b.packageName,b.svid].join("_"),j=tbc.jdc.getTable(i)||tbc.jdc.createTable(i),k=j?tbc.jdc.select(j,"all"):null;b.saveData=function(a){k=k||[],a=tbc.isArray(a)?a:[a];var b=k;$.each(a,function(a,c){var d;$.each(b,function(){this.userDeskItemId===c.userDeskItemId&&(d=!0)}),d&&k.push(c)}),tbc.jdc.set(i,d.userDeskItemId,k)},b.addEvent({open:function(){desktop.iconsDrager&&desktop.iconsDrager.addContainer(g)},afterClose:function(){desktop.iconsDrager&&desktop.iconsDrager.removeContainer(g)}}),b.rename=function(){var a=b.openModalDialog({width:350,height:200,name:"重命名",loadType:"html"},tbc.Window).show(),c=$('<div style="padding:32px;"></div>'),e=b.name(),f=$('<input class="tbc-inputer" type="text" value="'+e+'" style="width:130px;"/>').focus(function(){this.select(),g.html(g.attr("title")).css({color:"#888"})}).keyup(function(a){return 13===a.keyCode?(j(),!1):void 0}),g=$('<div title="最多5个汉字或10个英文字符." style="clear:both; margin-bottom:1em; color:#888;">最多5个汉字或10个英文字符.</div>'),h=new tbc.Button({border:!0,text:"保存",icon:"icon-check",click:function(){j()}}),i=new tbc.Button({border:!0,text:"取消",icon:"icon-close",click:function(){a.close()}}),j=function(){var c=$.trim(f.val()),e=tbc.substr(c,10),h=(e+"("+c.replace(e,"")+")",d.folderId||d.userDeskItemId),i=desktop.current().ui.attr("svid");c.length>e.length?g.shake().html("文件夹名过长,最多5个汉字或10个英文字符.").css({color:"red"}):$.ajax({url:URLS.renameFolder,type:"post",data:{_ajax_toKen:"elos",folderName:e,userDeskId:i,userDeskItemId:h},dataType:"JSON",beforeSend:function(){a.lock("loading","正在保存...")},complete:function(){a.unlock("loading")},error:function(){},success:function(c){(c&&c.success||"string"==typeof c&&"true"===$.trim(c).toLowerCase())&&(b.name(e),a.close())}})};h.ui.css({marginRight:"10px"}),h.depend(a),i.depend(a),a.addEvent({afterClose:function(){c.remove(),f.remove(),g.remove(),h.DESTROY(),a=e=f=c=h=j=null},focus:function(){f.focus()}}),c.appendTo(a.container).append(f).append(g).append(h.ui).append(i.ui),a.blur(),f.focus()},b.viewAs=function(a){switch(a){case"list":b.viewAsList();break;case"icon":b.viewAsIcon()}},b.viewAsList=function(){},b.viewAsIcon=function(){return g.empty(),$.each(k,function(a,c){var c=new tbc.Shortcut(c).appendTo(b);c.depend(b),c=null}),b},b.viewAsContent=function(){},b.saveOrder=function(){var a=[];return b.container.children(".tbc-shortcut").each(function(){a.push(this.getAttribute("_shortcutId"))}),$.ajax({url:URLS.orderFolderShorcuts,type:"post",dataType:"json",data:{folderid:b.svid,items:a.join(",")},complete:function(){},error:function(){},success:function(a){a&&"success"===a.result}}),b.shortcutSequence=a,b},b.del=function(){tbc.Folder.del(b.svid,function(a){a.result&&b.close()})},b.refresh=function(){},b.load=function(){},b.name(d.folderName||d.userDeskItemName||""),b.container.selectArea({item:".tbc-shortcut",exclude:".tbc-folder-shortcut",classSelected:"tbc-shortcut-selected",event:{select:function(){},unselect:function(){}}}),k?b.viewAsIcon(!0):tbc.Folder.load(d.folderId||d.userDeskItemId,function(a){k=a||{},b.viewAsIcon(!0),b.triggerEvent("folderLoad",a),$.each(k,function(){tbc.jdc.set(i,this.userDeskItemId,this)})});var l=new tbc.Button({icon:"icon-tag_edit",text:"重命名",border:!1,click:function(){b.rename()}});l.depend(b),b.tools.add("rename",l),b.addEvent({destroy:function(){b=e=f=g=h=k=j=i=l=null}})},tbc.Folder.load=function(a,b){tbc.isFunction(b)&&$.ajax({url:tbc.formatString(URLS.loadFolderContent,a),dataType:"json",data:{userDeskItemId:a},type:"post",complete:function(){},error:function(){},success:function(a){b(a)}})},tbc.Folder.del=function(a,b){b&&$.ajax({url:tbc.formatString(URLS.deleteFolder,a),dataType:"json",type:"post",data:{userDeskItemId:a},complete:function(){},error:function(){},success:function(a){b(a)}})},tbc.ns("tbc.folder"),tbc.folder.Pop=function(a){function b(a,b){return b+=10,a>=0&&9>=a?3*b:a>9&&16>=a?4*b:a>16&&25>=a?5*b:a>25&36>a?6*b:7*b}function c(a,b){return b+=10,a>=0&&3>=a?b:a>3&&6>=a?2*b:a>6&&12>=a?3*b:a>12&&16>=a?4*b:a>16&20>=a?4*b:a>20&&30>=a?5*b:6*b}var d=tbc.self(this,arguments);d.extend(tbc.Event,tbc.CLassManager,[tbc.Pop,a]),d.packageName="tbc.folder.Pop";var e={},f=tbc.extend({},e,a);d.ui.addClass("tbc-pop-folder"),d.svid=f.userDeskItemId,d.render=function(a){return d.container.empty(),d.layout(a.length),$.each(a,function(a,b){var b=new tbc.Shortcut(b).appendTo(d);b.depend(d),b.addEvent({open:function(){d.close()}}),b=null}),d},d.layoutTimeout=null,d.layout=function(a){clearTimeout(d.layoutTimeout);var e=d,f=a||d.container.children(".tbc-shortcut").size(),g=b(f,90),h=c(f,100),i=800,j=550,k=320,l=100,m=Math.max(Math.min(g,i,document.body.offsetWidth),k),n=Math.max(Math.min(h,j,document.body.offsetHeight),l);e.ui.css({width:m,height:n}),e.locate(),e=null,d.layoutTimeout=setTimeout(function(){},0)},d.saveOrder=function(){var a=[];return d.container.children(".tbc-shortcut").each(function(){a.push(this.getAttribute("_shortcutId"))}),$.ajax({url:URLS.orderFolderShorcuts,type:"post",dataType:"json",data:{folderid:d.svid,items:a.join(",")},complete:function(){},error:function(){},success:function(a){a&&"success"===a.result}}),d.shortcutSequence=a,d};var g="shortcuts_tbc.Folder_"+f.userDeskItemId,h=tbc.jdc.getTable(g)||tbc.jdc.createTable(g),i=h?tbc.jdc.select(h,"all"):null;i?d.render(i):tbc.Folder.load(f.folderId||f.userDeskItemId,function(a){i=a||[],d.render(a),d.triggerEvent("folderLoad",a),d.locate(),$.each(i,function(){tbc.jdc.set(g.join("_"),this.userDeskItemId,this)})}),setTimeout(function(){$(document.body).bind("click.hideFolder_pop",function(a){if($(document.body).unbind("click.hideFolder_pop"),!a.ctrlKey&&a.target!==d.container[0]&&-1===$(a.target).parents().index(d.container)){if("tbc-pop-container"===a.target.className)return;d.close&&d.close()}})},0),d.ui.contextmenu({items:[]}),d.container.selectArea({item:".tbc-shortcut",exclude:".tbc-folder-shortcut",classSelected:"tbc-shortcut-selected",event:{select:function(){},unselect:function(){}}}),desktop.iconsDrager&&desktop.iconsDrager.addContainer(d.container),d.addEvent({close:function(){$(document.body).unbind("click.hideFolder_pop"),desktop.iconsDrager&&desktop.iconsDrager.removeContainer(d.container)},destroy:function(){d=h=i=a=_w=c=f=e=a=null}})},tbc.namespace("tbc.historyStore"),tbc.extend(tbc.historyStore,{cache:{},get:function(a){return this.cache[a]},set:function(a,b){return this.cache[a]=new tbc.history(b),his},add:function(a,b){return this.cache[a]=this.cache[a]||b,this.cache[a]},remove:function(a){delete this.cache[a]}}),tbc.History=function(a){!function(a,b){var c=tbc.self(a,b);c.packageName="tbc.History",c.cache=[],c.currentIndex=0;try{return c}finally{c=null}}(this,arguments).extend({current:function(){return this.cache[this.currentIndex]},add:function(a,b,c){if(this.prohibited===!0)return this;delete this.prohibited;var d="string"==typeof a?{url:a,method:b,data:c}:a;this.clear();var e=this.cache[this.currentIndex];return e.url!==d.url&&(this.cache.push(d),this.currentIndex=this.cache.length-1,this.triggerEvent("add")),this},redirect:function(b,c,d){var e=c||a;if("function"==typeof e){this.triggerEvent("beforeRedirect");try{this.prohibited=!0,(!c||$.isFunction(c)&&c(b,d)!==!1)&&a(b,d)}catch(f){}this.triggerEvent("afterRedirect")}return this},clear:function(){return this.cache=this.cache.slice(0,this.currentIndex+1),this},go:function(a,b){var c=a>=0?a:this.currentIndex+a;c=this.limitIndex(c);var d=this.cache[c];return this.currentIndex=c,d&&(this.redirect(d,b,!0),this.triggerEvent("go")),this},forward:function(a){if(!this.isLast()){var b=this.currentIndex+1,c=this.cache[b];this.currentIndex=b,this.redirect(c,a,!0),this.triggerEvent("forward")}return this},back:function(a){if(!this.isFirst()){var b=this.currentIndex-1,c=this.cache[b];this.currentIndex=b,this.redirect(c,a,!0),this.triggerEvent("back")}return this},reload:function(){if(!this.isFirst()){var a=this.current();this.redirect(a,null,!0),this.triggerEvent("reload")}return this},limitIndex:function(a){return a=Math.max(a,0),Math.min(a,this.cache.length-1)},isLast:function(){return this.currentIndex===this.cache.length-1||0===this.cache.length},isFirst:function(){return 0===this.currentIndex}})},function(a,b){"use strict";a.QuickLaunch=function(c){var d={container:".tbc-task-quickLaunch",ui:".tbc-task-quickLaunch",invisible:".tbc-task-invisible",invisibleHandle:".tbc-task-invisible-handle"},e=b.extend({},d,c),f='<i class="tbc-imgicon tbc-icon" title="{0}"><img _src="{1}"/></i>';a.self(this,arguments).extend({init:function(){var a=this;this.packageName="tbc.QuickLaunch",this.cache_length=0,this.cache={},this.ui=b(e.ui),this.container=b(e.container,this.ui),this.handle=b(e.invisibleHandle,this.ui),this.invisible=b(e.invisible,this.ui),this.container=this.container.size()?this.container:this.ui,this.handle.click(function(b){return a.toggleInvisible(),b.stopPropagation(),!1})},append:function(c){var d={guid:null,icon:"",title:"",click:null},e=b.extend({},d,c),g=b(a.formatString(f,e.title,e.icon));return e.guid?(g.appendTo(this.container),e.icon.match(/\.(jpg|jpeg|gif|png|img|bmp|ico)$/)||-1!==e.icon.indexOf("sf-server/file/getFile/")?g.find("img").show().attr("src",e.icon):g.find("img").hide().parent().addClass(e.icon),g.attr("guid",e.guid).bind({click:e.click}),this.cache[e.guid]||(this.cache[e.guid]=g,this.cache_length++,this.toggleHandle()),taskbar.resize(),d=e=c=g=null,void 0):alert("缺少配置项: {guid:undefined}")},drop:function(a){var b=this.cache[a];return b&&(b.remove(),delete this.cache[a],this.cache_length--,this.toggleHandle()),b=null,this},icon:function(a){return a.match(/(jpg|jpeg|gif|png|bmp|ico|img)$/)||-1!==a.indexOf("sf-server/file/getFile/")?iconNode.children("img").show().attr("src",img):iconNode.addClass(a).children().hide(),this},tips:function(a){return iconNode.attr("title",a),this},hasSpace:function(){var a=this.container[0].clientWidth,b=18*this.cache_length;return a>b},showInvisible:function(a){var c=this;this.invisible.stop().slideDown(200),a!==!1&&(this.invisibleState="show"),b(document).bind({"click.hideQuicklaunch":function(){c.hideInvisible(),b(document).unbind("click.hideQuicklaunch")}})},hideInvisible:function(a){this.invisible.stop().slideUp(200),a!==!1&&(this.invisibleState="hide"),b(document).unbind(".hideQuicklaunch")},toggleInvisible:function(){"hide"===this.invisibleState?this.showInvisible():this.hideInvisible()},toggleHandle:function(){return this.container[0].clientWidth/18>this.cache_length?this.handle.show():this.handle.hide(),this},isExist:function(a){return this.cache[a]?!0:!1}}).init()}}(tbc,jQuery),function(a,b,c){"use strict";
a.Scene=function(d){var e,f,g,h,i,j,k,l,m,n,o,p,q,r={gridWidth:116,gridHeight:110,paddingTop:40,paddingLeft:80,type:null,url:null},s=b.extend({},r,d),t=window.desktop;d.closable=d.own,a.self(this,arguments).extend([a.Tabpage,d],{init:function(){var a=this;return this.packageName="tbc.Scene",this.classType="scene",this.options=s,this.svid=this.options.id,this.shortcutsContainer=b('<div class="tbc-desktop-shortcutsContainer"></div>').appendTo(this.container),f=this.container.height(),g=this.container.width(),h=0,i=0,j=this.options.paddingTop,k=this.options.paddingLeft,l=this.options.gridWidth,m=this.options.gridHeight,n=g-k-l,o=f-j-m,p=0,q=0,this.setLayoutInfo=function(){f=a.container.height(),g=a.container.width(),n=g-l,o=f-1.5*m},this.addEvent({show:function(){this.loaded!==!0&&this.load()},beforeShow:function(){}}),this.initContextmenu(),this.initPlus(),this},initPlus:function(){var c=a.system.settings,d=this;return"LINK"===s.type||"APPLICATION"===s.type?this:(this.plusSignInited||(this.plusSign=b('<div title="添加..." _shortcutid="plus" class="tbc-shortcut tbc-plus-shortcut"></div>').html('<div class="tbc-shortcut-inner">   <i class="tbc-shortcut-icon"><em></em></i></div>').css({left:s.paddingLeft,top:s.paddingTop}),this.plusSign.contextmenu({items:[{text:function(){return t.isSysAdmin()||c.allowCreateFolder?"新建文件夹":null},icon:"icon-folder_modernist_add_simple",disabled:!1,click:function(){t.creatFolder(d)}},{text:function(){return t.isSysAdmin()||c.allowCreateShortcut?"新建快捷方式":null},disabled:!1,click:function(){t.startSimpleShortcutsAdd()}},{text:function(){return t.isSysAdmin()||c.allowManagerShortcut?"管理快捷方式":null},disabled:!1,click:function(){t.startShortcutsManager()}},{text:"添加桌面",disabled:!1,icon:"icon-add_small",click:function(){t.manager.addDesktop()}}]}).bind({click:function(){var a=b(this);setTimeout(function(){var b=a.offset(),c=(a.width(),a.height());a.trigger("contextmenu",{left:b.left+24,top:b.top+c-28}),a=null})}}),this.append(this.plusSign),this.addEvent("beforeLayout",function(){this.append(this.plusSign)}),this.plusSignInited=!0),this)},initContextmenu:function(){var c=this;this.container.bind({click:function(a){a.ctrlKey||b(".tbc-shortcut-selected",this).removeClass("tbc-shortcut-selected")}}),b(this.options.handleNode).bind({dragin:function(a,b){var d=c.index;c.group.show(d),b.transfer=b.container},dragout:function(){}}).contextmenu({items:[{text:"切换到此桌面",icon:"",disabled:c.group,click:function(){c.group&&c.group.show(c.index)}},{text:function(){return t.isSysAdmin()||a.system.settings.allowSetDefaultDesk?"设为初始桌面":!1},icon:"",disabled:s.setDefault,click:function(){t.manager.setDefault(s.id)}},{text:function(){return t.isSysAdmin()?"设为所有学员的初始桌面":!1},icon:"",disabled:s.setDefault,click:function(){t.manager.setDefault(s.id,!0)}},{text:"修改",icon:"",disabled:!s.own,click:function(){t.manager.editDesktop(c)}},{text:"删除",icon:"",disabled:!s.own,click:function(){s.isTem===!0?a.confirm("真的要删除这个屏吗? 删除后所有学员此屏都将被删除并且无法恢复!",function(){t.manager.deleteDesktop(c)}):a.confirm("删除后将无法恢复",function(){t.manager.deleteDesktop(c)})}}]})},nameTranslator:function(a){var b={USER:"学员",ADMIN:"管理员",OTHER:"其他",DESKTOP:"自定义桌面"};return b[a]||a},append:function(b){switch(b.constructor){case a.Shortcut:this.appendShortcut.apply(this,arguments);break;case a.Widgets:this.appendWidget.apply(this,arguments);break;case a.Window:case a.Folder:this.container.append(b.ui||b);break;default:this.container.append(b.ui||b)}return this},appendShortcut:function(b,c,d){var e,f,g,h;return this.setLayoutInfo(),b.host=this,c?(b.prependTo(this),this.layout()):(g=this.container.children(".tbc-plus-shortcut"),e=this.container.children(".tbc-shortcut").not(g).size(),f=this.getSpaceByIndex(e),h=this.getSpaceByIndex(e+1),b.ui.css({left:f.left,top:f.top,position:"absolute"}),g.css({left:h.left,top:h.top}),b.appendTo(this)),a.jdc.set(["shortcuts",this.packageName,this.svid].join("_"),d.userDeskItemId,d),this.shorcuts=this.shorcuts||{},this.shorcuts[b.id]=b,this},appendShortcuts:function(b){var c,d,e,f;for(c=0,d=b.length;d>c;c+=1)e=b[c],f=a.system.getOpenType(e),("string"!=typeof e.folderId||0===e.folderId.length)&&this.appendShortcut(new a.Shortcut(e),!1,e),"FOLDER"===f&&this.setFolderContent(e.userDeskItemId);return this},setFolderContent:function(b){var c,d,e,f=a.webdesk.data.folders[b].children,g=a.system.getTaskByElement("[_shortcutid='"+b+"']"),h=["shortcuts","tbc.Folder",b].join("_");for(c=0,d=f.length;d>c;c+=1)e=f[c],a.jdc.set(h,e.userDeskItemId,e),g.thumbnail.append(e.userDeskItemId,e.applicationIconUrl);g.receiveReminder()},appendWidget:function(a,b,c){var d=window.quickLaunch;return a.scene&&delete a.scene[a.userDeskItemId],a.scene=this,b?this.container.prepend(a.ui):this.container.append(a.ui),this.widgets=this.widgets||{},this.widgets[a.userDeskItemId]=a,d.isExist(c.applicationId)||d.append({guid:c.applicationId,title:c.applicationName,icon:c.applicationIconUrl,click:function(){a.visible===!1?a.show():a.ui.stop().animate({opacity:0},100).animate({opacity:1},100).animate({opacity:0},100).animate({opacity:1},400)}}),this},appendWidgets:function(c){var d=this;return b.each(c,function(b,c){"WIDGET"===c.itemType?d.appendWidget(new a.desktop.Widget({id:c.applicationId,url:c.homePageUrl,width:c.preferredWidth,height:c.preferredHeight,right:c.right,top:c.top,target:t,title:c.applicationName,icon:c.applicationIconUrl,control:c.control||!0}),null,c):a.system.open(c)}),this.layoutWidget(),this},layoutTimeout:null,layout:function(){var c=this;return this.triggerEvent("beforeLayout"),clearTimeout(this.layoutTimeout),h=0,i=0,e=c.container.children(".tbc-shortcut").add(c.container.children(".tbc-shortcut-plus")),c.setLayoutInfo(),b.each(e,function(d){var e=c.getSpaceByIndex(d),f=this.getAttribute("tbc"),g=a.TASKS(f);b(this).data({reallyLeft:e.left,reallyTop:e.top}).css({position:"absolute",left:e.left,top:e.top}),g instanceof Object&&(g.triggerEvent("moved",e),g=null)}),c.triggerEvent("layout"),c=null,this},layoutWidget:function(){var a=this.container.children(".tbc-widget"),c=this.container.height(),d=(this.container.width(),0),e=0,f=0,g=20,h=0,i=24;a.each(function(){var a=b(this),j=window.parseInt(a.css("right")),k=window.parseInt(a.css("top")),l=a.width(),m=a.height();j=isNaN(j)?0:j,k=isNaN(k)?0:k,h+m>c?(f+=d,a.css({right:f+g,top:e+i})):a.css({right:f+g,top:e+h+i}),d=l,e=m,h=k+i+m>h?k+i:k+m+i,a=null})},getSpace:function(){return{left:q+i*l+k,top:p+h*m+j}},getSpaceByChild:function(a){var b=this.container.children(".tbc-shortcut:not(.tbc-plus-shortcut)").index(a);return this.getSpaceByIndex(b)},getSpaceByIndex:function(a){var b=o/m,c=b>Math.floor(b)?Math.floor(b)+1:b,d=a%c*m+j,e=Math.floor(a/c)*l+k;return{left:e,top:d}},saveOrder:function(){var a=[];return this.container.children(".tbc-shortcut:not(.tbc-plus-shortcut)").each(function(){a.push(this.getAttribute("_shortcutId"))}),b.ajax({url:c.orderDesktopShorcuts,type:"post",dataType:"json",data:{deskid:this.svid,items:a.join(",")},complete:function(){},error:function(){},success:function(a){a&&"success"===a.result&&(a.success=!0)}}),this.shortcutSequence=a,this},lock:function(c){var d=Math.max(a.getMaxZIndex(this.ui)+1,10);"undefined"==typeof this.lockLayer&&(this.lockLayer=b('<div class="tbc-desktop-scene-locker"><div class="tbc-desktop-locker-bg"></div><div class="tbc-desktop-locker-icon"></div><div class="tbc-desktop-locker-text">'+(c||"")+"</div>"+"</div>").css({zIndex:d}).contextmenu({items:[]})),this.lockLayer.show().appendTo(this.ui)},unlock:function(){this.lockLayer&&this.lockLayer.fadeOut(400)},load:function(){if(this.loaded!==!0)switch(s.type){case"PAGE":case"APPLICATION":case"APP":case"LINK":case"SHORTCUT":this.loadContentAsIframe();break;case"DESKTOP":case"ADMIN":case"USER":case"OTHER":this.loadContent();break;default:a.log("undefined desktop type!")}return this},matchIframeSrc:function(a){var b,c,d;a.match(/http:\/\/hao.qq.com/)?d="http://hao.qq.com":(b=a?a.match(/<iframe[^>]+>/):null,c=b&&b[0]?b[0].match(/src\s*=\s*["']?\s*\S+\s*["']?/):null,d=c&&c[0]?c[0].replace(/(src\s*=\s*["']?\s*|\s*["']*\s*>?$)/g,""):null,d=!d||d.match(/^("|'|,|\+|\()/)?null:d);try{return d}finally{a=b=c=d=null}},loadContentAsIframe:function(){var a=this,c=this.options.url,d=this.options.type;"LINK"!==d&&"SHORTCUT"!==d||c.match(/^http/)||(c="http://"+c),this.iframe=this.container.find("iframe")[0],this.iframe||(this.iframe=b('<iframe frameborder="0" scrolling="auto" style="height:100%; width:100%; "></iframe>'),this.append(this.iframe),this.iframe=this.iframe[0]),b.ajax({url:c,success:function(b){var d=a.matchIframeSrc(b);d?a.iframe.setAttribute("src",d):a.iframe.setAttribute("src",c)},error:function(){a.iframe.setAttribute("src",c)}}),this.loaded=!0},loadContent:function(){var d,e=this;return b.each(this.group.tabs,function(a,b){b===e&&(d=a)}),b.ajax({url:c.getSceneContents,data:{deskindex:e.index,loadDockItem:0===d,deskId:s.id,_ajax_toKen:"elos"},type:"post",cache:!1,dataType:"json",beforeSend:function(){e.lock("正在加载桌面应用...")},complete:function(){e.unlock()},error:function(){a.log("ERROR: at tbc.Scene.loadContent()>$.ajax")},success:function(b){var c=a.webdesk.data.translator,d=c.shortcuts.transformList(b.shortcuts,"antique");e.cacheShortcut(d),e.loaded=!0,e.ui.attr({tbc:e.guid,svid:s.id}),e.appendShortcuts(d),-1!==document.location.href.indexOf("DEBUG")&&window.console&&window.console.log((new Date).getTime()-window.START_TIME)}}),this},cacheShortcut:function(b){var c,d,e,f,g,h,i=a.webdesk.data,j=i.shortcuts=i.shortcuts||{},k=i.folders=i.folders||{};for(c=0,d=b.length;d>c;c+=1)switch(g=b[c],f=a.system.getOpenType(g).toUpperCase(),e=g.userDeskItemId,h=g.folderId,f){case"FOLDER":k[e]=k[e]||g,g.children=g.children||[];break;case"APP":case"APPLICATION":case"SHORTCUT":case"LINK":j.push(g),j[e]=g}for(c=0,d=b.length;d>c;c+=1)g=b[c],f=a.system.getOpenType(g).toUpperCase(),e=g.userDeskItemId,h=g.folderId,"string"==typeof h&&h.length>0&&(k[h]=k[h]||[],k[h].children=k[h].children||[],k[h].children.push(g),k[h].children[e]=g)},deleteJDC:function(){},saveToJDC:function(){}}).init()}}(window.tbc,window.jQuery,window.URLS),tbc.ShortcutManager=function(){var a=tbc.self(this,arguments);a.extend(tbc.Event),a.extend(tbc.ClassManager),a.packageName="tbc.ShortcutManager"},function(a,b,c){"use strict";a.namespace("tbc.shortcut"),a.Shortcut=function(d){var e={html:null,cssClass:null,remind_timeout:18e4,size:"big",iconBox:".tbc-shortcut-icon",iconNode:".tbc-shortcut-icon>img",nameNode:".tbc-shortcut-label",tipsNode:".tbc-shortcut-tips em",popNode:".tbc-shortcut-pop ol"},f=a.extend({},e,d),g=window.desktop;f.originateSettings=d,a.self(this,arguments).extend({packageName:"tbc.Shortcut",options:null,ui:null,svid:null,host:null,parts:{iconBox:null,iconNode:null,nameNode:null,tipsNode:null,popNode:null},init:function(){var c,d,e=f.shortcutIconUrl||f.applicationIconUrl,g=f.userDeskItemName||f.applicationName;this.packageName="tbc.Shortcut",this.type=a.system.getOpenType(f),this.options=f,this.svid=f.userDeskItemId||f.applicationId,this.id=this.svid,c=[this.type,"shortcut",this.id].join("_"),d=a.system.isImg(e)?'<img title="" alt="" src="'+e+'" onerror="this.style.display=\'none\';" onload="this.style.display=\'block\';"/>':'<img title="" alt="" style="display:none;" onerror="this.style.display=\'none\';" onload="this.style.display=\'block\';"/>',this.ui=f.html?b(f.html):b('<div class="tbc-shortcut"></div>').html('<div class="tbc-shortcut-inner">     <i class="tbc-shortcut-icon">'+d+"<em></em></i>"+'     <span class="tbc-shortcut-label"></span>'+"</div>"+'<sup class="tbc-shortcut-tips" style="display:none;">'+"      <em>0</em>"+'      <div class="tbc-shortcut-pop" style="display:none;"><ol></ol></div>'+"</sup>").addClass(f.cssClass),this.ui.attr({tbc:this.guid,_id:c,title:g,_shortcutId:f.userDeskItemId}),a.extend(this.parts,{iconBox:b(f.iconBox,this.ui),iconNode:b(f.iconNode,this.ui),nameNode:b(f.nameNode,this.ui),tipsNode:b(f.tipsNode,this.ui),popNode:b(f.popNode,this.ui)}),this.icon(e),this.name(g),e||this.parts.iconNode.hide(),this.initReminder(),this.initContextmenu(),this.initEvent(),this.initFolderIcon(),this.initClick()},initReminder:function(){var a=this,c="FOLDER"===this.type?f.remind_timeout/2:f.remind_timeout;("FOLDER"===this.type||f.reminderUrl&&b.trim(f.reminderUrl.length>0))&&(this.receiveReminder(),this.interval=setInterval(function(){a.receiveReminder()},c)),this.parts.tipsNode.parent().bind({mouseenter:function(b){return a.openTipsTimer=setTimeout(function(){0===this.parts.popNode.filter(":visible").size()&&a.openTips()},300),b.stopPropagation(),!1},mouseleave:function(){clearTimeout(a.openTipsTimer),a.hideTips()}}),this.parts.popNode.click(function(a){return a.stopPropagation(),!1})},initFolderIcon:function(){var c,d=this;switch(this.type){case"FOLDER":this.ui.addClass("tbc-folder-shortcut"),c=b('<i class="tbc-folder-thumbnail"></i>').insertAfter(this.parts.iconNode),this.parts.iconNode.remove(),this.thumbnail={length:0,store:{},append:function(b,d){var e=a.system.isImg(d)?'<img title="" alt="" src="'+d+'" />':'<img title="" alt="" style="display:none;" />';return c.append('<i class="tbc-folder-thumbnail-icon" _folderid="'+b+'" class="tbc-folder-thumbnail-icon">'+e+"</i>"),this.store[b]||(this.length+=1),this.store[b]=b,this},remove:function(a){return b("[_folderid="+a+"]",c).empty().remove(),this.store[a]&&(this.length-=1),delete this.store[a],this}},d.loadData=function(){a.Folder.load(f.folderId||f.userDeskItemId,function(c){f.data=c,b.each(c,function(){a.jdc.set(["shortcuts","tbc.Folder",d.svid].join("_"),this.userDeskItemId,this),d.thumbnail.append(this.userDeskItemId,this.applicationIconUrl)}),d.receiveReminder()})};break;case"APP":case"APPLICATION":this.ui.addClass("tbc-app-shortcut");break;case"LINK":}},initContextmenu:function(){var c=this;this.ui.contextmenu({items:[{text:"打开",icon:"icon-application_windows_add",click:function(){c.open()}},{text:function(){return"FOLDER"===c.type?"重命名文件夹":!1},icon:"icon-tag_edit",click:function(){c.startRename()},disabled:function(){return"FOLDER"!==c.type}},{text:function(){return"FOLDER"===c.type?"删除文件夹":!1},icon:"icon-folder_classic_stuffed_remove",click:function(){c.del()},disabled:function(){return"FOLDER"!==c.type}},{text:function(){return c.ui.parent().hasClass("tbc-desktop-dock")?!1:"移动到..."},icon:"icon-breadcrumb_separator_arrow_2_dots",submenu:function(){if(window.desktop.tabs.length>1){var d=[];return b.each(window.desktop.tabs,function(e,f){var g,h,i=this.options;g="第"+(e+1)+"屏 - ["+this.nameTranslator(i.name||i.title)+"]","USER"===i.type||"ADMIN"===i.type||"OTHER"===i.type||"DESKTOP"===i.type?f===c.host&&(h=!0,g+=" -- 当前屏"):(g+=" -- (此桌面不支持应用)",h=!0),d.push({text:g,icon:f.icon(),click:function(d){var g,h=c.host;c.ui.siblings(".tbc-shortcut-selected").each(function(c,d){var e=b(d).attr("tbc"),g=a.TASKS(e);g&&g.moveToScene(f)}),g=a.system.getTaskByElement(c.ui.parent()),("tbc.Folder"===g.packageName||"tbc.folder.Pop"===g.packageName)&&c.moveOutFolder(g,f),c.moveToScene(f),h.layout(),d&&d.ctrlKey&&window.desktop.show(e),h=null},disabled:h})}),d}return!1}}],event:{show:function(){this.find(".tbc-shortcut-inner").addClass("tbc-shortcut-inner-mousedown")},hide:function(){this.find(".tbc-shortcut-inner").removeClass("tbc-shortcut-inner-mousedown")}}})},initClick:function(){var d=this;this.ui.bind({click:function(e){var g,h=this;clearTimeout(d.openTimeout),b.post(c.accessicon,{userDeskItemId:f.userDeskItemId}),e.ctrlKey?h.hasClass("tbc-shortcut-selected")?h.removeClass("tbc-shortcut-selected"):h.addClass("tbc-shortcut-selected"):(g=a.TaskManager.get("folder",f.userDeskItemId),"FOLDER"!==d.type||g?d.open():(d.pop?d.pop.close():d.openTimeout=setTimeout(function(){d.pop=d.openPopFolder()},100),b("body").trigger("click.hideContextmenu")),g=null)},dblclick:function(){clearTimeout(d.openTimeout),d.open(),d.pop&&d.pop.close()}})},initEvent:function(){this.addEvent({beforeMove:function(c){var d,e,f,h,i,j,k,l,m,n,o,p=c.from.hasClass("tbc-desktop-dock"),q=c.to.hasClass("tbc-desktop-dock");if(c.node.hasClass("tbc-folder-shortcut")&&(c.to.hasClass("tbc-folder-container")||c.to.hasClass("tbc-pop-container")))d=!1;else if(p||q){if(p&&q)return setTimeout(function(){g.saveDockShortcuts()},100),void 0;p&&!q&&(e=c.node.attr("tbc"),a.TASKS(e).DESTROY(),c.node.remove()),q&&!p&&(c.node.hasClass("tbc-folder-shortcut")?alert("暂不支持在快捷栏放置文件夹."):c.selected.size()?alert("不能拖多个图标到快捷栏."):(f=a.system.getTaskByElement(c.node),h=f.options,i=b(".tbc-desktop-dock .tbc-shortcut"),j=!1,i.each(function(){return this.getAttribute("_shortcutid")===h.userDeskItemId?(j=!0,k=this,!1):void 0}),j===!0?c.transfer=k:(l=new a.Shortcut(h),c.marks.size()?l.ui.insertAfter(c.marks):l.appendTo(c.to),i.size()>4&&(f=a.system.getTaskByElement(i.filter(":last")),i.filter(":last").empty().remove(),f&&f.DESTROY())))),setTimeout(function(){g.saveDockShortcuts()},100),d=!1}else c.marks.hasClass("tbc-folder-shortcut")&&c.node[0]!==c.marks[0]&&!c.node.hasClass("tbc-folder-shortcut")&&(m=c.marks.attr("tbc"),n=a.TASKS.get(m),o=a.TaskManager.get("folder",n.svid),o?c.transfer=o.container:n.pop?c.transfer=n.pop.container:c.terminal=c.marks,n=o=null,d=!1);return d},afterMove:function(b){var c,d=b.terminal||b.transfer||b.to;b.to[0]===b.from[0]&&(c=a.system.getTaskByElement(b.from)||a.system.getTaskByElement(b.from.parents("[tbc]:first")),setTimeout(function(){c.saveOrder()},200)),d.hasClass("tbc-desktop-dock")||d.hasClass("tbc-folder-container")||d.hasClass("tbc-pop-container")?(b.selected.css({position:"relative",left:"auto",top:"auto"}),b.node.css({position:"relative",left:"auto",top:"auto"})):d.hasClass("tbc-slide-scene")&&(b.node.css({position:"absolute"}),b.selected.css({position:"absolute"})),d=null,this.move(b)},destroy:function(){this.host instanceof a.Scene&&this.host.layout(),this.stopReceiveReminder(),e=f=null}})},updateOptions:function(a,b){var c,d;if("string"==typeof a&&"undefined"!=typeof b?(c={},c[a]=b):c=a,c instanceof Object)for(d in c)c.hasOwnProperty(d)&&(this.options[d]=this.options.originateSettings[d]=c[d])},icon:function(a){var b;if(void 0===a)b=this.parts.iconNode.attr("src");else if("string"==typeof a)return a.match(/\.(jpg|jpeg|gif|png|img|bmp|ico)$/)||-1!==a.indexOf("sf-server/file/getFile/")?this.parts.iconNode.show().attr("src",a):this.parts.iconNode.hide().parent().addClass(a),this.updateOptions("shortcutIconUrl",a),this.triggerEvent("changeIcon",a),this;return b},name:function(a,b){var c;return void 0!==typeof a?(this.updateOptions("userDeskItemName",a),this.parts.nameNode.html(a),this.ui.attr("title",a),this.updateOptions("userDeskItemName",a),this.triggerEvent("changeName",a),b!==!0&&this.window&&this.window.name(a),this):c=this.parts.nameNode.html()},tip:function(a){var c;a&&a.match&&(a.match(/^\+=/)?a=this.tip()+window.parseInt(a.replace(/^\+=/,"")):a.match(/^\-=/)&&(a=this.tip()-window.parseInt(a.replace(/^\-=/,"")))),!isNaN(a)&&a>0?(this.parts.tipsNode.html(a).parent().show(),this.triggerEvent("changeTips",a),c=this):0===a||0===window.parseInt(a)?(this.parts.tipsNode.html("").parent().hide(),c=this):c=window.parseInt(b.trim(this.parts.tipsNode.html())||0);try{return c}finally{c=null}},data:{},openTips:function(){if(this.parts.popNode.empty(),this.data.reminder){var a=[];b.each(this.data.reminder,function(b,c){return b>4?!1:(a.push("<li>"+c.title+"</li>"),void 0)}),a.length>0&&(this.parts.popNode.append(a.join("")),this.parts.popNode.parent().css({width:0,height:0,display:"block"}),this.keepVisible(),this.parts.popNode.parent().animate({width:260,height:140},300,"easeInOutBack"))}return this},keepVisible:function(){var a,b,c=this.ui.width(),d=(this.ui.height(),this.ui[0].offsetLeft),e=this.ui[0].offsetTop,f=d+c,g=260,h=140,i=this.ui.offsetParent()[0].offsetHeight,j=this.ui.offsetParent()[0].offsetWidth,k="0",l="auto";f+g>j&&d>g?(a=c-18,b="auto"):(a="auto",b="18px"),k=e+h>i?i-(e+h):0,this.parts.popNode.parent().css({top:k,bottom:l,left:b,right:a})},hideTips:function(){this.parts.popNode.parent().animate({width:0,height:0},function(){b(this).css({display:"none"})})},appendTo:function(a){return a.container?(this.host=a,a.shortcuts=a.shortcuts||{},a.shortcuts[f.userDeskItemId]=d,this.ui.appendTo(a.container),this.position=a):this.ui.appendTo(a),this},prependTo:function(a){return a.container?(this.host=a,a.shortcuts=a.shortcuts||{},a.shortcuts[f.userDeskItemId]=d,this.ui.appendTo(a.container)):this.ui.prependTo(a),this},move:function(c){var d,e,f=b(c.node).add(b(c.selected)),g=a.system.getTaskByElement(c.terminal||c.transfer||c.to),h=a.system.getTaskByElement(c.from);if(h)switch(h.constructor){case a.Scene:e="moveOutScene";break;case a.Folder:case a.folder.Pop:case a.Shortcut:e="moveOutFolder"}if(g)switch(g.constructor){case a.Scene:d="moveToScene";break;case a.Folder:d="moveToFolder";break;case a.folder.Pop:d="moveToFolderPop";break;case a.Shortcut:d="moveToFolderIcon"}d&&f.each(function(b,c){var i=a.system.getTaskByElement(c);h.reLayout=g.reLayout=b>=f.length-1,i&&h!==g&&(a.isFunction(i[e])&&i[e](h,g),a.isFunction(i[d])&&i[d](g)),i=c=null}),this.receiveReminder(),f=g=h=d=e=c=null},moveToScene:function(c){var d,e,f,g,h;this.host&&(this.undepend(this.host),this.host.layout&&this.host.layout(),e="tbc.folder.Pop"===this.host.packageName?"tbc.Folder":this.host.packageName,d=a.jdc.select(["shortcuts",e,this.host.svid].join("_"),this.svid),a.jdc.del(["shortcuts",e,this.host.svid].join("_"),this.svid),a.jdc.set(["shortcuts",c.packageName,c.svid].join("_"),this.svid,d),"tbc.Folder"===e&&(g=this.host.svid,f=b(".tbc-folder-shortcut[_shortcutid='"+g+"']").attr("tbc"),h=a.TASKS(f),h.thumbnail.remove(this.svid),h.receiveReminder()),a.Shortcut.moveToScene(c.options.id,this.svid),this.host=c,c.loaded||this.DESTROY()),this.depend(c),-1===c.container.children().index(this.ui)&&c.append(this,!1,d),d=null,this.triggerEvent("moveToScene",c)},moveOutScene:function(){},moveToDock:function(){var a;this.host&&(this.undepend(this.host),this.host.layout&&this.host.layout(),this.host=null),a=b(".tbc-desktop-dock"),-1===a.children().index(this.ui)&&this.appendTo(a),this.triggerEvent("moveToDock",a)},moveOutDock:function(){},moveToFolder:function(c){var d,e,f,g,h,i,j=this.host,k=this.svid;j&&(f=j.svid,this.undepend(j),j.layout&&c.reLayout&&j.layout(),e="tbc.folder.Pop"===j.packageName?"tbc.Folder":j.packageName,d=a.jdc.select(["shortcuts",e,f].join("_"),k),a.jdc.del(["shortcuts",e,f].join("_"),k),a.jdc.set(["shortcuts",c.packageName,c.svid].join("_"),k,d),"tbc.Folder"===e&&(g=b(".tbc-folder-shortcut[_shortcutid='"+f+"']").attr("tbc"),h=a.TASKS(g),h.thumbnail.remove(k),h.receiveReminder()),a.Shortcut.moveToFolder(c.svid,k),i=a.system.getTaskByElement(".tbc-folder-shortcut[_shortcutid='"+c.svid+"']"),i.thumbnail.append(k,d.applicationIconUrl),i.receiveReminder(),this.host=c,d=null),this.depend(c),-1===c.container.children().index(this.ui)&&c.append(this.ui),this.triggerEvent("moveToFolder",c)},moveOutFolder:function(d,e){var f=this,g=d.svid,h=a.system.getTaskByElement(b("[_shortcutid='"+g+"']"));h.thumbnail.remove(g),b.ajax({url:c.shortcutMoveOutFolder,type:"post",dataType:"json",data:{folderUserDeskItemId:g,userDeskItemId:this.svid},success:function(b){if(b.result&&"tbc.Scene"===e.packageName){var c=a.jdc.select(["shortcuts","tbc.Folder",g].join("_"),f.svid);a.jdc.del(["shortcuts","tbc.Folder",g].join("_"),f.svid),c&&(a.jdc.set(["shortcuts",e.packageName,e.svid].join("_"),f.svid,c),c=null)}}})},moveToFolderPop:function(c){var d,e,f,g,h,i=this.host,j=this.svid,k=i.svid;i&&(this.undepend(i),i.layout&&c.reLayout&&i.layout(),e="tbc.folder.Pop"===i.packageName?"tbc.Folder":i.packageName,d=a.jdc.select(["shortcuts",e,k].join("_"),j),a.jdc.del(["shortcuts",e,k].join("_"),j),a.jdc.set(["shortcuts","tbc.Folder",c.svid].join("_"),j,d),"tbc.Folder"===e&&(f=b(".tbc-folder-shortcut[_shortcutid='"+k+"']").attr("tbc"),g=a.TASKS(f),g.thumbnail.remove(j),g.receiveReminder()),a.Shortcut.moveToFolder(c.svid,j),h=a.system.getTaskByElement(".tbc-folder-shortcut[_shortcutid='"+c.svid+"']"),h.thumbnail.append(j,d.applicationIconUrl),h.receiveReminder(),this.host=c,c.layout&&c.reLayout&&c.layout(),d=null),this.depend(c),-1===c.container.children().index(this.ui)&&c.append(this.ui),this.triggerEvent("moveToFolder",c)},moveOutFolderPop:function(){},moveToFolderIcon:function(c){var d,e,f,g,h=this.host,i=this.svid,j=h.svid,k=this.options.shortcutIconUrl||this.options.applicationIconUrl;h&&(this.undepend(h),h.layout&&c.reLayout&&h.layout(),e="tbc.folder.Pop"===h.packageName?"tbc.Folder":h.packageName,d=a.jdc.select(["shortcuts",e,j].join("_"),i),a.jdc.del(["shortcuts",e,j].join("_"),i),a.jdc.set(["shortcuts","tbc.Folder",c.svid].join("_"),i,d),"tbc.Folder"===e&&(f=b(".tbc-folder-shortcut[_shortcutid='"+j+"']").attr("tbc"),g=a.TASKS(f),g.thumbnail.remove(i),g.receiveReminder()),a.Shortcut.moveToFolder(c.svid,i),this.host=null),d=null,c.thumbnail.append(i,k),c.receiveReminder(),this.triggerEvent("moveToFolderIcon",c),this.ui.remove(),this.DESTROY()},moveToStartMenu:function(a){this.host&&(this.undepend(this.host),this.host.layout&&this.host.layout(),this.host=a),this.depend(a),-1===a.container.children().index(this.ui)&&a.append(this.ui),this.triggerEvent("moveToStartMenu",a)},moveOutStartMenu:function(){},removeData:function(b){if(b)switch(b.constructor){case a.Folder:this.moveOutFolder(b);break;case a.folder.Pop:this.moveOutFolderPop(b);break;case a.desktop.Scene:this.moveOutScene(b);break;case a.Startmenu:this.moveOutStartMenu(b)}},receiveReminderDeferTime:null,receiveReminder:function(a){var b=this;clearTimeout(this.receiveReminderDeferTime),this.receiveReminderDeferTime=setTimeout(function(){if(b.type)switch(b.type){case"FOLDER":b.receiveReminderForFolder(a);break;case"APP":b.receiveReminderForApp(a);break;default:b.receiveReminderForApp(a)}},300)},receiveReminderForFolder:function(c){var d,e=this,g=a.jdc.select("shortcuts_tbc.Folder_"+f.userDeskItemId,"all");g&&(this.data=this.data||{},this.data.reminder=[],d=0,b.each(g,function(g,h){if(null!==h){var i=a.jdc.select("appLastRemindTime",h.applicationId),j=f.lastAccessTimestamp,k=(new Date).getTime();c||!i||k-i.readTime>e.options.remind_timeout?h.reminderUrl&&b.ajax({url:h.reminderUrl,type:"post",data:{lastAccessTimestamp:j},dataType:"json",cache:!1,complete:function(){},error:function(){},success:function(b){d+=b.number||0,b.number>0&&(f.reminder=f.reminder||b,e.data.reminder=e.data.reminder.concat(b.data),e.tip(d)),a.jdc.set("appLastRemindTime",h.applicationId,{time:j,readTime:k,count:b.number||(i?i.count:0)})}}):(d+=i?i.count||0:0,e.tip(d))}}))},receiveReminderForApp:function(c){var d=this,e=a.jdc.select("appLastRemindTime",f.applicationId),g=f.lastAccessTimestamp,h=f.reminderUrl,i=(new Date).getTime();h&&(c||!e||i-e.readTime>this.options.remind_timeout)?b.ajax({url:h,type:"post",data:{lastAccessTimestamp:g},cache:!1,dataType:"json",complete:function(){},error:function(){},success:function(b){f.reminder=b,d.tip&&d.tip(b.number),d.data=d.data||{},d.data.reminder=b.data,a.jdc.set("appLastRemindTime",f.applicationId,{time:g,readTime:i,count:b.number})}}):e&&"function"==typeof this.tip&&this.tip(e.count)},stopReceiveReminder:function(){return clearInterval(this.interval),this},updateRemindeTime:function(){if("APP"===this.type){var b=a.jdc.select("appLastRemindTime",f.applicationId),c=(new Date).getTime(),d={time:b&&b.time?b.time:f.lastAccessTimestamp,readTime:c,count:b?b.count||0:0};f.lastAccessTimestamp=c,a.jdc.set("appLastRemindTime",f.applicationId,d)}},open:function(){var c=this,d=f.userDeskItemId;return this.updateRemindeTime(),this.window=a.system.open(f),d&&this.window&&this.window.addEvent("afterClose",function(){var e=b(".tbc-folder-thumbnail-icon[_folderid='"+d+"']"),f=a.system.getTaskByElement(e);e.size()&&f?f.receiveReminder(!0):c.receiveReminder(!0),d=null}),this.pop&&(this.pop.close(),this.pop=null),this.window&&this.window.addEvent({changeTitle:function(a,b){c.name(b,!0)}}),this.triggerEvent("open"),this},rename:function(a){"FOLDER"===this.type?this.renameFolder(a):this.renameApp(a)},renameApp:function(){},renameFolder:function(d){if(d){var e=this,g=f.folderId||f.userDeskItemId,h=window.desktop.current().ui.attr("svid");b.ajax({url:c.renameFolder,type:"post",data:{_ajax_toKen:"elos",folderName:d,userDeskId:h,userDeskItemId:g},complete:function(){},error:function(){},dataType:"json",success:function(c){c.success||"true"===b.trim(c).toLowerCase()?e.name(d):(new a.Pop({width:240,height:80,autoClose:!0,timeout:3}).locate(e.ui.find(".tbc-shortcut-icon")).show().html('<p style="padding:2em;">重命名失败, 可能已经存在同名的文件夹!</p>'),e.startRename())}})}},startRename:function(){var c,d=this;this.parts.nameNode.addClass("tbc-shortcut-label-focus").focus(),c=b('<input type="text" value="'+this.parts.nameNode.text()+'"/>').css({border:"0px",height:"100%",width:"100%",background:"transparent",borderRadius:"0px",textAlign:"center"}).bind({"click.stopWhenEdit":function(){return!1},keyup:function(a){return 13===a.keyCode?(this.blur(),void 0):void 0},"blur focusout":function(e){var f=a.substr(b.trim(this.value),10);return d.rename(f),c.remove(),c=null,d.parts.nameNode.html(f).removeAttr("contenteditable").removeClass("tbc-shortcut-label-focus"),e.stopPropagation(),!1}}),this.parts.nameNode.html("").append(c),c[0].select(),c[0].focus()},del:function(){"FOLDER"===this.type?this.delFolder():this.delApp()},delFolder:function(){var c=this;return this.thumbnail.length>0?(new a.Pop({width:240,height:80,autoClose:!0,timeout:3}).locate(this.ui.find(".tbc-shortcut-icon")).show().html('<p style="padding:2em;">无法删除,文件夹不为空!</p>'),void 0):(a.Folder.del(this.svid,function(d){if(d.result||d.success){var e=b(c.ui).parents("[tbc]:first").attr("tbc"),f=a.TASKS(e);c.ui.remove(),f.layout(),c.DESTROY()}else new a.Pop({width:200,height:80,icon:null,autoClose:!0,timeout:3,locate:c.ui,parent:null}).locate(c.ui.find(".tbc-shortcut-icon")).show().html('<p style="padding:2em;">删除失败!</p>')}),void 0)},openPopFolder:function(){var b=this;return this.pop?b.pop.ui.fadeOut(100).fadeIn():(this.pop=new a.folder.Pop(a.extend({},f,{width:200,height:480,parent:".tbc-slide-scene.current",locate:b.ui})),this.pop.addEvent({close:function(){b.removeEvent("moved.locatePop"),b.pop=null}}),b.addEvent({"moved.locatePop":function(a){b.pop.locate(b.ui,a)}})),b.pop}}).init()},a.Shortcut.moveOutFolder=function(){},a.Shortcut.moveToFolder=function(d,e){b.ajax({url:c.shortcutMoveToFolder,type:"post",dataType:"json",data:{folderUserDeskItemId:d,userDeskItemId:e},success:function(b){b.success||a.alert(b.message)}})},a.Shortcut.moveToScene=function(d,e){b.ajax({url:c.shortcutMoveToScene,type:"post",dataType:"json",data:{deskId:d,shortcutId:e},success:function(b){b.success||a.alert(b.message)}})},a.Shortcut.getInstanceById=function(b){var c,d=a.TASK_DEPOT;for(c in d)if(d.hasOwnProperty(c)&&"tbc.Shortcut"===d[c].packageName&&d[c].id===b)return d[c]}}(window.tbc,window.jQuery,window.URLS),tbc.Start=function(a){var b=tbc.self(this,arguments);b.extend(tbc.Event),b.extend(tbc.ClassManager),b.packageName="tbc.Start";var c={handle:".tbc-startmenu-handle",ui:".tbc-startMenu",container:".tbc-startMenu-container"},d=tbc.extend({},c,a);b.container=$(d.container),b.ui=$(d.ui),b.handle=$(d.handle),b.ui.contextmenu({items:[{text:"隐藏开始菜单",icon:"",click:function(){b.hide()}}]}).bind({click:function(a){return a.stopPropagation(),!1},contextmenus:function(a){return a.stopPropagation(),!1}}),tbc.touchable?b.handle.bind({touchstart:function(a){return setTimeout(function(){b.toggle()},10),a.originalEvent.stopContextmenu=!0,!1}}):b.handle.bind({click:function(a){return b.toggle(),a.stopPropagation(),!1},mouseenter:function(){clearTimeout(b.hideTimer)}}),b.toggle=function(){b.ui.filter(":visible").size()?b.hide():b.show()},b.show=function(){b.ui.show(),b.ui.bind({mouseleave:function(){b.hideTimer=setTimeout(function(){b.hide()},300)}}),b.handle.addClass("tbc-startmenu-handle-hold"),tbc.touchable?$(document).bind({"touchend.startmenu":function(){}}):$(document).bind({"click.startmenu":function(a){(0===a.button||1===a.button)&&b.hide()
}}),b.userLoaded||b.getUser()},b.hide=function(){b.ui.hide(),b.handle.removeClass("tbc-startmenu-handle-hold"),b.ui.unbind("mouseleave"),$(document).unbind(".startmenu")},b.hideTaskbar=function(){},b.getUser=function(){var a=this;$.ajax({url:URLS.getUserinfo||"/uc/html/user/user.getFaceUrlAndName.do",type:"post",dataType:"json",error:function(){a.ui.find(".tbc-userPortrait img").hide(),a.ui.find(".tbc-startMenu-userinfo h1").html(USERNAME),a.userLoaded=!0,a=null},success:function(b){b.faceUrl?a.ui.find(".tbc-userPortrait img").attr("src",b.faceUrl).show():a.ui.find(".tbc-userPortrait img").hide(),a.ui.find(".tbc-startMenu-userinfo h1").html(b.userName),a.userLoaded=!0,a=null}})},b.getUser()},function(a,b){"use strict";var c=function(){var a=function(){};a()};c.prototype={getDesktopHeight:function(){return window.desktop.container.height()},getDesktopWidth:function(){return window.desktop.container.width()},getShortcutById:function(a){return this.getTaskByElement("[_shortcutid='"+a+"']")},getOpenType:function(a){var b,c="string"==typeof a?this.getAppOptions(a):a,d=null;if(c.itemType)switch(b=c.itemType.toUpperCase()){case"FOLDER":d="FOLDER";break;case"APPLICATION":d="APP";break;case"WIDGET":d="WIDGET";break;case"shortcut":d="LINK";break;case"ICON":d="NEW_WINDOW"===c.openType?"APP":"LINK";break;default:d=b}else d="NEW_WINDOW"===c.openType?"APP":"LINK";return d},getAppOptions:function(a){return window.applicationMap[a]},getTaskByElement:function(c){var d=b(c).attr("tbc");return d=d||b(c).parents("[tbc]:first").attr("tbc"),a.TASKS(d)},logout:function(c){if(c){var d=new a.Pop({width:320,height:150}).appendTo("body").locate(".tbc-startmenu-handle").show(),e=new a.Button({text:"退出",icon:"icon-breadcrumb_separator_arrow_2_dots",click:function(){a.system.logout(!1)}}),f=new a.Button({text:"取消",icon:"icon-close",click:function(){setTimeout(function(){d.close()},1)}});b("<div/>").html("退出平台后您正在学习的课程将无法记录学分,您确定退出吗?").css({padding:"0 0 2em 0"}).appendTo(d.container),e.depend(d),e.appendTo(d),e.ui.css("float","left").addClass("tbc-button-blue"),f.depend(d),f.appendTo(d),f.ui.css({marginRight:12,"float":"right"}),d.container.css("padding","2em")}else window.onbeforeunload=null,document.location.href="/login/login.logout.do"},open:function(c,d,e){var f,g,h,i,j="string"==typeof c?this.getAppOptions(c):c,k=this.getOpenType(j),l=null,m=j.appId||j.applicationId,n=a.webdesk.data.apps[m];switch(j=b.extend({},n,j),k){case"FOLDER":l=a.TaskManager.get("folder",j.userDeskItemId),l?(f=l.ui.parent(),g=f.hasClass("current"),h=a.system.getTaskByElement(f),g||h.show(),f=g=h=null,l.focused?l.flash():l.show()):(l=new a.Folder(j).addEvent({afterClose:function(){a.TaskManager.exit("folder",j.userDeskItemId)}}).show(),a.TaskManager.set("folder",j.userDeskItemId,l));break;case"APP":case"APPLICATION":l=a.TaskManager.get("app",j.applicationId),l?(f=l.ui.parent(),g=f.hasClass("current"),h=a.system.getTaskByElement(f),g||h.show(),f=g=h=null,l.show(),e&&l.load(j.homePageUrl,d?"post":"get",d)):("undefined"!=typeof d&&(j.data=d),i=window.applicationMap[j.applicationId],j=b.extend(i,j),l=new a.App(j,j).addEvent({afterClose:function(){a.TaskManager.exit("app",j.applicationId)}}).show(),a.TaskManager.set("app",j.applicationId,l));break;case"LINK":window.open(j.homePageUrl,j.applicationId);break;case"SHORTCUT":j.autologin===!1?this.startAutoLogin(j)===!1&&window.open(j.homePageUrl,j.applicationId):window.open(j.homePageUrl,j.applicationId)}try{return l}finally{l=null}},startAutoLogin:function(b){var c,d=b.userDeskItemId,e=window.URLS.autoLoginSetting,f=this;return"string"==typeof e?(e=e.replace(/\{\{shortcutId\}\}/,d),this.autoLoginWins=this.autoLoginWins||{},c=this.autoLoginWins[b.userDeskItemId],c?c.show():(c=new a.Window({width:500,height:340,name:b.userDeskItemName+" - 自动登录设置",homepage:e,loadType:"ajax"}).show(),c.addEvent({close:function(){delete f.autoLoginWins[b.userDeskItemId]}}),this.autoLoginWins[b.userDeskItemId]=c)):c=!1,c},isImg:function(a){return!("string"!=typeof a||!a.match(/\.(jpg|jpeg|gif|png|img|bmp|ico|WebP)$/)&&-1===a.indexOf("sf-server/file/getFile/"))}},a.system=new c}(window.tbc,window.jQuery),function(a,b){"use strict";a.Task=function(c){function d(){var d=a.system.isImg(c.icon)?c.icon:a.system.isImg(window.DEFAULT_ICONS.window_icon)?window.DEFAULT_ICONS.window_icon:"",e='<li class="tbc-task">    <i class="tbc-icon icon icon-16"><img onerror="this.style.display=\'none\';" src="{icon}"></i>    <span class="tbc-task-title">{title}</span>    <em></em></li>',f=b(e.replace(/\{title\}/g,c.title).replace(/\{icon\}/g,d));return f.bind({mouseenter:function(){b(this).addClass("tbc-task-hover")},mouseleave:function(){b(this).removeClass("tbc-task-hover")},mousedown:function(){b(this).addClass("tbc-task-active"),b(document).bind("mouseup.TBC_TASK_CLICK",function(){f.removeClass("tbc-task-active"),b(document).unbind("mouseup.TBC_TASK_CLICK")})}}),b(f).appendTo(h)}var e="tbc-task-hover",f="tbc-task-active",g="tbc-task-current",h=".tbc-task-container";a.self(this,arguments).extend({packageName:"tbc.Task",handle:null,init:function(){return this.packageName="tbc.Task",this.handle=d(),this.icon(c.icon||window.DEFAULT_ICONS.window_icon),this},show:function(){return this.handle.show(),this},hide:function(){return this.handle.hide(),this},remove:function(){this.handle.remove()},title:function(a){return"string"==typeof a&&this.handle.children(".tbc-task-title").html(a).attr("title",a),this},icon:function(b){return a.system.isImg(b)?this.handle.find(".tbc-icon img").attr("src",b).parent().addClass("icon"):this.handle.find(".tbc-icon").addClass(b).removeClass("icon"),this},flash:function(){var a=this;return setTimeout(function(){a.handle.addClass("tbc-task-current")},0),setTimeout(function(){a.handle.removeClass("tbc-task-current")},80),setTimeout(function(){a.handle.addClass("tbc-task-current")},160),setTimeout(function(){a.handle.removeClass("tbc-task-current")},220),setTimeout(function(){a.handle.addClass("tbc-task-current")},280),setTimeout(function(){a.handle.removeClass("tbc-task-current")},320),this.current&&setTimeout(function(){a.handle.addClass("tbc-task-current")},360),this},setCurrent:function(){return this.handle&&(this.current=!0,this.handle.addClass("tbc-task-current")),this},removeCurrent:function(){return this.handle&&(this.current=!1,this.handle.removeClass("tbc-task-current")),this}}).addEvent({destroy:function(){d=c=e=f=g=h=null}}).init()}}(tbc,jQuery),tbc.Taskbar=function(a){var b=tbc.self(this,arguments);b.packageName="tbc.Taskbar",b.extend(tbc.Event),b.extend(tbc.ClassManager);var c={ui:".tbc-taskbar",handle:null,startBox:".tbc-startBox",taskbbox:".tbc-task-box",container:".tbc-task-container",quickbar:".tbc-task-quickLaunch",appsTray:".tbc-appsTray",toPrev:".tbc-scroll-arrow-toPrev",toNext:".tbc-scroll-arrow-toNext"},d=tbc.extend({},c,a);b.ui=$(d.ui),b.taskbox=$(d.taskbox),b.container=$(d.container),b.startBox=$(d.startBox),b.quickbar=$(d.quickbar),b.appsTray=$(d.appsTray),b.hide=function(a){b.container.parent().hide(),b.quickbar.hide(),b.appsTray.hide(),b.ui.find(".tbc-taskbar-container").stop().animate({width:"60"},"slow",function(){b.ui.css({overflow:"",width:60})}),a!==!1&&(b.state="min",b.ui.addClass("tbc-taskbar-min"),b.ui.children(".tbc-toggle-taskbar").removeClass("tbc-hideTaskbar").addClass("tbc-showTaskbar")),b.triggerEvent("hdie")},b.show=function(a){b.container.parent().show(),b.quickbar.show(),b.appsTray.show(),b.ui.css("width","100%").find(".tbc-taskbar-container").stop().animate({width:"100%"},function(){this.style.overflow="visible"}),a!==!1&&(b.state="max",b.ui.removeClass("tbc-taskbar-min"),b.ui.children(".tbc-toggle-taskbar").removeClass("tbc-showTaskbar").addClass("tbc-hideTaskbar")),b.triggerEvent("show")},b.toggle=function(){"min"===b.state?b.show():b.hide()},b.slidetoLeft=function(){b.container.animate({scrollLeft:"+=100"},200)},b.slidetoRight=function(){b.container.animate({scrollLeft:"-=100"},200)},b.slideTo=function(a){b.container.animate(a||{},200)},b.slideToTask=function(a){if(a){var c=b.container.width(),d=$(a),e=d.size()?d[0].offsetLeft:0;b.slideTo({scrollLeft:e-c/2,scrollTop:0})}},b.resize=function(){var a=($("body").width(),$(".tbc-startBox").width()),b=0,c=0;b=20*$(".tbc-task-quickLaunch i.tbc-imgicon").size()+10,$(".tbc-task-quickLaunch").width(b),$(".tbc-appsTray .tbc-button-link").each(function(){c+=$(this).outerWidth()+2*parseInt($(this).css("marginLeft"))}),c=Math.max(c,24),$(".tbc-appsTray").width(c+10),$(".tbc-task-box").css({marginLeft:0===b?"":b+a+24,marginRight:0===c?"":c+40})},b.addPopLink=function(a){var b={icon:null,text:null,showText:!1,url:null,width:400,height:300,position:null,click:function(){}},c=tbc.extend({},b,a);c.url&&$('<div class="tbc-popwindow"></div>').css({width:c.width||b.width,height:c.height||c.height})},$(d.toPrev).click(function(){return b.slidetoRight(),!1}),$(d.toNext).click(function(){return b.slidetoLeft(),!1}),$(d.ui).find(".tbc-toggle-taskbar").click(function(){return b.toggle(),!1}),$(d.ui).bind({mouseenter:function(){"min"===b.state&&b.show(!1)},mouseleave:function(){"min"===b.state&&b.hide(!1)}})},tbc.TaskManager=new function(){var a=tbc.self(this,arguments);a.extend(tbc.Event),a.extend(tbc.ClassManager),a.packageName="tbc.TaskManager",a.taskStore={},a.set=function(b,c,d){return b&&c&&d?(a.taskStore[b]=a.taskStore[b]||{length:0},a.taskStore[b][c]||a.taskStore[b].length++,a.taskStore[b][c]=d,a):"参数Type/id/task是必须的;"},a.get=function(b,c){if("all"===b){var d=[];for(var e in a.taskStore)for(var f in a.taskStore[e])"length"!==f&&d.push(a.taskStore[e][f]);return d}if("all"===c){var d=[];for(var e in a.taskStore[b])"length"!==e&&d.push(a.taskStore[b][e]);return d}return a.taskStore[b]?a.taskStore[b][c]:null},a.doWith=function(b,c,d){if("all"===c)for(var e in a.taskStore)for(var f in a.taskStore[e])"length"!==f&&b(a.taskStore[e][f]);else if(c&&"all"===d||!d)for(var e in a.taskStore[c])"length"!==e&&b(a.taskStore[c][e]);else c&&d&&a.taskStore[c]&&b(a.taskStore[c][d]);return null},a.exit=function(b,c){return a.taskStore[b]&&(delete a.taskStore[b][c],a.taskStore[b].length--),a}},function(a,b){"use strict";a.Window=function(c){var d=window.desktop,e=window.URLS,f=a.self(this,arguments);f.extend([a.Panel,c]),f.packageName="tbc.Window";var g={loadType:"iframe",homepage:null,autoLoad:!0,scrolling:!0},h=b.extend({},g,c),i=b('<div class="tbc-window-toolbar"></div>'),j=b('<div class="tbc-window-body" style="'+(h.scrolling?"overflow:auto;":"")+'"></div>'),k=b('<div class="tbc-window-statebar"></div>');if(h.appRoles&&h.appRoles.length>1?(f.part.roleList.empty(),f.part.roleBox.css({display:"block"}).bind({mouseleave:function(){f.part.roleList.hide()}}),f.part.roleHandle.click(function(){f.part.roleList.show()}),f.part.roleName.click(function(){f.part.roleList.show()}),b.each(h.appRoles,function(a,c){c.currentRole&&f.part.roleName.html(c.roleName),b("<li/>").html(c.roleName).appendTo(f.part.roleList).click(function(){f.part.roleName.html(c.roleName),f.switchRole(c.roleId,c.roleCode),f.part.roleList.hide(),h.originateSettings,h.originateSettings.appRoles[a].currentRole=!0,b.each(h.appRoles,function(b){a!==b&&(h.originateSettings.appRoles[b].currentRole=!1)})})})):f.part.roleBox.hide(),a.Task&&(f.task=new a.Task({title:h.title,icon:h.icon}),f.task.depend(f),f.task.handle.contextmenu({items:[{text:"最小化",icon:"",click:function(){f.min()},disabled:function(){return!h.minimizable||f.minimize},inheritable:!0},{text:function(){return"max"===f.sizeType?"还原":"最大化"},icon:"",click:function(){"max"===f.sizeType?f.restore():f.max()},disabled:function(){return!h.maximizable},inheritable:!0},{text:"关闭",icon:"icon-application_windows_remove",click:function(){f.close()},inheritable:!0},{text:"关闭全部",icon:"icon-remove_outline",click:function(){var b,c,d;for(c=a.Panel.sequence,d=c.length;d>=0;d-=1)b=a.Panel.cache[c[d]],b&&b.close&&b.close(!0);b=null},inheritable:!0}]}),f.task.handle.bind({click:function(){var b,c,e=f.ui.parent(),g=e.hasClass("current"),h=a.system.getTaskByElement(e);!g&&h&&(b=h.index,d.show(b)),f.minimize?(c=f.sizeType,f.resize(c)):f.focused?g?f.min():f.flash():(f.focus(),f.focused&&f.task.setCurrent()),e=g=h=null}}),f.addEvent({focus:function(){f.minimize||f.task.setCurrent()},show:function(){f.task.show()},hide:function(){f.task.hide()},blur:function(){f.task.removeCurrent()},afterClose:function(){f.task.remove(),delete f.task.handle,f=null},changeTitle:function(a,b){f.task.title(b&&a?b+": "+a:b||a)},changeIcon:function(a){f.task.icon(a)}})),f.html(i.add(j).add(k)),f.addEvent({resize:function(){var a=f.part.container.innerHeight(),b="none"!==i.css("display")?i.outerHeight():0,c="none"!==k.css("display")?k.outerHeight():0;j.height(a-b-c)},load:function(a,b){f.history.add(a,b)}}),f.container=j,f._html=f.html,f.history=new a.History(function(a){f.load(a.url,a.method,a.data,!1)}),f.history.depend(f),a.extend(f,{html:function(a){return(this.container||j).html(a),this},tools:{store:{},length:0,container:i,add:function(a,b){if(!a)return this;i[0].style.display="block";var c,d,e;"string"==typeof a&&b?(c={},c[a]=b):c=a;for(d in c)c.hasOwnProperty(d)&&(e=c[d],this.store[d]=e,e=e&&e.ui?e.ui:e,i.append(e),f.triggerEvent("tools.add",e),this.length+=1);return f.triggerEvent("resize"),c=null,this},get:function(a){return this[a]},remove:function(a){return this.store[a].remove(),delete this.store[a],f.triggerEvent("tools.remove"),this.length-=1,this.length<1&&i.hide(),this},clear:function(){var a;for(a in this.store)this.store.hasOwnProperty(a)&&this.remove(a);return this}},reload:function(){this.history.prohibited=!0;var a=this.history.current();return a?this.load(a.url,a.method,a.data):this.load(h.homepage,h.data?"post":"get",h.data),a=null,this},refresh:function(){return this.load(h.homepage,h.data?"post":"get",h.data),this},reset:function(){return"MAX"!==h.windowInitialType&&"FULL"!==h.windowInitialType&&this.maximize&&this.restore(),this.initForOpen(),this.load(h.homepage,h.data?"post":"get",h.data),this},help:function(){if(e.help){var d=function(c){b.ajax({url:e.help,type:"post",data:{applicationId:c,corpCode:window.corpCode},dataType:"html",beforeSend:function(){a.system.helpwin.lock("loading","loading...")},complete:function(){a.system.helpwin.unlock("loading")},error:function(){a.system.helpwin.load('<div style="padding:180px 2em; text-align:center;">没有找到与 <strong>'+(h.applicationName||h.userDeskItemName)+"</strong> 相关的帮助内容.</div>")},success:function(c){a.system.helpwin.load("");var d,e=b('<div class="apphelp-frame"></div>'),f=b(c).find("div.apphelp-tab-frame"),g=b('<div class="infotitle_a"><ul></ul></div>'),h=b('<div class="apphelp-frame-container" style=""></div>');d=new a.Tabset({container:h,header:g.children("ul"),effects:"fade"}),f.each(function(){var c=this.getAttribute("title"),e=b('<li class="">'+c+"</li>"),f=b(this).children(),g=new a.Tabpage({title:c,handleNode:e,titleNode:e,iconNode:null,container:b('<div class="apphelp-tab-frame"></div>').append(f),content:this,currentClass:"cur",autoShow:!1});d.append(g),d.dependSelf(g)}),d.show(0),d.depend(a.system.helpwin),a.system.helpwin.addEvent("beforeunload",function(){b.each(d.tabs,function(){this.DESTROY()}),d.DESTROY(),e=f=g=h=d=null}),e.append(g),e.append(h),a.system.helpwin.append(e)}})};a.system.helpwin?(a.system.helpwin.focus().flash().name("帮助 "+(c.userDeskItemName||c.applicationName)),d(h.applicationId||h.userDeskItemId)):(a.system.helpwin=new a.Window({name:"帮助 "+(c.userDeskItemName||c.applicationName),icon:"icon-comment_question",loadType:"html",width:580,height:450,minWidth:580,minHeight:450,scrolling:!1,minimizable:!0,maximizable:!0,resizable:!0,refreshable:!0}).addEvent("close",function(){delete a.system.helpwin}).show(),a.system.helpwin.refresh=function(){d(h.applicationId||h.userDeskItemId)},d(h.applicationId||h.userDeskItemId))}},load:function(a,b,c){function d(){switch(h.loadType){case"iframe":f.loadByIframe(a,b,c);break;case"ajax":f.loadByAjax(a,b,c);break;case"html":f.html(c||a)}}var e=f.triggerEvent("beforeunload");return f.loadTime=(new Date).getTime(),(e!==!1||window.confirm("您确定离开该页面吗?"))&&d(),a=a||f.iframeUrl||h.homepage,f},loadByAjax:function(a,c,d){return b.ajax({url:a,method:c||(d?"post":"get"),data:d||null,error:function(){},success:function(a){a=b.isFunction(h.ajaxResultProcessor)?h.ajaxResultProcessor(a):a,a!==!1&&f.html(a)}}),f},switchRole:function(c,d){if(c){var g=h.applicationId;b.ajax({url:a.formatString(e.switchAppRole,"elos",g,c),dataType:"json",type:"get",error:function(){},success:function(){f.load(h.homepage,"post",{current_role_code:d,current_role_id:c,current_app_id:h.userDeskItemId})}})}},matchIframeSrc:function(a){var b,c,d;a.match(/http:\/\/hao.qq.com/)?d="http://hao.qq.com":(b=a?a.match(/<iframe[^>]+>/):null,c=b&&b[0]?b[0].match(/src\s*=\s*["']?\s*\S+\s*["']?/):null,d=c&&c[0]?c[0].replace(/(src\s*=\s*["']?\s*|\s*["']*\s*>?$)/g,""):null,d=!d||d.match(/^("|'|,|\+|\()/)?null:d);try{return d}finally{a=b=c=d=null}},loadByIframe:function(c){f.lock("loading","等待服务器响应...");var d=f.loadTime;return a.Window.iframeUrls=a.Window.iframeUrls||{},a.Window.iframeUrls[h.applicationId]?f._loadByIframe(a.Window.iframeUrls[h.applicationId],h.data?"post":"get",h.data):b.ajax({url:c||h.homepage,success:function(b){if(d===f.loadTime){var e=f.matchIframeSrc(b);f._loadByIframe(e||c||h.homepage,h.data?"post":"get",h.data),!a.Window.iframeUrls[h.applicationId]&&e&&(a.Window.iframeUrls[h.applicationId]=e),e=null}},error:function(){f._loadByIframe(c||h.homepage,h.data?"post":"get",h.data)}}),f},_loadByIframe:function(a,c,d){this.lock("loading","正在加载应用...");var e,g,h=[],i=f.iframe,j="tbc_window_iframe_"+f.guid;if(a=a.replace(/#$/,""),i.src="","post"===c&&d){e=b('<form action="'+a+'" target="'+j+'" method="post" enctype="application/x-www-form-urlencoded" style="display:none;"></form>').appendTo(f.container);for(g in d)b('<input class="default_data" type="hidden" name="'+g+'" id="'+g+'" value="'+d[g]+'" />').appendTo(e);b('<input class="default_data" type="submit" name="submit_default_data" id="submit_default_data" value="submit" />').appendTo(e),setTimeout(function(){e[0].submit(),e.find(".default_data").remove(),e.remove(),e=null},1)}else if("get"===c&&d){if("object"==typeof d)if(d.constructor===Array)h=h.concat(d);else for(g in d)h.push([g,d[g]].join("="));else h.push(d);a=-1!==a.indexOf("?")?a+"&"+h.join(""):a+"?"+h.join(""),i.setAttribute("src",a)}else i.setAttribute("src",a);return setTimeout(function(){f&&"function"==typeof f.unlock&&f.unlock("loading")},1e3),h=j=null,f}}),"iframe"===h.loadType){if(f.html('<iframe class="tbc-window-iframe" scrolling="auto" frameborder="no" hidefocus="" allowtransparency="true" id="tbc_window_iframe_'+f.guid+'" name="tbc_window_iframe_'+f.guid+'"></iframe'),f.iframe=f.container.children(".tbc-window-iframe")[0],f.addEvent({beforeClose:function(){f.returnValue=f.iframe.contentWindow.returnValue}}),a.msie&&a.browserVersion<8&&(f.iframe.attachEvent("onload",function(){var a,c=10;a=setInterval(function(){c--,0>c&&clearInterval(a),b(".tbc-slide-scene.current,.tbc-desktop-slide,.tbc-desktop,body").each(function(){})},500)}),f.iframe.attachEvent("onfocus",function(a){return a.preventDefault&&a.preventDefault(),!1})),a.touchable){var l=0,m=0;f.iframe.onload=function(){var a,b=12,c=1e3,d=f.iframe.contentWindow;a=setInterval(function(){b--;try{var c=d.document;c.body.addEventListener("touchstart",function(a){m=a.targetTouches[0].pageX,l=a.targetTouches[0].pageY}),c.body.addEventListener("touchmove",function(a){f.iframe.parentNode.scrollHeight>20+f.iframe.parentNode.offsetHeight&&a.preventDefault();var b=m-a.targetTouches[0].pageX,d=l-a.targetTouches[0].pageY;f.iframe.parentNode.scrollLeft+=b,f.iframe.parentNode.scrollTop+=d,this.scrollLeft+=b,this.scrollTop+=d,c.documentElement.scrollLeft+=b,c.documentElement.scrollTop+=d}),c.body.addEventListener("touchend",function(){}),clearInterval(a)}catch(e){}1>b&&clearInterval(a)},c)}}f.unlock("loading"),f.addEvent("beforeClose.clearIframe",function(){var a=b(f.iframe).hide();try{a[0].contentWindow.document.write(""),a[0].contentWindow.document.clear()}catch(c){}f.iframe.src="about:blank",delete f.iframe.execute,delete f.iframe.trigger,a.remove(),f.iframe=a=null}),f.iframe.execute=function(a){for(var b=[],c=1;c<arguments.length;c++)b.push(arguments[c]);"function"==typeof a?a.apply(f,b):f[a].apply(f,b),b=null},f.iframe.trigger=function(a){for(var b=[a],c=1;c<arguments.length;c++)b.push(arguments[c]);f.triggerEvent.apply(f,b),b=null}}return h.homepage&&h.autoLoad&&f.load(h.homepage,h.data?"post":"get",h.data),f.addEvent({afterClose:function(){f.tools.clear()},destroy:function(){try{h=c=g=i=k=j=f=null}catch(a){}}}),f}}(tbc,jQuery),$.fn.desktop=function(a,b){switch(a){case"setBg":$.get(b.url,function(a){desktop.setBackground(a.url)});break;case"openwin":var c;for(var d in window.applicationMap)[window.applicationMap[d].appCode,b.appCode,window.applicationMap[d].applicationId,b.id],(window.applicationMap[d].appCode==b.appCode||window.applicationMap[d].applicationId==b.id)&&(c=$.extend({},window.applicationMap[d]),c.iframe=!1,c.homePageUrl=b.url||c.homePageUrl,c.itemType="APP");c&&tbc.system.open(c,null,!0);break;case"opennew":b.courseId&&$("body").attr("appPostId",b.courseId),$.fn.desktop("openwin",b)}},window.desktopWindow=function(a,b){tbc.system.open(a,b)},window.desktopWindowWithUrl=function(a,b){var c=tbc.system.open(a);c.load(b)},function(){"use strict";var a=window.tbc,b=a.namespace("tbc.webdesk.data.translator");b.roles=new a.Translator({type:"type",roleCode:"code",roleId:"id",roleName:"name",currentRole:"current",comments:"comments",corpCode:null,overrideType:null,overrideId:null,showOrder:null,createBy:null,createTime:null,lastModifyBy:null,lastModifyTime:null,optTime:null,createByCode:null}),b.autoruns=new a.Translator({appRoles:"roles",reminderUrl:"remind",lastAccessTimestamp:"accessTime",openType:"openType",itemType:"type",applicationId:"appId",corpCode:"corpCode",userDeskItemId:"id",userDeskId:"deskId",tooltips:"tooltips",userDeskItemName:"name",applicationName:"appName",windowInitialType:"initialType",autoRun:"autorun",applicationIconUrl:"icon",preferredWidth:"width",preferredHeight:"height",homePageUrl:"url",referType:"referType",userDeskPosition:null,position:null,folder:null,folderItemList:null,userDeskItemManager:null,shortcutUrl:null,shortcutIconUrl:null,openShortcutType:null,shortcutInitType:null,folderId:null,userDesk:null,applicationMiniIconUrl:null,widgetUrl:null,applicationType:null,positionInFolder:null,application:null,userDeskdockItemList:null,corpUserDeskItemName:null,shortcut:null,dto:null,createBy:null,createTime:null,lastModifyBy:null,lastModifyTime:null,optTime:null,formObject:null,selectedInShowSelect:null}),b.shortcuts=new a.Translator({appRoles:"roles",reminderUrl:"remind",lastAccessTimestamp:"accessTime",openType:"openType",itemType:"type",applicationId:"appId",userDeskItemId:"itemId",tooltips:"tooltips",userDeskItemName:"name",windowInitialType:"initialType",autoRun:"autorun",applicationIconUrl:"icon",preferredWidth:"width",preferredHeight:"height",homePageUrl:"url",referType:"referType",applicationType:"appType",folderId:"folderId",autologin:"autologin",dto:null,userDeskPosition:null,position:null,corpCode:null,userDeskId:null,folder:null,applicationName:null,folderItemList:null,userDeskItemManager:null,shortcutUrl:null,shortcutIconUrl:null,openShortcutType:null,shortcutInitType:null,userDesk:null,applicationMiniIconUrl:null,widgetUrl:null,positionInFolder:null,application:null,userDeskdockItemList:null,corpUserDeskItemName:null,shortcut:null,createBy:null,createTime:null,lastModifyBy:null,lastModifyTime:null,optTime:null,formObject:null,selectedInShowSelect:null}),b.apps=new a.Translator({description:"des",openType:"openType",itemType:"itemType",applicationId:"appId",applicationName:"name",windowInitialType:"initialType",targetUserDeskType:"targetDeskType",appCode:"appCode",autoRun:"autoRun",autoRunOnce:"autorunOnce",applicationIconUrl:"icon",preferredWidth:"width",preferredHeight:"height",homePageUrl:"url",applicationType:"appType",needInit:"isAutoLogin",applicationCategoryId:"categoryId",maximizable:"max",minimizable:"min",templateBasePath:"basePath",applicationCategoryName:"categoryName",autologin:"autologin",reminderUrl:null,corpCode:null,applicationMiniIconUrl:null,tooltipsSuffix:null,projectId:null,sinceProjectVersion:null,appStatus:null,resourceAccessUrl:null,projectName:null,initCorpDataUrl:null,useWF:null,useIM:null,useJM:null,useIS:null,resourceAccessApp:null,createBy:null,createTime:null,lastModifyBy:null,lastModifyTime:null,optTime:null,createByCode:null}),b.tools=b.shortcuts,a.webdesk.data.settings={},a.webdesk.data.shortcuts=[],a.webdesk.data.autoruns=[],a.webdesk.data.tools=[],a.webdesk.data.trays=[],a.webdesk.data.apps={},b.apps.valueTranslator=b.autoruns.valueTranslator=b.shortcuts.valueTranslator=function(a,c,d){switch(a){case"appRoles":case"roles":return b.roles.transformList(c,d)}return c}}(),jQuery.ajaxSetup({data:{_ajax_toKen:"elos"}}),jQuery(function(a){"use strict";var b,c,d,e,f,g=window.tbc;a.ajaxSetup({data:{_ajax_toKen:"os"},cache:!1,error:function(a){if(403===a.status)try{window.tbc.system.logout()}catch(b){}if(411!==a.status);else{window.onbeforeunload=function(){};try{window.tbc.system.logout()}catch(c){}}}}),setInterval(function(){a.ajax({url:"/uc/html/loginLog.updateLogout.do",type:"post",success:function(){}})},18e4),a(".tbc-desktop-nav").drag({shandle:".tbc-desktop-nav-handle",area:{top:6,left:0,right:"95%",bottom:38},areaMargin:{top:0,left:0,right:"0",bottom:0},timeout:100,event:{dragStart:function(){g.lock("body",{backgroundColor:"#fff",opacity:.001,zIndex:9999999999,cursor:"move"})},dragEnd:function(){g.unlock("body")}}}).on("click",".s_add-scene",function(){f.manager.addDesktop()}).contextmenu({items:[{text:"添加桌面",disabled:0,inheritable:!0,click:function(){f.manager.addDesktop()}}]}),g.touchable&&document.body.addEventListener("touchmove",function(a){return a.preventDefault(),!1}),a(".tbc-taskbar").appendTo("body"),window.taskbar=new g.Taskbar({container:".tbc-task-container",toPrev:".tbc-scroll-arrow-toPrev",toNext:".tbc-scroll-arrow-toNext"}),window.quickLaunch=new g.QuickLaunch({}),window.apptray=new g.AppTray,window.quickLaunch.append({guid:"showdesktop",icon:"icon-view_thumbnail",title:"显示桌面",click:function(){window.desktop.minAll()}}),f=window.desktop=new g.Desktop({container:".tbc-tabset",header:".tbc-desktop-nav-list",effects:"slide-x",easing:"swing",speed:300,prevHandle:".tbc-tabset-prev",nextHandle:".tbc-tabset-next"}),window.startmenu=new g.Start,function(){var f,h={};!function(){var a,b,c=navigator.userAgent.toLowerCase(),d={ie:/msie ([\d.]+)/,firefox:/firefox\/([\d.]+)/,chrome:/chrome\/([\d.]+)/,opera:/opera\/([\d.]+)/,safari:/version\/([\d.]+) *safari/};for(b in d)d.hasOwnProperty(b)&&(a=c.match(d[b]),h[b]=a?parseFloat(a[1]):0)}(),f=h.ie?"IE "+h.ie:h.firefox?"Firefox "+h.firefox:h.chrome?"Chrome "+h.chrome:h.opera?"Opera "+h.opera:h.safari?"Safari "+h.safari:"未知浏览器",h.firefox>=8||h.ie>=7||h.chrome>=12||h.opera>=8||h.safari>=3?(window.onbeforeunload=function(a){a=a||window.event;var b=a.returnValue="退出后,您正在观看的课程进度将不会被记录,确定要退出吗?";return b},window.desktop.loadScene()):(c=new g.Panel({name:"您的浏览器版本不满足要求!",width:500,height:240}).addEvent({close:function(){window.desktop.loadScene()}}).show().icon("icon-warning_triangle").appendTo("body"),c.html('<div class="dialog-msg" style="padding:2em;">您现在使用的浏览器是<b class="truered">'+f+'</b>,可能会造成部分功能体验不好,是否继续访问?<br /><b style="color:#06f">(建议使用IE7.0以上、Firefox8.0以上、Chrome12.0以上、Safari3.0、Opera3.0以上版本的浏览器)</b></div>'),b=new g.Button({text:"继续访问",icon:"icon-arrow_medium_right",click:function(){window.onbeforeunload=function(a){a=a||window.event;var b=a.returnValue="退出后,您正在观看的课程进度将不会被记录,确定要退出吗?";return b},c.close()}}),d=new g.Button({text:"退出登录",icon:"icon-warning_triangle_small",click:function(){g.system.logout()}}),e=a("<div></div>").css({textAlign:"center",margin:"12px auto"}),b.appendTo(e).ui.css({marginRight:"10px"}),d.appendTo(e),e.appendTo(c.container))}(),a("body").contextmenu({items:[{text:"显示桌面",icon:"icon-view_thumbnail",click:function(){window.desktop.minAll()},inheritable:!0},{text:"退出",icon:"icon-gem_remove",click:function(){g.system.logout(!0)},inheritable:!0}]}),window.ICONS=function(){window.aaabbb=new g.Window({name:"小图标和按钮",minimizable:!0,maximizable:!0,width:500,height:320,left:"auto",top:"auto",loadType:"html"}).append(a(".icons-demo").css({display:"block",width:"100%",height:"100%",overflow:"auto"})).appendTo(a("body")).show().addEvent("close",function(){this.fling().lock("lock","被锁定,不能关闭!");var a=this;setTimeout(function(){a.unlock("lock"),a=null},2e3)})}});